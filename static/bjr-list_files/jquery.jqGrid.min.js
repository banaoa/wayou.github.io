(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{htmlDecode:function(e){if(e=="&nbsp;"||e=="&#160;"||e.length==1&&e.charCodeAt(0)==160)return"";return!e?e:String(e).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace( &quot;="" g,'"')},htmlencode:function(e){return!e?e:string(e).replace(="" &="" g,"&amp;").replace(="">/g,"&gt;").replace(/])*>/gi;if(e)return(e=e.replace(t,""))&&e!=="&nbsp;"&&e!=="&#160;"?e.replace(/\"/g,"'"):"";else return e},stringToDoc:function(e){var t;if(typeof e!=="string")return e;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(i){t=new ActiveXObject("Microsoft.XMLDOM");t.async=false;t.loadXML(e)}return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null},parse:function(f){f=f;if(f.substr(0,9)=="while(1);")f=f.substr(9);if(f.substr(0,2)=="/*")f=f.substr(2,f.length-4);f||(f="{}");return b.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function"?JSON.parse(f):eval("("+f+")")},parseDate:function(e,t){var i={m:1,d:1,y:1970,h:0,i:0,s:0},r,a,s;if(t&&t!==null&&t!==undefined){t=b.trim(t);t=t.split(/[\\\/:_;.\t\T\s-]/);e=e.split(/[\\\/:_;.\t\T\s-]/);var o=b.jgrid.formatter.date.monthNames,l=b.jgrid.formatter.date.AmPm,n=function(e,t){if(e===0){if(t==12)t=0}else if(t!=12)t+=12;return t};r=0;for(a=e.length;r<a;r++){if(e[r]=="m"){s=b.inarray(t[r],o);if(s!==-1&&s<12)t[r]=s+1}if(e[r]=="f"){s=b.inarray(t[r],o);if(s!==-1&&s>11)t[r]=s+1-12}if(e[r]=="a"){s=b.inArray(t[r],l);if(s!==-1&&s<2&&t[r]==l[s]){t[r]=s;i.h=n(t[r],i.h)}}if(e[r]=="a"){s=b.inarray(t[r],l);if(s!==-1&&s>1&&t[r]==l[s]){t[r]=s-2;i.h=n(t[r],i.h)}}if(t[r]!==undefined)i[e[r].toLowerCase()]=parseInt(t[r],10)}i.m=parseInt(i.m,10)-1;e=i.y;if(e>=70&&e<=99)i.y=1900+i.y;else if(e="">=0&&e<=69)i.y=2e3+i.y}return new="" date(i.y,i.m,i.d,i.h,i.i,i.s,0)},jqid:function(e){e+="" ;return="" e.replace(="" ([\.\:\[\]])="" g,"\\$1")},getaccessor:function(e,t){var="" i,r,a,s;if(typeof="" t="=="function")return" t(e);i="e[t];if(i===undefined)try{if(typeof" i},ajaxoptions:{},from:function(f){return="" function(j,i){if(typeof="" j="="string")j=b.data(j);var" c="this,e=j,k=true,l=false,a=i,r=/[\$,%]/g,u=null,B=null,G=false,Q="",J=[],M=true;if(typeof">0)M=typeof j[0]!="object"?false:true}else throw"data provides is not an array";this._hasData=function(){return e===null?false:e.length===0?false:true};this._getStr=function(e){var t=[];l&&t.push("jQuery.trim(");t.push("String("+e+")");l&&t.push(")");k||t.push(".toLowerCase()");return t.join("")};this._strComp=function(e){return typeof e=="string"?".toString()":""};this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}};this._toStr=function(e){if(l)e=b.trim(e);k||(e=e.toLowerCase());return e=e.toString().replace(new RegExp('\\"',"g"),'\\"')};this._funcLoop=function(t){var i=[];b.each(e,function(e,r){i.push(t(r))});return i};this._append=function(e){if(a===null)a="";else a+=Q===""?" && ":Q;if(G)a+="!";a+="("+e+")";G=false;Q=""};this._setCommand=function(e,t){u=e;B=t};this._resetNegate=function(){G=false};this._repeatCommand=function(e,t){if(u===null)return c;if(e!=null&&t!=null)return u(e,t);if(B===null)return u(e);if(!M)return u(e);return u(B,e)};this._equals=function(e,t){return c._compare(e,t,1)===0};this._compare=function(e,t,i){if(i===undefined)i=1;if(e===undefined)e=null;if(t===undefined)t=null;if(e===null&&t===null)return 0;if(e===null&&t!==null)return 1;if(e!==null&&t===null)return-1;if(!k){e=e.toLowerCase();t=t.toLowerCase()}if(e<t)return-i;if(e>t)return i;return 0};this._performSort=function(){if(J.length!==0)e=c._doSort(e,0)};this._doSort=function(e,t){var i=J[t].by,r=J[t].dir,a=J[t].type,s=J[t].datefmt;if(t==J.length-1)return c._getOrder(e,i,r,a,s);t++;e=c._getGroup(e,i,r,a,s);i=[];for(r=0;r<e.length;r++){a=c._dosort(e[r].items,t);for(s=0;s<a.length;s++)i.push(a[s])}return i};this._getorder="function(e,t,i,a,s){var" o="[],l=[],n=i=="a"?1:-1,d,u;if(a===undefined)a="text";u=a=="float"||a=="number"||a=="currency"||a=="numeric"?function(e){e=parseFloat(String(e).replace(r,""));return" isnan(e)?0:e}:a="="int"||a=="integer"?function(e){return" e?parsefloat(string(e).replace(r,"")):0}:a="="date"||a=="datetime"?function(e){return" b.jgrid.parsedate(s,e).gettime()}:b.isfunction(a)?a:function(e){e||(e="" );return="" b.trim(string(e).touppercase())};b.each(e,function(e,i){d="b.jgrid.getAccessor(i,t);if(d===undefined)d="";d=u(d,i);l.push({vSort:d,index:e})});l.sort(function(e,t){e=e.vSort;t=t.vSort;return" c._compare(e,t,n)});a="0;for(var" p="e.length;a<p;){i=l[a].index;o.push(e[i]);a++}return" o};this._getgroup="function(e,t,i,r,a){var" s="[],o=null,l=null,n;b.each(c._getOrder(e,t,i,r,a),function(e,i){n=b.jgrid.getAccessor(i,t);if(n===undefined)n="";if(!c._equals(l,n)){l=n;o!=null&&s.push(o);o=c._group(t,n)}o.items.push(i)});o!=null&&s.push(o);return" s};this.ignorecase="function(){k=false;return" c};this.usecase="function(){k=true;return" c};this.trim="function(){l=true;return" c};this.notrim="function(){l=false;return" c};this.combine="function(t){var" i="b.from(e);k||i.ignoreCase();l&&i.trim();t=t(i).showQuery();c._append(t);return" c};this.execute="function(){var" n="a,m=[];if(n===null)return" c;b.each(e,function(){eval(n)&&m.push(this)});e="m;return" c};this.data="function(){return" e};this.select="function(t){c._performSort();if(!c._hasData())return[];c.execute();if(b.isFunction(t)){var" i}return="" e};this.hasmatch="function(){if(!c._hasData())return" false;c.execute();return="" e.length="">0};this.showQuery=function(e){var t=a;if(t===null)t="no query found";if(b.isFunction(e)){e(t);return c}return t};this.andNot=function(e,t,i){G=!G;return c.and(e,t,i)};this.orNot=function(e,t,i){G=!G;return c.or(e,t,i)};this.not=function(e,t,i){return c.andNot(e,t,i)};this.and=function(e,t,i){Q=" && ";if(e===undefined)return c;return c._repeatCommand(e,t,i)};this.or=function(e,t,i){Q=" || ";if(e===undefined)return c;return c._repeatCommand(e,t,i)};this.isNot=function(e){G=!G;return c.is(e)};this.is=function(e){c._append("this."+e);c._resetNegate();return c};this._compareValues=function(e,t,i,a,s){var o;o=M?"this."+t:"this";if(i===undefined)i=null;i=i===null?t:i;switch(s.stype===undefined?"text":s.stype){case"int":case"integer":i=isNaN(Number(i))?"0":i;o="parseInt("+o+",10)";i="parseInt("+i+",10)";break;case"float":case"number":case"numeric":i=String(i).replace(r,"");i=isNaN(Number(i))?"0":i;o="parseFloat("+o+")";i="parseFloat("+i+")";break;case"date":case"datetime":i=String(b.jgrid.parseDate(s.newfmt||"Y-m-d",i).getTime());o='jQuery.jgrid.parseDate("'+s.srcfmt+'",'+o+").getTime()";break;default:o=c._getStr(o);i=c._getStr('"'+c._toStr(i)+'"')}c._append(o+" "+a+" "+i);c._setCommand(e,t);c._resetNegate();return c};this.equals=function(e,t,i){return c._compareValues(c.equals,e,t,"==",i)};this.greater=function(e,t,i){return c._compareValues(c.greater,e,t,">",i)};this.less=function(e,t,i){return c._compareValues(c.less,e,t,"<",i)};this.greaterorequals=function(e,t,i){return c._comparevalues(c.greaterorequals,e,t,"="">=",i)};this.lessOrEquals=function(e,t,i){return c._compareValues(c.lessOrEquals,e,t,"<=",i)};this.startswith=function(e,t){var i="t===undefined||t===null?e:t;i=l?b.trim(i.toString()).length:i.toString().length;if(M)c._append(c._getStr("this."+e)+".substr(0,"+i+")" =="+c._getStr('" '+c._tostr(t)+'"'));else{i="l?b.trim(t.toString()).length:t.toString().length;c._append(c._getStr("this")+".substr(0,"+i+")" '+c._tostr(e)+'"'))}c._setcommand(c.startswith,e);c._resetnegate();return="" c};this.endswith="function(e,t){var" '):c._append(c._getstr("this")+".substr("+c._getstr("this")+'.length-"'+c._tostr(e)+'".length,"'+c._tostr(e)+'".length)="=" "'+c._tostr(e)+'"');c._setcommand(c.endswith,e);c._resetnegate();return="" c};this.contains="function(e,t){M?c._append(c._getStr("this."+e)+'.indexOf("'+c._toStr(t)+'",0)"> -1'):c._append(c._getStr("this")+'.indexOf("'+c._toStr(e)+'",0) > -1');c._setCommand(c.contains,e);c._resetNegate();return c};this.groupBy=function(t,i,r,a){if(!c._hasData())return null;return c._getGroup(e,t,i,r,a)};this.orderBy=function(e,t,i,r){t=t===undefined||t===null?"a":b.trim(t.toString().toLowerCase());if(i===null||i===undefined)i="text";if(r===null||r===undefined)r="Y-m-d";if(t=="desc"||t=="descending")t="d";if(t=="asc"||t=="ascending")t="a";J.push({by:e,dir:t,type:i,datefmt:r});return c};return c}(f,null)},extend:function(e){b.extend(b.fn.jqGrid,e);this.no_legacy_api||b.fn.extend(e)}});b.fn.jqGrid=function(e){if(typeof e=="string"){var t=b.jgrid.getAccessor(b.fn.jqGrid,e);if(!t)throw"jqGrid - No such method: "+e;var i=b.makeArray(arguments).slice(1);return t.apply(this,i)}return this.each(function(){if(!this.grid){var t=b.extend(true,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:true,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],groupDataSorted:false,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},cssType:"",ignoreCase:false},b.jgrid.defaults,e||{}),i={headers:[],cols:[],footers:[],dragStart:function(e,i,r){this.resizing={idx:e,startX:i.clientX,sOL:r[0]};this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+t.id,"#gbox_"+t.id);this.curGbox.css({display:"block",left:r[0],top:r[1],height:r[2]});b.isFunction(t.resizeStart)&&t.resizeStart.call(this,i,e);document.onselectstart=function(){return false}},dragMove:function(e){if(this.resizing){var i=e.clientX-this.resizing.startX;e=this.headers[this.resizing.idx];var r=t.direction==="ltr"?e.width+i:e.width-i,a;if(r>33){this.curGbox.css({left:this.resizing.sOL+i});if(t.forceFit===true){a=this.headers[this.resizing.idx+t.nv];i=t.direction==="ltr"?a.width-i:a.width+i;if(i>33){e.newWidth=r;a.newWidth=i}}else{this.newWidth=t.direction==="ltr"?t.tblwidth+i:t.tblwidth-i;e.newWidth=r}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var e=this.resizing.idx,i=this.headers[e].newWidth||this.headers[e].width;i=parseInt(i,10);this.resizing=false;b("#rs_m"+t.id).css("display","none");t.colModel[e].width=i;this.headers[e].width=i;this.headers[e].el.style.width=i+"px";this.cols[e].style.width=i+"px";if(this.footers.length>0)this.footers[e].style.width=i+"px";if(t.forceFit===true){i=this.headers[e+t.nv].newWidth||this.headers[e+t.nv].width;this.headers[e+t.nv].width=i;this.headers[e+t.nv].el.style.width=i+"px";this.cols[e+t.nv].style.width=i+"px";if(this.footers.length>0)this.footers[e+t.nv].style.width=i+"px";t.colModel[e+t.nv].width=i}else{t.tblwidth=this.newWidth||t.tblwidth;b("table:first",this.bDiv).css("width",t.tblwidth+"px");b("table:first",this.hDiv).css("width",t.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(t.footerrow){b("table:first",this.sDiv).css("width",t.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}b.isFunction(t.resizeStop)&&t.resizeStop.call(this,i,e)}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){i.timer&&clearTimeout(i.timer);i.timer=null;var e=b(i.bDiv).height();if(e){var r=b("table:first",i.bDiv),a=b("> tbody > tr:gt(0):visible:first",r).outerHeight()||i.prevRowHeight;if(a){i.prevRowHeight=a;var s=t.rowNum,o=i.scrollTop=i.bDiv.scrollTop,l=Math.round(r.position().top)-o,n=l+r.height();a=a*s;var d,u,c;if(n<e&&l<=0&&(t.lastpage===undefined||parseint((n+o+a-1) a,10)<="t.lastpage)){u=parseInt((e-n+a-1)/a,10);if(n">=0||u<2||t.scroll===true){d=math.round((n+o) a)+1;l="-1}else" l="1}if(l">0){d=parseInt(o/a,10)+1;u=parseInt((o+e)/a,10)+2-d;c=true}if(u)if(!(t.lastpage&&d>t.lastpage||t.lastpage==1))if(i.hDiv.loading)i.timer=setTimeout(i.populateVisible,t.scrollTimeout);else{t.page=d;if(c){i.selectionPreserver(r[0]);i.emptyRows(i.bDiv,false)}i.populate(u)}}}},scrollGrid:function(){if(t.scroll){var e=i.bDiv.scrollTop;if(i.scrollTop===undefined)i.scrollTop=0;if(e!=i.scrollTop){i.scrollTop=e;i.timer&&clearTimeout(i.timer);i.timer=setTimeout(i.populateVisible,t.scrollTimeout)}}i.hDiv.scrollLeft=i.bDiv.scrollLeft;if(t.footerrow)i.sDiv.scrollLeft=i.bDiv.scrollLeft},selectionPreserver:function(e){var t=e.p,i=t.selrow,r=t.selarrrow?b.makeArray(t.selarrrow):null,a=e.grid.bDiv.scrollLeft,s=t.gridComplete;t.gridComplete=function(){t.selrow=null;t.selarrrow=[];if(t.multiselect&&r&&r.length>0)for(var o=0;o<r.length;o++)r[o]!=i&&b(e).jqgrid("setselection",r[o],false);i&&b(e).jqgrid("setselection",i,false);e.grid.bdiv.scrollleft=a;t.gridcomplete=s;t.gridcomplete&&s()}}};if(this.tagname!="table")alert("element is="" not="" a="" table");else{b(this).empty();this.p="t;var" r,a,s;if(this.p.colnames.length="==0)for(r=0;r<this.p.colModel.length;r++)this.p.colNames[r]=this.p.colModel[r].label||this.p.colModel[r].name;if(this.p.colNames.length!==this.p.colModel.length)alert(b.jgrid.errors.model);else{var" o="b("<div" class="ui-jqgrid-view">"),l,n=b.browser.msie?true:false,d=b.browser.safari?true:false;s=this;if(this.p.shrinkToFit==true){$(window).resize(function(){$("#list").setGridWidth(document.body.clientWidth)})}s.p.direction=b.trim(s.p.direction.toLowerCase());if(b.inArray(s.p.direction,["ltr","rtl"])==-1)s.p.direction="ltr";a=s.p.direction;b(o).insertBefore(this);b(this).appendTo(o).removeClass("scroll");var u=b("<div class="ui-jqgrid ui-widget ui-widget-content ui-corner-all"></div>");b(u).insertBefore(o).attr({id:"gbox_"+this.id,dir:a});b(o).appendTo(u).attr("id","gview_"+this.id);l=n&&b.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;">':"";b("<div class="ui-widget-overlay jqgrid-overlay" id="lui_"+this.id+""></div>").append(l).insertBefore(o);b("<div style="width:100px;height:30px" class="loading ui-state-default ui-state-active" id="load_"+this.id+""><span class="\"red\""><font size="3">"+this.p.loadtext+"</font></span></div>").insertBefore(o);b(this).attr({cellSpacing:"0",cellPadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var c=function(e,t){e=parseInt(e,10);return isNaN(e)?t?t:0:e},p=function(e,t,r){var a=s.p.colModel[e],o=a.align,l='style="',n=a.classes,d=a.name;if(o)l+="text-align:"+o+";";if(a.hidden===true)l+="display:none;";if(t===0)l+="width: "+i.headers[e].width+"px;";l+='"'+(n!==undefined?' class="'+n+'"':"")+(a.title&&r?' title="'+b.jgrid.stripHtml(r)+'"':"");l+=' aria-describedby="'+s.p.id+"_"+d+'"';return l},f=function(e){return e===undefined||e===null||e===""?"&#160;":s.p.autoencode?b.jgrid.htmlEncode(e):e+""},h=function(e,t,i,r,a){i=s.p.colModel[i];if(typeof i.formatter!=="undefined"){e={rowId:e,colModel:i,gid:s.p.id};t=b.isFunction(i.formatter)?i.formatter.call(s,t,e,r,a):b.fmatter?b.fn.fmatter(i.formatter,t,e,r,a):f(t)}else t=f(t);return t},g=function(e,t,i,r,a){e=h(e,t,i,a,"add");return'<td role="gridcell" '+p(i,r,e)+"="">"+e+"</td>"},m=function(e,t,i){e='<input role="checkbox" type="checkbox" id="jqg_'+s.p.id+" _"+e+'"="" class="cbox" name="jqg_'+s.p.id+">';t=p(t,i,"");return'<td role="gridcell" aria-describedby="'+s.p.id+'_cb" '+t+"="">"+e+"</td>"},v=function(e,t,i,r){i=(parseInt(i,10)-1)*parseInt(r,10)+1+t;e=p(e,t,"");return'<td role="gridcell" aria-describedby="'+s.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+e+"="">"+i+"</td>"},w=function(e){var t,i=[],r=0,a;for(a=0;a<s.p.colmodel.length;a++){t=s.p.colmodel[a];if(t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"){i[r]=e=="local"?t.name:e=="xml"?t.xmlmap||t.name:t.jsonmap||t.name;r++}}return i},y="function(e){var" t="s.p.remapColumns;if(!t||!t.length)t=b.map(s.p.colModel,function(e,t){return" t});if(e)t="b.map(t,function(t){return" t<e?null:t-e});return="" t},j="function(e,t){if(s.p.deepempty)b("#"+s.p.id+"" tbody:first="" tr:gt(0)").remove();else{var="" i="b("#"+s.p.id+"" tr:first")[0];b("#"+s.p.id+"="" tbody:first").empty().append(i)}if(t&&s.p.scroll){b("="">div:first",e).css({height:"auto"}).children("div:first").css({height:0,display:"none"});e.scrollTop=0}},x=function(){var e=s.p.data.length,t,i,r;t=s.p.rownumbers===true?1:0;i=s.p.multiselect===true?1:0;r=s.p.subGrid===true?1:0;t=s.p.keyIndex===false||s.p.loadonce===true?s.p.localReader.id:s.p.colModel[s.p.keyIndex+i+r+t].name;for(i=0;i<e;i++){r=b.jgrid.getaccessor(s.p.data[i],t);s.p._index[r]=i}},c=function(e,t,i,r,a){var o="new" date,l="s.p.datatype!="local"&&s.p.loadonce||s.p.datatype=="xmlstring",n,d=s.p.datatype=="local"?"local":"xml";if(l){s.p.data=[];s.p._index={};s.p.localReader.id=n="_id_"}s.p.reccount=0;if(b.isXMLDoc(e)){if(s.p.treeANode===-1&&!s.p.scroll){j(t,false);i=1}else" i="i">1?i:1;var u,c=0,p,f,h=0,C=0,_=0,D,q=[],k,G={},F,M,S=[],R=s.p.altRows===true?" "+s.p.altclass:"";s.p.xmlReader.repeatitems||(q=w(d));D=s.p.keyIndex===false?s.p.xmlReader.id:s.p.keyIndex;if(q.length>0&&!isNaN(D)){if(s.p.remapColumns&&s.p.remapColumns.length)D=b.inArray(D,s.p.remapColumns);D=q[D]}d=(D+"").indexOf("[")===-1?q.length?function(e,t){return b(D,e).text()||t}:function(e,t){return b(s.p.xmlReader.cell,e).eq(D).text()||t}:function(e,t){return e.getAttribute(D.replace(/[\[\]]/g,""))||t};s.p.userData={};b(s.p.xmlReader.page,e).each(function(){s.p.page=this.textContent||this.text||0});b(s.p.xmlReader.total,e).each(function(){s.p.lastpage=this.textContent||this.text;if(s.p.lastpage===undefined)s.p.lastpage=1});b(s.p.xmlReader.records,e).each(function(){s.p.records=this.textContent||this.text||0});b(s.p.xmlReader.userdata,e).each(function(){s.p.userData[this.getAttribute("name")]=this.textContent||this.text});e=b(s.p.xmlReader.root+" "+s.p.xmlReader.row,e);var I=e.length,T=0;if(e&&I){var Q=parseInt(s.p.rowNum,10),N=s.p.scroll?(parseInt(s.p.page,10)-1)*Q+1:1;if(a)Q*=a+1;a=b.isFunction(s.p.afterInsertRow);var E={},O="";if(s.p.grouping&&s.p.groupingView.groupCollapse===true)O=' style="display:none;"';for(;T<i;){f=e[t];m=d(f,n+t);u=i===0?0:i+1;u=(u+t)%2==1?r:"";s.push("<tr"+o+' id="'+M+'" role="row" class="ui-widget-content jqgrow ui-row-'+s.p.direction+" "+u+'"="">');if(s.p.rownumbers===true){S.push(v(0,T,s.p.page,s.p.rowNum));_=1}if(s.p.multiselect===true){S.push(m(M,_,T));h=1}if(s.p.subGrid===true){S.push(b(s).jqGrid("addSubGridCell",h+_,T+i));C=1}if(s.p.xmlReader.repeatitems){k||(k=y(h+C+_));var A=b(s.p.xmlReader.cell,F);b.each(k,function(e){var t=A[this];if(!t)return false;p=t.textContent||t.text;G[s.p.colModel[e+h+C+_].name]=p;S.push(g(M,p,e+h+C+_,T+i,F))})}else for(u=0;u<q.length;u++){p=b(q[u],f).text();g[s.p.colmodel[u+h+c+_].name]=p;s.push(g(m,p,u+h+c+_,t+i,f))}s.push("< tr="">");if(s.p.grouping){u=s.p.groupingView.groupField.length;f=[];for(var P=0;P<u;p++)f.push(g[s.p.groupingview.groupfield[p]]);e=b(s).jqgrid("groupingprepare",s,f,e,g);s=[]}if(l){g[n]=m;s.p.data.push(g)}if(s.p.gridview===false){if(s.p.treegrid===true){u=s.p.treeanode>=-1?s.p.treeANode:0;f=b(S.join(""))[0];b(s.rows[T+u+i]).after(f);try{b(s).jqGrid("setTreeNode",G,f)}catch(e){}}else b("tbody:first",t).append(S.join(""));if(s.p.subGrid===true)try{b(s).jqGrid("addSubGrid",s.rows[s.rows.length-1],h+_)}catch(e){}a&&s.p.afterInsertRow.call(s,M,G,F);S=[]}G={};c++;T++;if(c==Q)break}}if(s.p.gridview===true)if(s.p.grouping&&k){b(s).jqGrid("groupingRender",E,s.p.colModel.length);E=null}else b("tbody:first",t).append(S.join(""));s.p.totaltime=new Date-o;if(c>0)if(s.p.records===0)s.p.records=I;S=null;if(!s.p.treeGrid&&!s.p.scroll)s.grid.bDiv.scrollTop=0;s.p.reccount=c;s.p.treeANode=-1;s.p.userDataOnFooter&&b(s).jqGrid("footerData","set",s.p.userData,true);if(l){s.p.records=I;s.p.lastpage=Math.ceil(I/Q)}r||s.updatepager(false,true);if(l){for(;c<i;){f=e[c];m=d(f,c);if(s.p.xmlreader.repeatitems){k||(k=y(h+c+_));var z="b(s.p.xmlReader.cell,F);b.each(k,function(e){var" t="z[this];if(!t)return" false;p="t.textContent||t.text;G[s.p.colModel[e+h+C+_].name]=p})}else" for(u="0;u<q.length;u++){p=b(q[u],F).text();G[s.p.colModel[u+h+C+_].name]=p}G[n]=M;s.p.data.push(G);G={};c++}x()}}},_=function(e,t,i,r,a){var" o="new" date;if(e){if(s.p.treeanode="==-1&&!s.p.scroll){j(t,false);i=1}else" i="i">1?i:1;var l,n,d=s.p.datatype!="local"&&s.p.loadonce||s.p.datatype=="jsonstring";if(d){s.p.data=[];s.p._index={};l=s.p.localReader.id="_id_"}s.p.reccount=0;if(s.p.datatype=="local"){t=s.p.localReader;n="local"}else{t=s.p.jsonReader;n="json"}var u=0,c,p,f,h=[],C,_=0,D=0,q=0,k,G,F={},M;f=[];var S=s.p.altRows===true?" "+s.p.altclass:"";s.p.page=b.jgrid.getAccessor(e,t.page)||0;k=b.jgrid.getAccessor(e,t.total);s.p.lastpage=k===undefined?1:k;s.p.records=b.jgrid.getAccessor(e,t.records)||0;s.p.userData=b.jgrid.getAccessor(e,t.userdata)||{};t.repeatitems||(C=h=w(n));n=s.p.keyIndex===false?t.id:s.p.keyIndex;if(h.length>0&&!isNaN(n)){if(s.p.remapColumns&&s.p.remapColumns.length)n=b.inArray(n,s.p.remapColumns);n=h[n]}if(G=b.jgrid.getAccessor(e,t.root)){k=G.length;e=0;var R=parseInt(s.p.rowNum,10),I=s.p.scroll?(parseInt(s.p.page,10)-1)*R+1:1;if(a)R*=a+1;var T=b.isFunction(s.p.afterInsertRow),Q={},N="";if(s.p.grouping&&s.p.groupingView.groupCollapse===true)N=' style="display:none;"';for(;e<k;){a=g[e];m=b.jgrid.getaccessor(a,n);if(m===undefined){m=i+e;if(h.length===0)if(t.cell)m=a[t.cell][n]||m}c=i===1?0:i;c=(c+e)%2==1?s:"";f.push("<tr"+n+' id="'+M+'" role="row" class="ui-widget-content jqgrow ui-row-'+s.p.direction+" "+c+'"="">');if(s.p.rownumbers===true){f.push(v(0,e,s.p.page,s.p.rowNum));q=1}if(s.p.multiselect){f.push(m(M,q,e));_=1}if(s.p.subGrid){f.push(b(s).jqGrid("addSubGridCell",_+q,e+i));D=1}if(t.repeatitems){if(t.cell)a=b.jgrid.getAccessor(a,t.cell);C||(C=y(_+D+q))}for(p=0;p<c.length;p++){c=b.jgrid.getaccessor(a,c[p]);f.push(g(m,c,p+_+d+q,e+i,a));f[s.p.colmodel[p+_+d+q].name]=c}f.push("< tr="">");if(s.p.grouping){c=s.p.groupingView.groupField.length;p=[];for(var E=0;E<c;e++)p.push(f[s.p.groupingview.groupfield[e]]);q=b(s).jqgrid("groupingprepare",f,p,q,f);f=[]}if(d){f[l]=m;s.p.data.push(f)}if(s.p.gridview===false){if(s.p.treegrid===true){c=s.p.treeanode>=-1?s.p.treeANode:0;f=b(f.join(""))[0];b(s.rows[e+c+i]).after(f);try{b(s).jqGrid("setTreeNode",F,f)}catch(e){}}else b("#"+s.p.id+" tbody:first").append(f.join(""));if(s.p.subGrid===true)try{b(s).jqGrid("addSubGrid",s.rows[s.rows.length-1],_+q)}catch(e){}T&&s.p.afterInsertRow.call(s,M,F,a);f=[]}F={};u++;e++;if(u==R)break}if(s.p.gridview===true)s.p.grouping&&C?b(s).jqGrid("groupingRender",Q,s.p.colModel.length):b("#"+s.p.id+" tbody:first").append(f.join(""));s.p.totaltime=new Date-o;if(u>0)if(s.p.records===0)s.p.records=k;if(!s.p.treeGrid&&!s.p.scroll)s.grid.bDiv.scrollTop=0;s.p.reccount=u;s.p.treeANode=-1;s.p.userDataOnFooter&&b(s).jqGrid("footerData","set",s.p.userData,true);if(d){s.p.records=k;s.p.lastpage=Math.ceil(k/R)}r||s.updatepager(false,true);if(d){for(;u<k;){a=g[u];m=b.jgrid.getaccessor(a,n);if(m===undefined){m=i+u;if(h.length===0)if(t.cell)m=a[t.cell][n]||m}if(a){if(t.repeatitems){if(t.cell)a=b.jgrid.getaccessor(a,t.cell);c||(c=y(_+d+q))}for(p=0;p<c.length;p++){c=b.jgrid.getaccessor(a,c[p]);f[s.p.colmodel[p+_+d+q].name]=c}f[l]=m;s.p.data.push(f);f={}}u++}x()}}}},d=function(){var e,t="false,i=[],r=[],a,o,l;if(b.isArray(s.p.data)){var" n="s.p.grouping?s.p.groupingView:false;b.each(s.p.colModel,function(){o=this.sorttype||"text";if(o=="date"||o=="datetime"){if(this.formatter&&typeof" this.formatter="=="string"&&this.formatter=="date"){a=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat;l=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat}else" a="l=this.datefmt||"Y-m-d";i[this.name]={stype:o,srcfmt:a,newfmt:l}}else" i[this.name]="{stype:o,srcfmt:"",newfmt:""};if(s.p.grouping&&this.name==n.groupField[0])r[0]=i[this.name];if(!t&&(this.index==s.p.sortname||this.name==s.p.sortname)){e=this.name;t=true}});if(s.p.treeGrid)b(s).jqGrid("SortTree",e,s.p.sortorder,i[e].stype,i[e].srcfmt);else{var" d="{eq:function(e){return" e.equals},ne:function(e){return="" e.not().equals},lt:function(e){return="" e.less},le:function(e){return="" e.lessorequals},gt:function(e){return="" e.greater},ge:function(e){return="" e.greaterorequals},cn:function(e){return="" e.contains},nc:function(e){return="" e.not().contains},bw:function(e){return="" e.startswith},bn:function(e){return="" e.not().startswith},en:function(e){return="" e.not().endswith},ew:function(e){return="" e.endswith},ni:function(e){return="" e.not().equals},in:function(e){return="" e.equals}},u="b.jgrid.from(s.p.data);if(s.p.ignoreCase)u=u.ignoreCase();if(s.p.search===true){var" c="s.p.postData.filters,p;if(c){if(typeof" f="0,h=c.rules.length,g;f<h;f++){g=c.rules[f];p=c.groupOp;if(d[g.op]&&g.field&&g.data&&p)u=p.toUpperCase()=="OR"?d[g.op](u)(g.field,g.data,i[g.field]).or():d[g.op](u)(g.field,g.data,i[g.field])}}else" try{u="d[s.p.postData.searchOper](u)(s.p.postData.searchField,s.p.postData.searchString,i[s.p.postData.searchField])}catch(e){}}if(s.p.grouping){u.orderBy(n.groupField[0],n.groupOrder[0],r[0].stype,r[0].srcfmt);n.groupDataSorted=true}if(e&&s.p.sortorder&&t)s.p.sortorder.toUpperCase()=="DESC"?u.orderBy(s.p.sortname,"d",i[e].stype,i[e].srcfmt):u.orderBy(s.p.sortname,"a",i[e].stype,i[e].srcfmt);d=u.select();u=parseInt(s.p.rowNum,10);c=d.length;p=parseInt(s.p.page,10);f=Math.ceil(c/u);h={};d=d.slice((p-1)*u,p*u);i=u=null;h[s.p.localReader.total]=f;h[s.p.localReader.page]=p;h[s.p.localReader.records]=c;h[s.p.localReader.root]=d;d=null;return" h}}},q="function(){s.grid.hDiv.loading=true;if(!s.p.hiddengrid)switch(s.p.loadui){case"disable":break;case"enable":b("#load_"+s.p.id).show();break;case"block":b("#lui_"+s.p.id).show();b("#load_"+s.p.id).show();break}},k=function(){s.grid.hDiv.loading=false;switch(s.p.loadui){case"disable":break;case"enable":b("#load_"+s.p.id).hide();break;case"block":b("#lui_"+s.p.id).hide();b("#load_"+s.p.id).hide();break}},G=function(e){if(!s.grid.hDiv.loading){var" t="s.p.scroll&&e===false,i={},r,a=s.p.prmNames;if(s.p.page<=0)s.p.page=1;if(a.search!==null)i[a.search]=s.p.search;if(a.nd!==null)i[a.nd]=(new" date).gettime();if(a.rows!="=null)i[a.rows]=s.p.rowNum;if(a.page!==null)i[a.page]=s.p.page;if(a.sort!==null)i[a.sort]=s.p.sortname;if(a.order!==null)i[a.order]=s.p.sortorder;if(s.p.rowTotal!==null&&a.totalrows!==null)i[a.totalrows]=s.p.rowTotal;var" o="s.p.loadComplete,l=b.isFunction(o);l||(o=null);var">1)if(a.npage!==null){i[a.npage]=e;n=e-1;e=1}else o=function(t){s.p.page++;s.grid.hDiv.loading=false;l&&s.p.loadComplete.call(s,t);G(e-1)};else a.npage!==null&&delete s.p.postData[a.npage];if(s.p.grouping){b(s).jqGrid("groupingSetup");if(s.p.groupingView.groupDataSorted===true)i[a.sort]=s.p.groupingView.groupField[0]+" "+s.p.groupingView.groupOrder[0]+", "+i[a.sort]}b.extend(s.p.postData,i);var d=!s.p.scroll?1:s.rows.length-1;if(b.isFunction(s.p.datatype))s.p.datatype.call(s,s.p.postData,"load_"+s.p.id);else{b.isFunction(s.p.beforeRequest)&&s.p.beforeRequest.call(s);r=s.p.datatype.toLowerCase();switch(r){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:s.p.url,type:s.p.mtype,dataType:r,data:b.isFunction(s.p.serializeGridData)?s.p.serializeGridData.call(s,s.p.postData):s.p.postData,success:function(i){r==="xml"?C(i,s.grid.bDiv,d,e>1,n):_(i,s.grid.bDiv,d,e>1,n);o&&o.call(s,i);t&&s.grid.populateVisible();if(s.p.loadonce||s.p.treeGrid)s.p.datatype="local";k()},error:function(e,t,i){b.isFunction(s.p.loadError)&&s.p.loadError.call(s,e,t,i);k()},beforeSend:function(e){q();b.isFunction(s.p.loadBeforeSend)&&s.p.loadBeforeSend.call(s,e)}},b.jgrid.ajaxOptions,s.p.ajaxGridOptions));break;case"xmlstring":q();i=b.jgrid.stringToDoc(s.p.datastr);C(i,s.grid.bDiv);l&&s.p.loadComplete.call(s,i);s.p.datatype="local";s.p.datastr=null;k();break;case"jsonstring":q();i=typeof s.p.datastr=="string"?b.jgrid.parse(s.p.datastr):s.p.datastr;_(i,s.grid.bDiv);l&&s.p.loadComplete.call(s,i);s.p.datatype="local";s.p.datastr=null;k();break;case"local":case"clientside":q();s.p.datatype="local";i=D();_(i,s.grid.bDiv,d,e>1,n);o&&o.call(s,i);t&&s.grid.populateVisible();k();break}}}};l=function(e,t){var i="",r="<table cellspacing="0" cellpadding="0" border="0" style="table-layout:auto;" class="ui-pg-table"><tbody><tr>",o="",l,n,d,u,p=function(e){var t;if(b.isFunction(s.p.onPaging))t=s.p.onPaging.call(s,e);s.p.selrow=null;if(s.p.multiselect){s.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",false)}s.p.savedRow=[];if(t=="stop")return false;return true};e=e.substr(1);l="pg_"+e;n=e+"_left";d=e+"_center";u=e+"_right";b("#"+e).append("<div id=""+l+"" class="ui-pager-control" role="group"><table cellspacing="0" cellpadding="0" border="0" class="ui-pg-table" style="width:100%;table-layout:fixed;" role="row"><tbody><tr><td id=""+n+"" align="left"></td><td id=""+d+"" align="center" style="white-space:pre;"></td><td id=""+u+"" align="right"></td></tr></tbody></table></div>").attr("dir","ltr");if(s.p.rowList.length>0){o="<td dir=""+a+"">";o+="<select class="ui-pg-selbox" role="listbox">";for(n=0;n<s.p.rowlist.length;n++)o+='<option role="option" value="'+s.p.rowList[n]+'" '+(s.p.rownum="=s.p.rowList[n]?'" selected="selected" ':"")+"="">"+s.p.rowList[n]+"";o+="</s.p.rowlist.length;n++)o+='<option></select></td>"}if(a=="rtl")r+=o;if(s.p.pginput===true)i="<td dir=""+a+"">"+b.jgrid.format(s.p.pgtext||"","<input class="ui-pg-input" type="text" size="2" maxlength="7" value="0" role="textbox">","<span id="sp_1"></span>")+"</td>";if(s.p.pgbuttons===true){n=["first"+t,"prev"+t,"next"+t,"last"+t];a=="rtl"&&n.reverse();r+="<td id=""+n[0]+"" class="ui-pg-button ui-corner-all"><span class="ui-icon ui-icon-seek-first"></span></td>";r+="<td id=""+n[1]+"" class="ui-pg-button ui-corner-all"><span class="ui-icon ui-icon-seek-prev"></span></td>"
;r+=i!==""?"<td class="ui-pg-button ui-state-disabled" style="width:4px;"><span class="ui-separator"></span></td>"+i+"<td class="ui-pg-button ui-state-disabled" style="width:4px;"><span class="ui-separator"></span></td>":"";r+="<td id=""+n[2]+"" class="ui-pg-button ui-corner-all"><span class="ui-icon ui-icon-seek-next"></span></td>";r+="<td id=""+n[3]+"" class="ui-pg-button ui-corner-all"><span class="ui-icon ui-icon-seek-end"></span></td>"}else if(i!=="")r+=i;if(a=="ltr")r+=o;r+="</tr></tbody></table>";s.p.viewrecords===true&&b("td#"+e+"_"+s.p.recordpos,"#"+l).append("<div dir=""+a+"" style="text-align:"+s.p.recordpos+"" class="ui-paging-info"></div>");b("td#"+e+"_"+s.p.pagerpos,"#"+l).append(r);o=b(".ui-jqgrid").css("font-size")||"11px";b(document.body).append("<div id="testpg" class="ui-jqgrid ui-widget ui-widget-content" style="font-size:"+o+";visibility:hidden;"></div>");r=b(r).clone().appendTo("#testpg").width();b("#testpg").remove();if(r>0){if(i!="")r+=50;b("td#"+e+"_"+s.p.pagerpos,"#"+l).width(r)}s.p._nvtd=[];s.p._nvtd[0]=r?Math.floor((s.p.width-r)/2):Math.floor(s.p.width/3);s.p._nvtd[1]=0;r=null;b(".ui-pg-selbox","#"+l).bind("change",function(){s.p.page=Math.round(s.p.rowNum*(s.p.page-1)/this.value-.5)+1;s.p.rowNum=this.value;if(t)b(".ui-pg-selbox",s.p.pager).val(this.value);else s.p.toppager&&b(".ui-pg-selbox",s.p.toppager).val(this.value);if(!p("records"))return false;G();return false});if(s.p.pgbuttons===true){b(".ui-pg-button","#"+l).hover(function(){if(b(this).hasClass("ui-state-disabled"))this.style.cursor="default";else{b(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!b(this).hasClass("ui-state-disabled")){b(this).removeClass("ui-state-hover");this.style.cursor="default"}});b("#first"+t+", #prev"+t+", #next"+t+", #last"+t,"#"+e).click(function(){var e=c(s.p.page,1),i=c(s.p.lastpage,1),r=false,a=true,o=true,l=true,n=true;if(i===0||i===1)n=l=o=a=false;else if(i>1&&e>=1)if(e===1)o=a=false;else{if(!(e>1&&e<i))if(e===i)n=l=false}else if(i="">1&&e===0){n=l=false;e=i-1}if(this.id==="first"+t&&a){s.p.page=1;r=true}if(this.id==="prev"+t&&o){s.p.page=e-1;r=true}if(this.id==="next"+t&&l){s.p.page=e+1;r=true}if(this.id==="last"+t&&n){s.p.page=i;r=true}if(r){if(!p(this.id))return false;G()}return false})}s.p.pginput===true&&b("input.ui-pg-input","#"+l).keypress(function(e){if((e.charCode?e.charCode:e.keyCode?e.keyCode:0)==13){s.p.page=b(this).val()>0?b(this).val():s.p.page;if(!p("user"))return false;G();return false}return this})};var F=function(e,t,i,r){if(s.p.colModel[t].sortable)if(!(s.p.savedRow.length>0)){if(!i){if(s.p.lastsort==t)if(s.p.sortorder=="asc")s.p.sortorder="desc";else{if(s.p.sortorder=="desc")s.p.sortorder="asc"}else s.p.sortorder=s.p.colModel[t].firstsortorder||"asc";s.p.page=1}if(r)if(s.p.lastsort==t&&s.p.sortorder==r&&!i)return;else s.p.sortorder=r;i=b("thead:first",s.grid.hDiv).get(0);b("tr th:eq("+s.p.lastsort+") span.ui-grid-ico-sort",i).addClass("ui-state-disabled");b("tr th:eq("+s.p.lastsort+")",i).attr("aria-selected","false");b("tr th:eq("+t+") span.ui-icon-"+s.p.sortorder,i).removeClass("ui-state-disabled");b("tr th:eq("+t+")",i).attr("aria-selected","true");if(!s.p.viewsortcols[0])if(s.p.lastsort!=t){b("tr th:eq("+s.p.lastsort+") span.s-ico",i).hide();b("tr th:eq("+t+") span.s-ico",i).show()}e=e.substring(5);s.p.sortname=s.p.colModel[t].index||e;i=s.p.sortorder;if(b.isFunction(s.p.onSortCol))if(s.p.onSortCol.call(s,e,t,i)=="stop"){s.p.lastsort=t;return}if(s.p.datatype=="local")s.p.deselectAfterSort&&b(s).jqGrid("resetSelection");else{s.p.selrow=null;s.p.multiselect&&b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",false);s.p.selarrrow=[];s.p.savedRow=[]}if(s.p.scroll){i=s.grid.bDiv.scrollLeft;j(s.grid.bDiv,true);s.grid.hDiv.scrollLeft=i}s.p.subGrid&&s.p.datatype=="local"&&b("td.sgexpanded","#"+s.p.id).each(function(){b(this).trigger("click")});G();s.p.lastsort=t;if(s.p.sortname!=e&&t)s.p.lastsort=t}},M=function(e){var t=e,i;for(i=e+1;i<s.p.colmodel.length;i++)if(s.p.colmodel[i].hidden!==true){t=i;break}return t-e},s="function(e){var" t,i="{},r=d?0:s.p.cellLayout;for(t=i[0]=i[1]=i[2]=0;t<=e;t++)if(s.p.colModel[t].hidden===false)i[0]+=s.p.colModel[t].width+r;if(s.p.direction=="rtl")i[0]=s.p.width-i[0];i[0]-=s.grid.bDiv.scrollLeft;if(b(s.grid.cDiv).is(":visible"))i[1]+=b(s.grid.cDiv).height()+parseInt(b(s.grid.cDiv).css("padding-top"),10)+parseInt(b(s.grid.cDiv).css("padding-bottom"),10);if(s.p.toolbar[0]===true&&(s.p.toolbar[1]=="top"||s.p.toolbar[1]=="both"))i[1]+=b(s.grid.uDiv).height()+parseInt(b(s.grid.uDiv).css("border-top-width"),10)+parseInt(b(s.grid.uDiv).css("border-bottom-width"),10);if(s.p.toppager)i[1]+=b(s.grid.topDiv).height()+parseInt(b(s.grid.topDiv).css("border-bottom-width"),10);i[2]+=b(s.grid.bDiv).height()+b(s.grid.hDiv).height();return" i};this.p.id="this.id;if(b.inArray(s.p.multikey,["shiftKey","altKey","ctrlKey"])==-1)s.p.multikey=false;s.p.keyIndex=false;for(r=0;r<s.p.colModel.length;r++)if(s.p.colModel[r].key===true){s.p.keyIndex=r;break}s.p.sortorder=s.p.sortorder.toLowerCase();if(s.p.grouping===true){s.p.scroll=false;s.p.rownumbers=false;s.p.subGrid=false;s.p.treeGrid=false;s.p.gridview=true}if(this.p.treeGrid===true){try{b(this).jqGrid("setTreeGrid")}catch(e){}if(s.p.datatype!="local")s.p.localReader={id:"_id_"}}if(this.p.subGrid)try{b(s).jqGrid("setSubGrid")}catch(e){}if(this.p.multiselect){this.p.colNames.unshift("<input" role="checkbox" id="cb_"+this.p.id+"" class="cbox" type="checkbox">");this.p.colModel.unshift({name:"cb",width:d?s.p.multiselectWidth+s.p.cellLayout:s.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:s.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}s.p.xmlReader=b.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},s.p.xmlReader);s.p.jsonReader=b.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},s.p.jsonReader);s.p.localReader=b.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},s.p.localReader);if(s.p.scroll){s.p.pgbuttons=false;s.p.pginput=false;s.p.rowList=[]}s.p.data.length&&x();var R="<thead><tr class="ui-jqgrid-labels" role="rowheader">",I,T,Q,N,E,O,A,P;T=P="";if(s.p.shrinkToFit===true&&s.p.forceFit===true)for(r=s.p.colModel.length-1;r>=0;r--)if(!s.p.colModel[r].hidden){s.p.colModel[r].resizable=false;break}if(s.p.viewsortcols[1]=="horizontal"){P=" ui-i-asc";T=" ui-i-desc"}I=n?"class='ui-th-div-ie'":"";P="<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc"+P+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+a+""></span>";P+="<span sort="desc" class="ui-grid-ico-sort ui-icon-desc"+T+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+a+""></span></span>";for(r=0;r<this.p.colnames.length;r++){t=s.p.headertitles?' title="'+b.jgrid.stripHtml(s.p.colNames[r])+'" ':"";var="" z="ui-state-default" ;if(this.p.csstype!="" ){z="ui-state-default-2" }r+="<th id='" +s.p.id+"_"+s.p.colmodel[r].name+"'="" role="columnheader" class=""+z+" ui-th-column ui-th-"+a+"" "+t+"="">";T=s.p.colModel[r].index||s.p.colModel[r].name;R+="<div id="jqgh_"+s.p.colModel[r].name+"" "+i+"="">"+s.p.colNames[r];s.p.colModel[r].width=s.p.colModel[r].width?parseInt(s.p.colModel[r].width,10):150;if(typeof s.p.colModel[r].title!=="boolean")s.p.colModel[r].title=true;if(T==s.p.sortname)s.p.lastsort=r;R+=P+"</div>"}R+="</this.p.colnames.length;r++){t=s.p.headertitles?'></tr></thead>";P=null;b(this).append(R);b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});if(this.p.multiselect){var L=[],V;b("#cb_"+b.jgrid.jqID(s.p.id),this).bind("click",function(){if(this.checked){b("[id^=jqg_"+s.p.id+"_]").attr("checked",true);b(s.rows).each(function(e){if(e>0)if(!b(this).hasClass("subgrid")&&!b(this).hasClass("jqgroup")){b(this).addClass("ui-state-highlight").attr("aria-selected","true");s.p.selarrrow[e]=s.p.selrow=this.id}});V=true;L=[]}else{b("[id^=jqg_"+s.p.id+"_]").attr("checked",false);b(s.rows).each(function(e){if(!b(this).hasClass("subgrid")){b(this).removeClass("ui-state-highlight").attr("aria-selected","false");L[e]=this.id}});s.p.selarrrow=[];s.p.selrow=null;V=false}if(b.isFunction(s.p.onSelectAll))s.p.onSelectAll.call(s,V?s.p.selarrrow:L,V)})}if(s.p.autowidth===true){R=b(u).innerWidth();s.p.width=R>0?R:"nw"}(function(){var e=0,t=s.p.cellLayout,r=0,a,o=s.p.scrollOffset,l,n=false,u,p=0,f=0,h=0,g;if(d)t=0;b.each(s.p.colModel,function(){if(typeof this.hidden==="undefined")this.hidden=false;if(this.hidden===false){e+=c(this.width,0);if(this.fixed){p+=this.width;f+=this.width+t}else r++;h++}});if(isNaN(s.p.width))s.p.width=i.width=e;else i.width=s.p.width;s.p.tblwidth=e;if(s.p.shrinkToFit===false&&s.p.forceFit===true)s.p.forceFit=false;if(s.p.shrinkToFit===true&&r>0){u=i.width-t*r-f;if(!isNaN(s.p.height)){u-=o;n=true}e=0;b.each(s.p.colModel,function(t){if(this.hidden===false&&!this.fixed){this.width=l=Math.round(u*this.width/(s.p.tblwidth-p));e+=l;a=t}});g=0;if(n){if(i.width-f-(e+t*r)!==o)g=i.width-f-(e+t*r)-o}else if(!n&&Math.abs(i.width-f-(e+t*r))!==1)g=i.width-f-(e+t*r);s.p.colModel[a].width+=g;s.p.tblwidth=e+g+p+h*t;if(s.p.tblwidth>s.p.width){s.p.colModel[a].width-=s.p.tblwidth-parseInt(s.p.width,10);s.p.tblwidth=s.p.width}}})();b(u).css("width",i.width+"px").append("<div class="ui-jqgrid-resize-mark" id="rs_m"+s.p.id+"">&#160;</div>");b(o).css("width",i.width+"px");R=b("thead:first",s).get(0);var B="";if(s.p.footerrow)B+="<table role="grid" style="width:"+s.p.tblwidth+"px" class="ui-jqgrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody><tr role="row" class="ui-widget-content footrow footrow-"+a+"">";o=b("tr:first",R);var W="</tr><tr class="jqgfirstrow" role="row" style="height:auto">";s.p.disableClick=false;b("th",o).each(function(e){Q=s.p.colModel[e].width;if(typeof s.p.colModel[e].resizable==="undefined")s.p.colModel[e].resizable=true;if(s.p.colModel[e].resizable){N=document.createElement("span");b(N).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+a);b.browser.opera||b(N).css("cursor","col-resize");b(this).addClass(s.p.resizeclass)}else N="";b(this).css("width",Q+"px").prepend(N);var t="";if(s.p.colModel[e].hidden){b(this).css("display","none");t="display:none;"}W+="<td role="gridcell" style="height:0px;width:"+Q+"px;"+t+"">";i.headers[e]={width:Q,el:this};E=s.p.colModel[e].sortable;if(typeof E!=="boolean")E=s.p.colModel[e].sortable=true;t=s.p.colModel[e].name;t=="cb"||t=="subgrid"||t=="rn"||s.p.viewsortcols[2]&&b("div",this).addClass("ui-jqgrid-sortable");if(E)if(s.p.viewsortcols[0]){b("div span.s-ico",this).show();e==s.p.lastsort&&b("div span.ui-icon-"+s.p.sortorder,this).removeClass("ui-state-disabled")}else if(e==s.p.lastsort){b("div span.s-ico",this).show();b("div span.ui-icon-"+s.p.sortorder,this).removeClass("ui-state-disabled")}if(s.p.footerrow)B+="</td><td role="gridcell" "+p(e,0,"")+"="">&#160;</td>"}).mousedown(function(e){if(b(e.target).closest("th>span.ui-jqgrid-resize").length==1){var t=b.jgrid.getCellIndex(this);if(s.p.forceFit===true)s.p.nv=M(t);i.dragStart(t,e,S(t));return false}}).click(function(e){if(s.p.disableClick)return s.p.disableClick=false;var t="th>div.ui-jqgrid-sortable",i,r;s.p.viewsortcols[2]||(t="th>div>span>span.ui-grid-ico-sort");e=b(e.target).closest(t);if(e.length==1){t=b.jgrid.getCellIndex(this);if(!s.p.viewsortcols[2]){i=true;r=e.attr("sort")}F(b("div",this)[0].id,t,i,r);return false}});if(s.p.sortable&&b.fn.sortable)try{b(s).jqGrid("sortableColumns",o)}catch(e){}if(s.p.footerrow)B+="</tr></tbody></table>";W+="";this.appendChild(document.createElement("tbody"));b(this).addClass("ui-jqgrid-btable").append(W);W=null;o=b("<table class="ui-jqgrid-htable" style="width:"+s.p.tblwidth+"px" role="grid" aria-labelledby="gbox_"+this.id+"" cellspacing="0" cellpadding="0" border="0"></table>").append(R);var H=s.p.caption&&s.p.hiddengrid===true?true:false;r=b("<div class="ui-jqgrid-hbox"+(a=="rtl"?"-rtl":"")+""></div>");R=null;i.hDiv=document.createElement("div");b(i.hDiv).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(r);b(r).append(o);o=null;H&&b(i.hDiv).hide();if(b(s.p.pager).attr("id")!="pager"){s.p.toppager=false}if(s.p.pager){if(typeof s.p.pager=="string"){if(s.p.pager.substr(0,1)!="#")s.p.pager="#"+s.p.pager}else s.p.pager="#"+b(s.p.pager).attr("id");b(s.p.pager).css({width:i.width+"px"}).appendTo(u).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");H&&b(s.p.pager).hide();l(s.p.pager,"")}s.p.cellEdit===false&&s.p.hoverrows===true&&b(s).bind("mouseover",function(e){A=b(e.target).closest("tr.jqgrow");b(A).attr("class")!=="subgrid"&&b(A).addClass("ui-state-hover");return false}).bind("mouseout",function(e){A=b(e.target).closest("tr.jqgrow");b(A).removeClass("ui-state-hover");return false});var U,X;b(s).before(i.hDiv).click(function(e){O=e.target;var t=b(O).hasClass("cbox");A=b(O,s.rows).closest("tr.jqgrow");if(b(A).length===0)return this;var i=true;if(b.isFunction(s.p.beforeSelectRow))i=s.p.beforeSelectRow.call(s,A[0].id,e);if(O.tagName=="A"||(O.tagName=="INPUT"||O.tagName=="TEXTAREA"||O.tagName=="OPTION"||O.tagName=="SELECT")&&!t)return this;if(i===true){if(s.p.cellEdit===true)if(s.p.multiselect&&t)b(s).jqGrid("setSelection",A[0].id,true);else{U=A[0].rowIndex;X=b.jgrid.getCellIndex(O);try{b(s).jqGrid("editCell",U,X,true)}catch(e){}}else if(s.p.multikey)if(e[s.p.multikey])b(s).jqGrid("setSelection",A[0].id,true);else{if(s.p.multiselect&&t){t=b("[id^=jqg_"+s.p.id+"_]").attr("checked");b("[id^=jqg_"+s.p.id+"_]").attr("checked",!t)}}else{if(s.p.multiselect&&s.p.multiboxonly)if(!t){b(s.p.selarrrow).each(function(e,t){e=s.rows.namedItem(t);b(e).removeClass("ui-state-highlight");b("#jqg_"+s.p.id+"_"+b.jgrid.jqID(t)).attr("checked",false)});s.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",false)}b(s).jqGrid("setSelection",A[0].id,true)}if(b.isFunction(s.p.onCellSelect)){U=A[0].id;X=b.jgrid.getCellIndex(O);s.p.onCellSelect.call(s,U,X,b(O).html(),e)}e.stopPropagation()}else return this}).bind("reloadGrid",function(e,t){if(s.p.treeGrid===true)s.p.datatype=s.p.treedatatype;t&&t.current&&s.grid.selectionPreserver(s);if(s.p.datatype=="local"){b(s).jqGrid("resetSelection");s.p.data.length&&x()}else if(!s.p.treeGrid){s.p.selrow=null;if(s.p.multiselect){s.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",false)}s.p.savedRow=[]}s.p.scroll&&j(s.grid.bDiv,true);if(t&&t.page){e=t.page;if(e>s.p.lastpage)e=s.p.lastpage;if(e<1)e=1;s.p.page=e;s.grid.bdiv.scrolltop=s.grid.prevrowheight?(e-1)*s.grid.prevrowheight*s.p.rownum:0}if(s.grid.prevrowheight&&s.p.scroll){delete s.p.lastpage;s.grid.populatevisible()}else="" s.grid.populate();return="" false});b.isfunction(this.p.ondblclickrow)&&b(this).dblclick(function(e){o="e.target;A=b(O,s.rows).closest("tr.jqgrow");if(b(A).length===0)return" false;u="A[0].rowIndex;X=b.jgrid.getCellIndex(O);s.p.ondblClickRow.call(s,b(A).attr("id"),U,X,e);return" false});b.isfunction(this.p.onrightclickrow)&&b(this).bind("contextmenu",function(e){o="e.target;A=b(O,s.rows).closest("tr.jqgrow");if(b(A).length===0)return" false;s.p.multiselect||b(s).jqgrid("setselection",a[0].id,true);u="A[0].rowIndex;X=b.jgrid.getCellIndex(O);s.p.onRightClickRow.call(s,b(A).attr("id"),U,X,e);return" false});i.bdiv="document.createElement("div");b(i.bDiv).append(b('<div" style="position:relative;'+(n&&b.browser.version<8?" height:0.01%;":"")+'"="">').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:s.p.height+(isNaN(s.p.height)?"":"px"),width:i.width+"px"}).scroll(i.scrollGrid);b("table:first",i.bDiv).css({width:s.p.tblwidth+"px"});if(n){b("tbody",this).size()==2&&b("tbody:gt(0)",this).remove();s.p.multikey&&b(i.bDiv).bind("selectstart",function(){return false})}else s.p.multikey&&b(i.bDiv).bind("mousedown",function(){return false});H&&b(i.bDiv).hide();i.cDiv=document.createElement("div");b(i.cDiv).insertBefore(i.hDiv);if(s.p.toolbar[0]){i.uDiv=document.createElement("div");if(s.p.toolbar[1]=="top")b(i.uDiv).insertBefore(i.hDiv);else s.p.toolbar[1]=="bottom"&&b(i.uDiv).insertAfter(i.hDiv);if(s.p.toolbar[1]=="both"){i.ubDiv=document.createElement("div");b(i.uDiv).insertBefore(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);b(i.ubDiv).insertAfter(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);H&&b(i.ubDiv).hide()}else b(i.uDiv).width(i.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);H&&b(i.uDiv).hide()}if(s.p.toppager){s.p.toppager=s.p.id+"_toppager";i.topDiv=b("<div id=""+s.p.toppager+""></div>")[0];s.p.toppager="#"+s.p.toppager;b(i.topDiv).insertBefore(i.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(i.width);l(s.p.toppager,"_t")}if(s.p.footerrow){i.sDiv=b("<div class="ui-jqgrid-sdiv"></div>")[0];r=b("<div class="ui-jqgrid-hbox"+(a=="rtl"?"-rtl":"")+""></div>");b(i.sDiv).append(r).insertAfter(i.hDiv).width(i.width);b(r).append(B);i.footers=b(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells;if(s.p.rownumbers)i.footers[0].className="ui-state-default jqgrid-rownum";H&&b(i.sDiv).hide()}r=null;if(s.p.caption){var Y=s.p.datatype;if(s.p.hidegrid===true){b(".ui-jqgrid-titlebar-close",i.cDiv).click(function(e){var t=b.isFunction(s.p.onHeaderClick);if(s.p.gridstate=="visible"){b(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+s.p.id).slideUp("fast");s.p.pager&&b(s.p.pager).slideUp("fast");s.p.toppager&&b(s.p.toppager).slideUp("fast");if(s.p.toolbar[0]===true){s.p.toolbar[1]=="both"&&b(i.ubDiv).slideUp("fast");b(i.uDiv).slideUp("fast")}s.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+s.p.id).slideUp("fast");b("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");s.p.gridstate="hidden";b("#gbox_"+s.p.id).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+s.p.id).hide();if(t)H||s.p.onHeaderClick.call(s,s.p.gridstate,e)}else if(s.p.gridstate=="hidden"){b(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+s.p.id).slideDown("fast");s.p.pager&&b(s.p.pager).slideDown("fast");s.p.toppager&&b(s.p.toppager).slideDown("fast");if(s.p.toolbar[0]===true){s.p.toolbar[1]=="both"&&b(i.ubDiv).slideDown("fast");b(i.uDiv).slideDown("fast")}s.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+s.p.id).slideDown("fast");b("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(H){s.p.datatype=Y;G();H=false}s.p.gridstate="visible";b("#gbox_"+s.p.id).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+s.p.id).show();t&&s.p.onHeaderClick.call(s,s.p.gridstate,e)}return false});if(H){s.p.datatype="local";b(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click")}}}else b(i.cDiv).hide();b(i.hDiv).after(i.bDiv).mousemove(function(e){if(i.resizing){i.dragMove(e);return false}});b(".ui-jqgrid-labels",i.hDiv).bind("selectstart",function(){return false});b(document).mouseup(function(){if(i.resizing){i.dragEnd();return false}return true});s.formatCol=p;s.sortData=F;s.updatepager=function(e,t){var i,r,a,o,l,n,d,u="";a=parseInt(s.p.page,10)-1;if(a<0)a=0;a*=parseint(s.p.rownum,10);l=a+s.p.reccount;if(s.p.scroll){i=b("tbody:first> tr:gt(0)",s.grid.bDiv);a=l-i.length;s.p.reccount=i.length;if(r=i.outerHeight()||s.grid.prevRowHeight){i=a*r;r=parseInt(s.p.records,10)*r;b(">div:first",s.grid.bDiv).css({height:r}).children("div:first").css({height:i,display:i?"":"none"})}s.grid.bDiv.scrollLeft=s.grid.hDiv.scrollLeft}u=s.p.pager?s.p.pager:"";u+=s.p.toppager?u?","+s.p.toppager:s.p.toppager:"";if(u){d=b.jgrid.formatter.integer||{};i=c(s.p.page);r=c(s.p.lastpage);b(".selbox",u).attr("disabled",false);if(s.p.pginput===true){b(".ui-pg-input",u).val(s.p.page);b("#sp_1",u).html(b.fmatter?b.fmatter.util.NumberFormat(s.p.lastpage,d):s.p.lastpage)}if(s.p.viewrecords)if(s.p.reccount===0)b(".ui-paging-info",u).html(s.p.emptyrecords);else{o=a+1;n=s.p.records;if(b.fmatter){o=b.fmatter.util.NumberFormat(o,d);l=b.fmatter.util.NumberFormat(l,d);n=b.fmatter.util.NumberFormat(n,d)}b(".ui-paging-info",u).html(b.jgrid.format(s.p.recordtext,o,l,n))}if(s.p.pgbuttons===true){if(i<=0)i=r=0;if(i==1||i===0){b("#first, #prev",s.p.pager).addclass("ui-state-disabled").removeclass("ui-state-hover");s.p.toppager&&b("#first_t,="" #prev_t",s.p.toppager).addclass("ui-state-disabled").removeclass("ui-state-hover")}else{b("#first,="" #prev",s.p.pager).removeclass("ui-state-disabled");s.p.toppager&&b("#first_t,="" #prev_t",s.p.toppager).removeclass("ui-state-disabled")}if(i="=r||i===0){b("#next," #last",s.p.pager).addclass("ui-state-disabled").removeclass("ui-state-hover");s.p.toppager&&b("#next_t,="" #last_t",s.p.toppager).addclass("ui-state-disabled").removeclass("ui-state-hover")}else{b("#next,="" #last",s.p.pager).removeclass("ui-state-disabled");s.p.toppager&&b("#next_t,="" #last_t",s.p.toppager).removeclass("ui-state-disabled")}}}e="==true&&s.p.rownumbers===true&&b("td.jqgrid-rownum",s.rows).each(function(e){b(this).html(a+1+e)});t&&s.p.jqgdnd&&b(s).jqGrid("gridDnD","updateDnD");b.isFunction(s.p.gridComplete)&&s.p.gridComplete.call(s)};s.refreshIndex=x;s.formatter=function(e,t,i,r,a){return" h(e,t,i,r,a)};b.extend(i,{populate:g,emptyrows:j});this.grid="i;s.addXmlData=function(e){C(e,s.grid.bDiv)};s.addJSONData=function(e){_(e,s.grid.bDiv)};this.grid.cols=this.rows[0].cells;G();s.p.hiddengrid=false;b(window).unload(function(){s=null})}}}})};b.jgrid.extend({getGridParam:function(e){var" t="this[0];if(t&&t.grid)return" e?typeof="" t.p[e]!="undefined" ?t.p[e]:null:t.p},setgridparam:function(e){return="" this.each(function(){this.grid&&typeof="" e="=="object"&&b.extend(true,this.p,e)})},getDataIDs:function(){var">0)for(;t<i;){if(b(this.rows[t]).hasclass("jqgrow")){e[r]=this.rows[t].id;r++}t++}});return e},setselection:function(e,t){return="" this.each(function(){function="" i(e){var="" t="b(r.grid.bDiv)[0].clientHeight,i=b(r.grid.bDiv)[0].scrollTop,a=r.rows[e].offsetTop;e=r.rows[e].clientHeight;if(a+e">=t+i)b(r.grid.bDiv)[0].scrollTop=a-(t+i)+e+i;else if(a<t+i)if(a<i)b(r.grid.bdiv)[0].scrolltop=a}var r="this,a,s;if(e!==undefined){t=t===false?false:true;if(a=r.rows.namedItem(e+"")){if(r.p.scrollrows===true){s=r.rows.namedItem(e).rowIndex;s">=0&&i(s)}if(r.p.multiselect){r.p.selrow=a.id;s=b.inArray(r.p.selrow,r.p.selarrrow);if(s===-1){a.className!=="ui-subgrid"&&b(a).addClass("ui-state-highlight").attr("aria-selected","true");a=true;b("#jqg_"+r.p.id+"_"+b.jgrid.jqID(r.p.selrow)).attr("checked",a);r.p.selarrrow.push(r.p.selrow);r.p.onSelectRow&&t&&r.p.onSelectRow.call(r,r.p.selrow,a)}else{a.className!=="ui-subgrid"&&b(a).removeClass("ui-state-highlight").attr("aria-selected","false");a=false;b("#jqg_"+r.p.id+"_"+b.jgrid.jqID(r.p.selrow)).attr("checked",a);r.p.selarrrow.splice(s,1);r.p.onSelectRow&&t&&r.p.onSelectRow.call(r,r.p.selrow,a);a=r.p.selarrrow[0];r.p.selrow=a===undefined?null:a}}else if(a.className!=="ui-subgrid"){r.p.selrow&&b(r.rows.namedItem(r.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");r.p.selrow=a.id;b(a).addClass("ui-state-highlight").attr("aria-selected","true");r.p.onSelectRow&&t&&r.p.onSelectRow.call(r,r.p.selrow,true)}}}})},resetSelection:function(){return this.each(function(){var e=this,t;if(e.p.multiselect){b(e.p.selarrrow).each(function(i,r){t=e.rows.namedItem(r);b(t).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+e.p.id+"_"+b.jgrid.jqID(r)).attr("checked",false)});b("#cb_"+b.jgrid.jqID(e.p.id)).attr("checked",false);e.p.selarrrow=[]}else if(e.p.selrow){b("#"+e.p.id+" tbody:first tr#"+b.jgrid.jqID(e.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");e.p.selrow=null}e.p.savedRow=[]})},getRowData:function(e){var t={},i,r=false,a,s=0;this.each(function(){var o=this,l,n;if(typeof e=="undefined"){r=true;i=[];a=o.rows.length}else{n=o.rows.namedItem(e);if(!n)return t;a=2}for(;s<a;){if(r)n=o.rows[s];if(b(n).hasclass("jqgrow")){b("td",n).each(function(e){l=o.p.colmodel[e].name;if(l!=="cb"&&l!=="subgrid"&&l!=="rn")if(o.p.treegrid===true&&l==o.p.expandcolumn)t[l]=b.jgrid.htmldecode(b("span:first",this).html());else try{t[l]="b.unformat(this,{rowId:n.id,colModel:o.p.colModel[e]},e)}catch(e){t[l]=b.jgrid.htmlDecode(b(this).html())}});if(r){i.push(t);t={}}}s++}});return" i?i:t},delrowdata:function(e){var="" t="false,i,r;this.each(function(){var" a="this;if(i=a.rows.namedItem(e)){b(i).remove();a.p.records--;a.p.reccount--;a.updatepager(true,false);t=true;if(a.p.multiselect){r=b.inArray(e,a.p.selarrrow);r!=-1&&a.p.selarrrow.splice(r,1)}if(e==a.p.selrow)a.p.selrow=null}else" return="" false;if(a.p.datatype="="local"){var" s="a.p._index[e];if(typeof" s!="undefined" ){a.p.data.splice(s,1);a.refreshindex()}}if(a.p.altrows="==true&&t){var" o="a.p.altclass;b(a.rows).each(function(e){e%2==1?b(this).addClass(o):b(this).removeClass(o)})}});return" t},setrowdata:function(e,t,i){var="" r,a="true,s;this.each(function(){if(!this.grid)return" false;var="" i,u="{};n=o.rows.namedItem(e);if(!n)return" false;if(t)try{b(this.p.colmodel).each(function(i){r="this.name;if(t[r]!==undefined){u[r]=this.formatter&&typeof" this.formatter="=="string"&&this.formatter=="date"?b.unformat.date(t[r],this):t[r];l=o.formatter(e,t[r],i,t,"edit");s=this.title?{title:b.jgrid.stripHtml(l)}:{};o.p.treeGrid===true&&r==o.p.ExpandColumn?b("td:eq("+i+")"> span:first",n).html(l).attr(s):b("td:eq("+i+")",n).html(l).attr(s)}});if(o.p.datatype=="local"){var c=o.p._index[e];if(typeof c!="undefined")o.p.data[c]=b.extend(true,o.p.data[c],u);u=null}}catch(e){a=false}if(a)if(d==="string")b(n).addClass(i);else d==="object"&&b(n).css(i)});return a},addRowData:function(e,t,i,r){i||(i="last");var a=false,s,o,l,n,d,u,c,p,f="",h,g,m,v,w;if(t){if(b.isArray(t)){h=true;i="last";g=e}else{t=[t];h=false}this.each(function(){var y=this,j=t.length;d=y.p.rownumbers===true?1:0;l=y.p.multiselect===true?1:0;n=y.p.subGrid===true?1:0;if(!h)if(typeof e!="undefined")e+="";else{e=y.p.records+1+"";if(y.p.keyIndex!==false){g=y.p.colModel[y.p.keyIndex+l+n+d].name;if(typeof t[0][g]!="undefined")e=t[0][g]}}m=y.p.altclass;for(var x=0,C="",_={},D=b.isFunction(y.p.afterInsertRow)?true:false;x<j;){v=t[x];o="";if(h){try{e=v[g]}catch(t){e=y.p.records+1+""}c=y.p.altrows===true?(y.rows.length-1)%2===0?m:"":""}if(d){f=y.formatcol(0,1,"");o+='<td role="gridcell" aria-describedby="'+y.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+f+"="">0"}if(l){p='<input role="checkbox" type="checkbox" id="jqg_'+y.p.id+" _"+e+'"="" class="cbox">';f=y.formatCol(d,1,"");o+='<td role="gridcell" aria-describedby="'+y.p.id+'_cb" '+f+"="">"+p+"</td>"}if(n)o+=b(y).jqGrid("addSubGridCell",l+d,1);for(c=l+n+d;c<y.p.colmodel.length;c++){w=y.p.colmodel[c];s=w.name;_[s]=w.formatter&&typeof w.formatter="=="string"&&w.formatter=="date"?b.unformat.date(v[s],w):v[s];p=y.formatter(e,b.jgrid.getAccessor(v,s),c,v,"edit");f=y.formatCol(c,1,p);o+='<td" role="gridcell" aria-describedby="'+y.p.id+" _"+s+'"="" '+f+"="">"+p+""}o='<tr id="'+e+'" role="row" class="ui-widget-content jqgrow ui-row-'+y.p.direction+" "+c+'"="">'+o+"</tr>";if(y.p.subGrid===true){o=b(o)[0];b(y).jqGrid("addSubGrid",o,l+d)}if(y.rows.length===0)b("table:first",y.grid.bDiv).append(o);else switch(i){case"last":b(y.rows[y.rows.length-1]).after(o);break;case"first":b(y.rows[0]).after(o);break;case"after":if(u=y.rows.namedItem(r))b(y.rows[u.rowIndex+1]).hasClass("ui-subgrid")?b(y.rows[u.rowIndex+1]).after(o):b(u).after(o);break;case"before":if(u=y.rows.namedItem(r)){b(u).before(o);u=u.rowIndex}break}y.p.records++;y.p.reccount++;D&&y.p.afterInsertRow.call(y,e,v,v);x++;if(y.p.datatype=="local"){y.p._index[e]=y.p.data.length;y.p.data.push(_);_={}}}if(y.p.altRows===true&&!h)if(i=="last")(y.rows.length-1)%2==1&&b(y.rows[y.rows.length-1]).addClass(m);else b(y.rows).each(function(e){e%2==1?b(this).addClass(m):b(this).removeClass(m)});y.updatepager(true,true);a=true})}return a},footerData:function(e,t,i){function r(e){for(var t in e)if(e.hasOwnProperty(t))return false;return true}var a,s=false,o={},l;if(typeof e=="undefined")e="get";if(typeof i!="boolean")i=true;e=e.toLowerCase();this.each(function(){var n=this,d;if(!n.grid||!n.p.footerrow)return false;if(e=="set")if(r(t))return false;s=true;b(this.p.colModel).each(function(r){a=this.name;if(e=="set"){if(t[a]!==undefined){d=i?n.formatter("",t[a],r,t,"edit"):t[a];l=this.title?{title:b.jgrid.stripHtml(d)}:{};b("tr.footrow td:eq("+r+")",n.grid.sDiv).html(d).attr(l);s=true}}else if(e=="get")o[a]=b("tr.footrow td:eq("+r+")",n.grid.sDiv).html()})});return e=="get"?o:s},ShowHideCol:function(e,t){return this.each(function(){var i=this,r=false;if(i.grid){if(typeof e==="string")e=[e];t=t!="none"?"":"none";var a=t===""?true:false;b(this.p.colModel).each(function(s){if(b.inArray(this.name,e)!==-1&&this.hidden===a){b("tr",i.grid.hDiv).each(function(){b("th:eq("+s+")",this).css("display",t)});b(i.rows).each(function(e){b("td:eq("+s+")",i.rows[e]).css("display",t)});i.p.footerrow&&b("td:eq("+s+")",i.grid.sDiv).css("display",t);if(t=="none")i.p.tblwidth-=this.width+i.p.cellLayout;else i.p.tblwidth+=this.width;this.hidden=!a;r=true}});if(r===true){b("table:first",i.grid.hDiv).width(i.p.tblwidth);b("table:first",i.grid.bDiv).width(i.p.tblwidth);i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft;if(i.p.footerrow){b("table:first",i.grid.sDiv).width(i.p.tblwidth);i.grid.sDiv.scrollLeft=i.grid.bDiv.scrollLeft}i.p.shrinkToFit===true&&b(i).jqGrid("setGridWidth",i.grid.width-.001,true)}}})},hideCol:function(e){return this.each(function(){b(this).jqGrid("ShowHideCol",e,"none")})},showCol:function(e){return this.each(function(){b(this).jqGrid("ShowHideCol",e,"")})},remapColumns:function(e,t,i){function r(t){var i;i=t.length?b.makeArray(t):b.extend({},t);b.each(e,function(e){t[e]=i[this]})}function a(t,i){b(">tr"+(i||""),t).each(function(){var t=this,i=b.makeArray(t.cells);b.each(e,function(){var e=i[this];e&&t.appendChild(e)})})}var s=this.get(0);r(s.p.colModel);r(s.p.colNames);r(s.grid.headers);a(b("thead:first",s.grid.hDiv),i&&":not(.ui-jqgrid-labels)");t&&a(b("#"+s.p.id+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");s.p.footerrow&&a(b("tbody:first",s.grid.sDiv));if(s.p.remapColumns)if(s.p.remapColumns.length)r(s.p.remapColumns);else s.p.remapColumns=b.makeArray(e);s.p.lastsort=b.inArray(s.p.lastsort,e);if(s.p.treeGrid)s.p.expColInd=b.inArray(s.p.expColInd,e)},setGridWidth:function(e,t){return this.each(function(){if(this.grid){var i=this,r,a=0,s=i.p.cellLayout,o,l=0,n=false,d=i.p.scrollOffset,u,c=0,p=0,f=0,h;if(typeof t!="boolean")t=i.p.shrinkToFit;if(!isNaN(e)){e=parseInt(e,10);i.grid.width=i.p.width=e;b("#gbox_"+i.p.id).css("width",e+"px");b("#gview_"+i.p.id).css("width",e+"px");b(i.grid.bDiv).css("width",e+"px");b(i.grid.hDiv).css("width",e+"px");i.p.pager&&b(i.p.pager).css("width",e+"px");i.p.toppager&&b(i.p.toppager).css("width",e+"px");if(i.p.toolbar[0]===true){b(i.grid.uDiv).css("width",e+"px");i.p.toolbar[1]=="both"&&b(i.grid.ubDiv).css("width",e+"px")}i.p.footerrow&&b(i.grid.sDiv).css("width",e+"px");if(t===false&&i.p.forceFit===true)i.p.forceFit=false;if(t===true){if(b.browser.safari)s=0;b.each(i.p.colModel,function(){if(this.hidden===false){a+=parseInt(this.width,10);if(this.fixed){p+=this.width;c+=this.width+s}else l++;f++}});if(l!==0){i.p.tblwidth=a;u=e-s*l-c;if(!isNaN(i.p.height))if(b(i.grid.bDiv)[0].clientHeight<b(i.grid.bdiv)[0].scrollheight||i.rows.length===1){n=true;u-=d}a=0;var g="i.grid.cols.length">0;b.each(i.p.colModel,function(e){if(this.hidden===false&&!this.fixed){r=Math.round(u*this.width/(i.p.tblwidth-p));if(!(r<0)){this.width=r;a+=r;i.grid.headers[e].width=r ;i.grid.headers[e].el.style.width="r+"px";if(i.p.footerrow)i.grid.footers[e].style.width=r+"px";if(g)i.grid.cols[e].style.width=r+"px";o=e}}});h=0;if(n){if(e-c-(a+s*l)!==d)h=e-c-(a+s*l)-d}else" if(math.abs(e-c-(a+s*l))!="=1)h=e-c-(a+s*l);i.p.colModel[o].width+=h;i.p.tblwidth=a+h+p+s*f;if(i.p.tblwidth">e){n=i.p.tblwidth-parseInt(e,10);i.p.tblwidth=e;r=i.p.colModel[o].width-=n}else r=i.p.colModel[o].width;i.grid.headers[o].width=r;i.grid.headers[o].el.style.width=r+"px";if(g)i.grid.cols[o].style.width=r+"px";b("table:first",i.grid.bDiv).css("width",i.p.tblwidth+"px");b("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px");i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft;if(i.p.footerrow){i.grid.footers[o].style.width=r+"px";b("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px")}}}}}})},setGridHeight:function(e){return this.each(function(){var t=this;if(t.grid){b(t.grid.bDiv).css({height:e+(isNaN(e)?"":"px")});t.p.height=e;t.p.scroll&&t.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e;b("span.ui-jqgrid-title",this.grid.cDiv).html(e);b(this.grid.cDiv).show()})},setLabel:function(e,t,i,r){return this.each(function(){var a=this,s=-1;if(a.grid){if(isNaN(e))b(a.p.colModel).each(function(t){if(this.name==e){s=t;return false}});else s=parseInt(e,10);if(s>=0){var o=b("tr.ui-jqgrid-labels th:eq("+s+")",a.grid.hDiv);if(t){var l=b(".s-ico",o);b("[id^=jqgh_]",o).empty().html(t).append(l);a.p.colNames[s]=t}if(i)typeof i==="string"?b(o).addClass(i):b(o).css(i);typeof r==="object"&&b(o).attr(r)}}})},setCell:function(e,t,i,r,a,s){return this.each(function(){var o=this,l=-1,n,d;if(o.grid){if(isNaN(t))b(o.p.colModel).each(function(e){if(this.name==t){l=e;return false}});else l=parseInt(t,10);if(l>=0)if(n=o.rows.namedItem(e)){var u=b("td:eq("+l+")",n);if(i!==""||s===true){n=o.formatter(e,i,l,n,"edit");d=o.p.colModel[l].title?{title:b.jgrid.stripHtml(n)}:{};o.p.treeGrid&&b(".tree-wrap",b(u)).length>0?b("span",b(u)).html(n).attr(d):b(u).html(n).attr(d);if(o.p.datatype=="local"){n=o.p.colModel[l];i=n.formatter&&typeof n.formatter==="string"&&n.formatter=="date"?b.unformat.date(i,n):i;if(d=o.p._index[e])o.p.data[d][n.name]=i}}if(typeof r==="string")b(u).addClass(r);else r&&b(u).css(r);typeof a==="object"&&b(u).attr(a)}}})},getCell:function(e,t){var i=false;this.each(function(){var r=this,a=-1;if(r.grid){if(isNaN(t))b(r.p.colModel).each(function(e){if(this.name===t){a=e;return false}});else a=parseInt(t,10);if(a>=0){var s=r.rows.namedItem(e);if(s)try{i=b.unformat(b("td:eq("+a+")",s),{rowId:s.id,colModel:r.p.colModel[a]},a)}catch(e){i=b.jgrid.htmlDecode(b("td:eq("+a+")",s).html())}}}});return i},getCol:function(e,t,i){var r=[],a,s=0;t=typeof t!="boolean"?false:t;if(typeof i=="undefined")i=false;this.each(function(){var o=this,l=-1;if(o.grid){if(isNaN(e))b(o.p.colModel).each(function(t){if(this.name===e){l=t;return false}});else l=parseInt(e,10);if(l>=0){var n=o.rows.length,d=0;if(n&&n>0){for(;d<n;){if(b(o.rows[d]).hasclass("jqgrow")){try{a=b.unformat(b(o.rows[d].cells[l]),{rowid:o.rows[d].id,colmodel:o.p.colmodel[l]},l)}catch(e){a=b.jgrid.htmldecode(o.rows[d].cells[l].innerhtml)}if(i)s+=parsefloat(a);else if(t)r.push({id:o.rows[d].id,value:a});else="" r[d]="a}d++}if(i)switch(i.toLowerCase()){case"sum":r=s;break;case"avg":r=s/n;break;case"count":r=n;break}}}}});return" r},cleargriddata:function(e){return="" this.each(function(){var="" t="this;if(t.grid){if(typeof" e!="boolean" )e="false;if(t.p.deepempty)b("#"+t.p.id+"" tbody:first="" tr:gt(0)").remove();else{var="" i="b("#"+t.p.id+"" tr:first")[0];b("#"+t.p.id+"="" tbody:first").empty().append(i)}t.p.footerrow&&e&&b(".ui-jqgrid-ftable="" td",t.grid.sdiv).html("&#160;");t.p.selrow="null;t.p.selarrrow=[];t.p.savedRow=[];t.p.records=0;t.p.page=1;t.p.lastpage=0;t.p.reccount=0;t.p.data=[];t.p_index={};t.updatepager(true,false)}})},getInd:function(e,t){var" i}})})(jquery);(function(e){e.fmatter="{};e.extend(e.fmatter,{isBoolean:function(e){return" typeof="" e="=="boolean"},isObject:function(t){return" t&&(typeof="" this.isobject(e)||this.isstring(e)||this.isnumber(e)||this.isboolean(e)},isempty:function(t){if(!this.isstring(t)&&this.isvalue(t))return="" false;else="" if(!this.isvalue(t))return="" true;t="e.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"");return" o="i;r=e.extend({},e.jgrid.formatter,r);if(e.fn.fmatter[t])o=e.fn.fmatter[t](i,r,a,s);return" o};e.fmatter.util="{NumberFormat:function(t,i){e.fmatter.isNumber(t)||(t*=1);if(e.fmatter.isNumber(t)){var" r="t<0,a=t+"",s=i.decimalSeparator?i.decimalSeparator:".";if(e.fmatter.isNumber(i.decimalPlaces)){var">0){if(t<0){a+=s;t=a.length-1}else if(s!="=".")a=a.replace(".",s);for(;a.length-1-t<o;)a+="0"}}if(i.thousandsSeparator){o=i.thousandsSeparator;t=a.lastIndexOf(s);t=t">-1?t:a.length;s=a.substring(t);for(var l=-1,n=t;n>0;n--){l++;if(l%3===0&&n!==t&&(!r||n>1))s=o+s;s=a.charAt(n-1)+s}a=s}a=i.prefix?i.prefix+a:a;return a=i.suffix?a+i.suffix:a}else return t},DateFormat:function(t,i,r,a){var s=function(e,t){e=String(e);for(t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},o="{m:1,d:1,y:1970,h:0,i:0,s:0,u:0},l=0,n,d,u=["i18n"];u.i18n={dayNames:a.dayNames,monthNames:a.monthNames};if(t" in="" a.masks)t="a.masks[t];if(i.constructor===Number)l=new" date(i);else="" if(i.constructor="==Date)l=i;else{i=i.split(/[\\\/:_;.,\t\T\s-]/);t=t.split(/[\\\/:_;.,\t\T\s-]/);n=0;for(d=t.length;n<d;n++){if(t[n]=="M"){l=e.inArray(i[n],u.i18n.monthNames);if(l!==-1&&l<12)i[n]=l+1}if(t[n]=="F"){l=e.inArray(i[n],u.i18n.monthNames);if(l!==-1&&l">11)i[n]=l+1-12}if(i[n])o[t[n].toLowerCase()]=parseInt(i[n],10)}if(o.f)o.m=o.f;if(o.m===0&&o.y===0&&o.d===0)return"&#160;";o.m=parseInt(o.m,10)-1;l=o.y;if(l>=70&&l<=99)o.y=1900+o.y;else if(l="">=0&&l<=69)o.y=2e3+o.y;l=new date(o.y,o.m,o.d,o.h,o.i,o.s,o.u)}if(r="" in="" a.masks)r="a.masks[r];else" r||(r="Y-m-d" );o="l.getHours();t=l.getMinutes();i=l.getDate();n=l.getMonth()+1;d=l.getTimezoneOffset();var" c="l.getSeconds(),p=l.getMilliseconds(),f=l.getDay(),h=l.getFullYear(),g=(f+6)%7+1,m=(new" date(h,n-1,i)-new="" date(h,0,1))="" 864e5,b="{d:s(i),D:u.i18n.dayNames[f],j:i,l:u.i18n.dayNames[f+7],N:g,S:a.S(i),w:f,z:m,W:g<5?Math.floor((m+g-1)/7)+1:Math.floor((m+g-1)/7)||((new" date(h-1,0,1).getday()+6)%7<4?53:52),f:u.i18n.monthnames[n-1+12],m:s(n),m:u.i18n.monthnames[n-1],n:n,t:"?",l:"?",o:"?",y:h,y:string(h).substring(2),a:o<12?a.ampm[0]:a.ampm[1],a:o<12?a.ampm[2]:a.ampm[3],b:"?",g:o%12||12,g:o,h:s(o%12||12),h:s(o),i:s(t),s:s(c),u:p,e:"?",i:"?",o:(d="">0?"-":"+")+s(Math.floor(Math.abs(d)/60)*100+Math.abs(d)%60,4),P:"?",T:(String(l).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(l/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(e){return e in b?b[e]:e.substring(1)})}};e.fn.fmatter.defaultFormat=function(t,i){return e.fmatter.isValue(t)&&t!==""?t:i.defaultValue?i.defaultValue:"&#160;"};e.fn.fmatter.email=function(t,i){return e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'" target="_blank" rel="external">'+t+"</a>"};e.fn.fmatter.checkbox=function(t,i){var r=e.extend({},i.checkbox);e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions));i=r.disabled===true?"disabled":"";if(e.fmatter.isEmpty(t)||e.fmatter.isUndefined(t))t=e.fn.fmatter.defaultFormat(t,r);t+="";t=t.toLowerCase();return'<input type="checkbox" '+(t.search(="" (false|0|no|off)="" i)<0?"="" checked="checked" ":"")+'="" value="'+t+'" offval="no" '+i+"="">"};e.fn.fmatter.link=function(t,i){var r={target:i.target},a="";e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions));if(r.target)a="target="+r.target;return e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):"<a "+a+'="" href="'+t+'">'+t+"</a>"};e.fn.fmatter.showlink=function(t,i){var r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},a="";e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions));if(r.target)a="target="+r.target;r=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam;return e.fmatter.isString(t)||e.fmatter.isNumber(t)?"<a "+a+'="" href="'+r+'">'+t+"</a>":e.fn.fmatter.defaultFormat(t,i)};e.fn.fmatter.integer=function(t,i){var r=e.extend({},i.integer);e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions));if(e.fmatter.isEmpty(t))return r.defaultValue;return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.number=function(t,i){var r=e.extend({},i.number);e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions));if(e.fmatter.isEmpty(t))return r.defaultValue;return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.currency=function(t,i){var r=e.extend({},i.currency);e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions));if(e.fmatter.isEmpty(t))return r.defaultValue;return e.fmatter.util.NumberFormat(t,r)};e.fn.fmatter.date=function(t,i,r,a){r=e.extend({},i.date);e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions));return!r.reformatAfterEdit&&a=="edit"?e.fn.fmatter.defaultFormat(t,i):e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):e.fmatter.util.DateFormat(r.srcformat,t,r.newformat,r)};e.fn.fmatter.select=function(t,i){t+="";var r=false,a=[];if(e.fmatter.isUndefined(i.colModel.formatoptions)){if(!e.fmatter.isUndefined(i.colModel.editoptions))r=i.colModel.editoptions.value}else r=i.colModel.formatoptions.value;if(r){var s=i.colModel.editoptions.multiple===true?true:false,o=[],l;if(s){o=t.split(",");o=e.map(o,function(t){return e.trim(t)})}if(e.fmatter.isString(r))for(var n=r.split(";"),d=0,u=0;u<n.length;u++){l=n[u].split(":");if(l.length>2)l[1]=jQuery.map(l,function(e,t){if(t>0)return e}).join(":");if(s){if(jQuery.inArray(l[0],o)>-1){a[d]=l[1];d++}}else if(e.trim(l[0])==e.trim(t)){a[0]=l[1];break}}else if(e.fmatter.isObject(r))if(s)a=jQuery.map(o,function(e){return r[e]});else a[0]=r[t]||""}t=a.join(", ");return t===""?e.fn.fmatter.defaultFormat(t,i):t};e.fn.fmatter.rowactions=function(t,i,r,a){switch(r){case"edit":r=function(){e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show();e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide()};e("#"+i).jqGrid("editRow",t,a,null,null,null,{oper:"edit"},r,null,r);e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).hide();e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).show();break;case"save":e("#"+i).jqGrid("saveRow",t,null,null);e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show();e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide();break;case"cancel":e("#"+i).jqGrid("restoreRow",t);e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show();e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide();break}};e.fn.fmatter.actions=function(t,i){t={keys:false,editbutton:true,delbutton:true};e.fmatter.isUndefined(i.colModel.formatoptions)||(t=e.extend(t,i.colModel.formatoptions));var r=i.rowId,a="",s;if(typeof r=="undefined"||e.fmatter.isEmpty(r))return"";if(t.editbutton){s="onclick=$.fn.fmatter.rowactions('"+r+"','"+i.gid+"','edit',"+t.keys+");";a=a+"<div style="margin-left:8px;"><div title=""+e.jgrid.nav.edittitle+"" style="float:left;cursor:pointer;" class="ui-pg-div ui-inline-edit" "+s+"=""><span class="ui-icon ui-icon-pencil"></span></div>"}if(t.delbutton){s="onclick=jQuery('#"+i.gid+"').jqGrid('delGridRow','"+r+"');";a=a+"<div title=""+e.jgrid.nav.deltitle+"" style="float:left;margin-left:5px;" class="ui-pg-div ui-inline-del" "+s+"=""><span class="ui-icon ui-icon-trash"></span></div>"}s="onclick=$.fn.fmatter.rowactions('"+r+"','"+i.gid+"','save',false);";a=a+"<div title=""+e.jgrid.edit.bSubmit+"" style="float:left;display:none" class="ui-pg-div ui-inline-save"><span class="ui-icon ui-icon-disk" "+s+"=""></span></div>";s="onclick=$.fn.fmatter.rowactions('"+r+"','"+i.gid+"','cancel',false);";return a=a+"<div title=""+e.jgrid.edit.bCancel+"" style="float:left;display:none;margin-left:5px;" class="ui-pg-div ui-inline-cancel"><span class="ui-icon ui-icon-cancel" "+s+"=""></span></div></div>"};e.unformat=function(t,i,r,a){var s,o=i.colModel.formatter,l=i.colModel.formatoptions||{},n=/([\.\*\_\'\(\)\{\}\+\?\\])/g,d=i.colModel.unformat||e.fn.fmatter[o]&&e.fn.fmatter[o].unformat;if(typeof d!=="undefined"&&e.isFunction(d))s=d(e(t).text(),i,t);else if(!e.fmatter.isUndefined(o)&&e.fmatter.isString(o)){s=e.jgrid.formatter||{};switch(o){case"integer":l=e.extend({},s.integer,l);i=l.thousandsSeparator.replace(n,"\\$1");i=new RegExp(i,"g");s=e(t).text().replace(i,"");break;case"number":l=e.extend({},s.number,l);i=l.thousandsSeparator.replace(n,"\\$1");i=new RegExp(i,"g");s=e(t).text().replace(i,"").replace(l.decimalSeparator,".");break;case"currency":l=e.extend({},s.currency,l);i=l.thousandsSeparator.replace(n,"\\$1");i=new RegExp(i,"g");s=e(t).text().replace(i,"").replace(l.decimalSeparator,".").replace(l.prefix,"").replace(l.suffix,"");break;case"checkbox":l=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];s=e("input",t).attr("checked")?l[0]:l[1];break;case"select":s=e.unformat.select(t,i,r,a);break;case"actions":return"";default:s=e(t).text()}}return s?s:a===true?e(t).text():e.jgrid.htmlDecode(e(t).html())};e.unformat.select=function(t,i,r,a){r=[];t=e(t).text();if(a===true)return t;i=e.extend({},i.colModel.editoptions);if(i.value){var s=i.value;i=i.multiple===true?true:false;a=[];var o;if(i){a=t.split(",");a=e.map(a,function(t){return e.trim(t)})}if(e.fmatter.isString(s))for(var l=s.split(";"),n=0,d=0;d<l.length;d++){o=l[d].split(":");if(o.length>2)o[1]=jQuery.map(o,function(e,t){if(t>0)return e}).join(":");if(i){if(jQuery.inArray(o[1],a)>-1){r[n]=o[0];n++}}else if(e.trim(o[1])==e.trim(t)){r[0]=o[0];break}}else if(e.fmatter.isObject(s)||e.isArray(s)){i||(a[0]=t);r=jQuery.map(a,function(t){var i;e.each(s,function(e,r){if(r==t){i=e;return false}});if(typeof i!="undefined")return i})}return r.join(", ")}else return t||""};e.unformat.date=function(t,i){var r=e.jgrid.formatter.date||{};e.fmatter.isUndefined(i.formatoptions)||(r=e.extend({},r,i.formatoptions));return e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):e.fmatter.util.DateFormat(r.newformat,t,r.srcformat,r)}})(jQuery);(function(e){e.jgrid.extend({getColProp:function(e){var t={},i=this[0];if(i.grid){i=i.p.colModel;for(var r=0;r<i.length;r++)if(i[r].name==e){t=i[r];break}return t}},setcolprop:function(t,i){return="" this.each(function(){if(this.grid)if(i)for(var="" r="this.p.colModel,a=0;a<r.length;a++)if(r[a].name==t){e.extend(this.p.colModel[a],i);break}})},sortGrid:function(e,t,i){return" this.each(function(){var="" s="0;s<r.p.colModel.length;s++)if(r.p.colModel[s].index==e||r.p.colModel[s].name==e){a=s;break}if(a!=-1){s=r.p.colModel[a].sortable;if(typeof" s!="="boolean")s=true;if(typeof" t!="="boolean")t=false;s&&r.sortData("jqgh_"+e,a,t,i)}}})},GridDestroy:function(){return" this.each(function(){if(this.grid){this.p.pager&&e(this.p.pager).remove();var="" t="this.id;try{e("#gbox_"+t).remove()}catch(e){}}})},GridUnload:function(){return" this.each(function(){if(this.grid){var="" ui-jqgrid-pager="" corner-bottom");var="" i="document.createElement("table");e(i).attr({id:t.id});i.className=t.cl;t=this.id;e(i).removeClass("ui-jqgrid-btable");if(e(this.p.pager).parents("#gbox_"+t).length===1){e(i).insertBefore("#gbox_"+t).show();e(this.p.pager).insertBefore("#gbox_"+t)}else" e(i).insertbefore("#gbox_"+t).show();e("#gbox_"+t).remove()}})},setgridstate:function(t){return="" .ui-jqgrid-hdiv","#gview_"+i.p.id).slideup("fast");i.p.pager&&e(i.p.pager).slideup("fast");i.p.toppager&&e(i.p.toppager).slideup("fast");if(i.p.toolbar[0]="==true){i.p.toolbar[1]=="both"&&e(i.grid.ubDiv).slideUp("fast");e(i.grid.uDiv).slideUp("fast")}i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideUp("fast");e(".ui-jqgrid-titlebar-close" span",i.grid.cdiv).removeclass("ui-icon-circle-triangle-n").addclass("ui-icon-circle-triangle-s");i.p.gridstate="hidden" }else="" if(t="="visible"){e(".ui-jqgrid-hdiv," .ui-jqgrid-bdiv","#gview_"+i.p.id).slidedown("fast");i.p.pager&&e(i.p.pager).slidedown("fast");i.p.toppager&&e(i.p.toppager).slidedown("fast");if(i.p.toolbar[0]="==true){i.p.toolbar[1]=="both"&&e(i.grid.ubDiv).slideDown("fast");e(i.grid.uDiv).slideDown("fast")}i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideDown("fast");e(".ui-jqgrid-titlebar-close" span",i.grid.cdiv).removeclass("ui-icon-circle-triangle-s").addclass("ui-icon-circle-triangle-n");i.p.gridstate="visible" }}})},updategridrows:function(t,i,r){var="" a,s="false,o;this.each(function(){var" l="this,n,d,u,c;if(!l.grid)return" false;i||(i="id" );t&&t.length="">0&&e(t).each(function(){u=this;if(d=l.rows.namedItem(u[i])){c=u[i];if(r===true)if(l.p.jsonReader.repeatitems===true){if(l.p.jsonReader.cell)u=u[l.p.jsonReader.cell];for(var t=0;t<u.length;t++){n=l.formatter(c,u[t],t,u,"edit");o=l.p.colmodel[t].title?{title:e.jgrid.striphtml(n)}:{};l.p.treegrid===true&&a==l.p.expandcolumn?e("td:eq("+t+")> span:first",d).html(n).attr(o):e("td:eq("+t+")",d).html(n).attr(o)}return s=true}e(l.p.colModel).each(function(t){a=r===true?this.jsonmap||this.name:this.name;if(u[a]!==undefined){n=l.formatter(c,u[a],t,u,"edit");o=this.title?{title:e.jgrid.stripHtml(n)}:{};l.p.treeGrid===true&&a==l.p.ExpandColumn?e("td:eq("+t+") > span:first",d).html(n).attr(o):e("td:eq("+t+")",d).html(n).attr(o);s=true}})}})});return s},filterGrid:function(t,i){i=e.extend({gridModel:false,gridNames:false,gridToolbar:false,filterModel:[],formtype:"horizontal",autosearch:true,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:false,enableClear:false,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:"",marksearched:true},i||{});return this.each(function(){var r=this;this.p=i;if(this.p.filterModel.length===0&&this.p.gridModel===false)alert("No filter is set");else if(t){this.p.gridid=t.indexOf("#")!=-1?t:"#"+t;var a=e(this.p.gridid).jqGrid("getGridParam","colModel");if(a){if(this.p.gridModel===true){var s=e(this.p.gridid)[0],o;e.each(a,function(e){var t=[];this.search=this.search===false?false:true;o=this.editrules&&this.editrules.searchhidden===true?true:this.hidden===true?false:true;if(this.search===true&&o===true){t.label=r.p.gridNames===true?s.p.colNames[e]:"";t.name=this.name;t.index=this.index||this.name;t.stype=this.edittype||"text";if(t.stype!="select")t.stype="text";t.defval=this.defval||"";t.surl=this.surl||"";t.sopt=this.editoptions||{};t.width=this.width;r.p.filterModel.push(t)}})}else e.each(r.p.filterModel,function(){for(var e=0;e<a.length;e++)if(this.name==a[e].name){this.index=a[e].index||this.name;break}if(!this.index)this.index=this.name});var l="function(){var" t="{},i=0,a,s=e(r.p.gridid)[0],o;s.p.searchdata={};e.isFunction(r.p.beforeSearch)&&r.p.beforeSearch();e.each(r.p.filterModel,function(){o=this.index;switch(this.stype){case"select":if(a=e("select[name="+o+"]",r).val()){t[o]=a;r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell");i++}else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete" s.p.postdata[this.index]}catch(e){}}break;default:if(a="e("input[name="+o+"]",r).val()){t[o]=a;r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell");i++}else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete" s.p.postdata[this.index]}catch(e){}}}});var="">0?true:false;e.extend(s.p.postData,t);var n;if(r.p.url){n=e(s).jqGrid("getGridParam","url");e(s).jqGrid("setGridParam",{url:r.p.url})}e(s).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]);n&&e(s).jqGrid("setGridParam",{url:n});e.isFunction(r.p.afterSearch)&&r.p.afterSearch()},n=function(){var t={},i,a=0,s=e(r.p.gridid)[0],o;e.isFunction(r.p.beforeClear)&&r.p.beforeClear();e.each(r.p.filterModel,function(){o=this.index;i=this.defval?this.defval:"";if(!this.stype)this.stype="text";switch(this.stype){case"select":var l;e("select[name="+o+"] option",r).each(function(t){if(t===0)this.selected=true;if(e(this).text()==i){this.selected=true;l=e(this).val();return false}});if(l){t[o]=l;r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell");a++}else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete s.p.postData[this.index]}catch(e){}}break;case"text":e("input[name="+o+"]",r).val(i);if(i){t[o]=i;r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell");a++}else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete s.p.postData[this.index]}catch(e){}}break}});var l=a>0?true:false;e.extend(s.p.postData,t);var n;if(r.p.url){n=e(s).jqGrid("getGridParam","url");e(s).jqGrid("setGridParam",{url:r.p.url})}e(s).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]);n&&e(s).jqGrid("setGridParam",{url:n});e.isFunction(r.p.afterClear)&&r.p.afterClear()},d,u=e("<form name="SearchForm" style="display:inline;'" class=""+this.p.formclass+""></form>");d=e("<table class=""+this.p.tableclass+"" cellspacing="0" cellpading="0" border="0"><tbody></tbody></table>");e(u).append(d);(function(){var t=document.createElement("tr"),i,a,s,o;r.p.formtype=="horizontal"&&e(d).append(t);e.each(r.p.filterModel,function(a){s=document.createElement("td");e(s).append("<label for=""+this.name+"">"+this.label+"</label>");o=document.createElement("td");var n=this;if(!this.stype)this.stype="text";switch(this.stype){case"select":if(this.surl)e(o).load(this.surl,function(){n.defval&&e("select",this).val(n.defval);e("select",this).attr({name:n.index||n.name,id:"sg_"+n.name});n.sopt&&e("select",this).attr(n.sopt);r.p.gridToolbar===true&&n.width&&e("select",this).width(n.width);r.p.autosearch===true&&e("select",this).change(function(){l();return false})});else if(n.sopt.value){var u=n.sopt.value,c=document.createElement("select");e(c).attr({name:n.index||n.name,id:"sg_"+n.name}).attr(n.sopt);var p;if(typeof u==="string"){a=u.split(";");for(var f=0;f<a.length;f++){u=a[f].split(":");p=document.createelement("option");p.value=u[0];p.innerhtml=u[1];if(u[1]==n.defval)p.selected="selected";c.appendchild(p)}}else if(typeof="" u="=="object")for(f" in="" u)if(u.hasownproperty(f)){a++;p="document.createElement("option");p.value=f;p.innerHTML=u[f];if(u[f]==n.defval)p.selected="selected";c.appendChild(p)}r.p.gridToolbar===true&&n.width&&e(c).width(n.width);e(o).append(c);r.p.autosearch===true&&e(c).change(function(){l();return" false})}break;case"text":c="this.defval?this.defval:"";e(o).append("<input" type="text" name=""+(this.index||this.name)+"" id="sg_"+this.name+"" value=""+c+"">");n.sopt&&e("input",o).attr(n.sopt);if(r.p.gridToolbar===true&&n.width)e.browser.msie?e("input",o).width(n.width-4):e("input",o).width(n.width-2);r.p.autosearch===true&&e("input",o).keypress(function(e){if((e.charCode?e.charCode:e.keyCode?e.keyCode:0)==13){l();return false}return this});break}if(r.p.formtype=="horizontal"){r.p.gridToolbar===true&&r.p.gridNames===false?e(t).append(o):e(t).append(s).append(o);e(t).append(o)}else{i=document.createElement("tr");e(i).append(s).append(o);e(d).append(i)}});o=document.createElement("td");if(r.p.enableSearch===true){a="<input type="button" id="sButton" class=""+r.p.buttonclass+"" value=""+r.p.searchButton+"">";e(o).append(a);e("input#sButton",o).click(function(){l();return false})}if(r.p.enableClear===true){a="<input type="button" id="cButton" class=""+r.p.buttonclass+"" value=""+r.p.clearButton+"">";e(o).append(a);e("input#cButton",o).click(function(){n();return false})}if(r.p.enableClear===true||r.p.enableSearch===true)if(r.p.formtype=="horizontal")e(t).append(o);else{i=document.createElement("tr");e(i).append("<td>&#160;</td>").append(o);e(d).append(i)}})();e(this).append(u);this.triggerSearch=l;this.clearSearch=n}else alert("Could not get grid colModel")}else alert("No target grid is set!")})},filterToolbar:function(t){t=e.extend({autosearch:true,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:false,groupOp:"AND",defaultSearch:"bw"},t||{});return this.each(function(){function i(t,i){var r=e(t);r[0]&&jQuery.each(i,function(){this.data!==undefined?r.bind(this.type,this.data,this.fn):r.bind(this.type,this.fn)})}var r=this,a=function(){var i={},a=0,s,o,l={};e.each(r.p.colModel,function(){o=this.index||this.name;var n=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:t.defaultSearch;switch(this.stype){case"select":if(s=e("select[name="+o+"]",r.grid.hDiv).val()){i[o]=s;l[o]=n;a++}else try{delete r.p.postData[o]}catch(e){}break;case"text":if(s=e("input[name="+o+"]",r.grid.hDiv).val()){i[o]=s;l[o]=n;a++}else try{delete r.p.postData[o]}catch(e){}break}});var n=a>0?true:false;if(t.stringResult===true||r.p.datatype=="local"){var d='{"groupOp":"'+t.groupOp+'","rules":[',u=0;e.each(i,function(e,t){if(u>0)d+=",";d+='{"field":"'+e+'",';d+='"op":"'+l[e]+'",';d+='"data":"'+t+'"}';u++});d+="]}";e.extend(r.p.postData,{filters:d})}else e.extend(r.p.postData,i);var c;if(r.p.searchurl){c=r.p.url;e(r).jqGrid("setGridParam",{url:r.p.searchurl})}var p=false;if(e.isFunction(t.beforeSearch))p=t.beforeSearch.call(r);p||e(r).jqGrid("setGridParam",{search:n}).trigger("reloadGrid",[{page:1}]);c&&e(r).jqGrid("setGridParam",{url:c});e.isFunction(t.afterSearch)&&t.afterSearch()},s=e("<tr class="ui-search-toolbar" role="rowheader"></tr>"),o;e.each(r.p.colModel,function(){var l=this,n,d,u,c;d=e("<th role="columnheader" class="ui-state-default ui-th-column ui-th-"+r.p.direction+""></th>");n=e("<div style="width:100%;position:relative;height:100%;padding-right:0.3em;"></div>");this.hidden===true&&e(d).css("display","none");this.search=this.search===false?false:true;if(typeof this.stype=="undefined")this.stype="text";u=e.extend({},this.searchoptions||{});if(this.search)switch(this.stype){case"select":if(c=this.surl||u.dataUrl)e.ajax(e.extend({url:c,dataType:"html",complete:function(r){if(u.buildSelect!==undefined)(r=u.buildSelect(r))&&e(n).append(r);else e(n).append(r.responseText);u.defaultValue&&e("select",n).val(u.defaultValue);e("select",n).attr({name:l.index||l.name,id:"gs_"+l.name});u.attr&&e("select",n).attr(u.attr);e("select",n).css({width:"100%"});u.dataInit!==undefined&&u.dataInit(e("select",n)[0]);u.dataEvents!==undefined&&i(e("select",n)[0],u.dataEvents);t.autosearch===true&&e("select",n).change(function(){a();return false});r=null}},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));else{var p;if(l.searchoptions&&l.searchoptions.value)p=l.searchoptions.value;else if(l.editoptions&&l.editoptions.value)p=l.editoptions.value;if(p){c=document.createElement("select");c.style.width="100%";e(c).attr({name:l.index||l.name,id:"gs_"+l.name});var f,h;if(typeof p==="string"){p=p.split(";");for(var g=0;g<p.length;g++){f=p[g].split(":");h=document.createelement("option");h.value=f[0];h.innerhtml=f[1];c.appendchild(h)}}else if(typeof="" p="=="object")for(f" in="" p)if(p.hasownproperty(f)){h="document.createElement("option");h.value=f;h.innerHTML=p[f];c.appendChild(h)}u.defaultValue&&e(c).val(u.defaultValue);u.attr&&e(c).attr(u.attr);u.dataInit!==undefined&&u.dataInit(c);u.dataEvents!==undefined&&i(c,u.dataEvents);e(n).append(c);t.autosearch===true&&e(c).change(function(){a();return" false})}}break;case"text":c="u.defaultValue?u.defaultValue:"";e(n).append("<input" type="text" style="width:95%;padding:0px;" name=""+(l.index||l.name)+"" id="gs_"+l.name+"" value=""+c+"">");u.attr&&e("input",n).attr(u.attr);u.dataInit!==undefined&&u.dataInit(e("input",n)[0]);u.dataEvents!==undefined&&i(e("input",n)[0],u.dataEvents);if(t.autosearch===true)t.searchOnEnter?e("input",n).keypress(function(e){if((e.charCode?e.charCode:e.keyCode?e.keyCode:0)==13){a();return false}return this}):e("input",n).keydown(function(e){switch(e.which){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:o&&clearTimeout(o);o=setTimeout(function(){a()},500)}});break}e(d).append(n);e(s).append(d)});e("table thead",r.grid.hDiv).append(s);this.triggerToolbar=a;this.clearToolbar=function(i){var a={},s,o=0,l;i=typeof i!="boolean"?true:i;e.each(r.p.colModel,function(){s=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"";l=this.index||this.name;switch(this.stype){case"select":var t;e("select[name="+l+"] option",r.grid.hDiv).each(function(i){if(i===0)this.selected=true;if(e(this).text()==s){this.selected=true;t=e(this).val();return false}});if(t){a[l]=t;o++}else try{delete r.p.postData[l]}catch(e){}break;case"text":e("input[name="+l+"]",r.grid.hDiv).val(s);if(s){a[l]=s;o++}else try{delete r.p.postData[l]}catch(e){}break}});var n=o>0?true:false;if(t.stringResult===true||r.p.datatype=="local"){var d='{"groupOp":"'+t.groupOp+'","rules":[',u=0;e.each(a,function(e,t){if(u>0)d+=",";d+='{"field":"'+e+'",';d+='"op":"eq",';d+='"data":"'+t+'"}';u++});d+="]}";e.extend(r.p.postData,{filters:d})}else e.extend(r.p.postData,a);var c;if(r.p.searchurl){c=r.p.url;e(r).jqGrid("setGridParam",{url:r.p.searchurl})}var p=false;if(e.isFunction(t.beforeClear))p=t.beforeClear.call(r);p||i&&e(r).jqGrid("setGridParam",{search:n}).trigger("reloadGrid",[{page:1}]);c&&e(r).jqGrid("setGridParam",{url:c});e.isFunction(t.afterClear)&&t.afterClear()};this.toggleToolbar=function(){var t=e("tr.ui-search-toolbar",r.grid.hDiv);t.css("display")=="none"?t.show():t.hide()}})}})})(jQuery);var showModal=function(e){e.w.show()},closeModal=function(e){e.w.hide().attr("aria-hidden","true");e.o&&e.o.remove()},hideModal=function(e,t){t=jQuery.extend({jqm:true,gb:""},t||{});if(t.onClose){var i=t.onClose(e);if(typeof i=="boolean"&&!i)return}if(jQuery.fn.jqm&&t.jqm===true)jQuery(e).attr("aria-hidden","true").jqmHide();else{if(t.gb!=="")try{jQuery(".jqgrid-overlay:first",t.gb).hide()}catch(e){}jQuery(e).hide().attr("aria-hidden","true")}};function findPos(e){var t=0,i=0;if(e.offsetParent){do{t+=e.offsetLeft;i+=e.offsetTop}while(e=e.offsetParent)}return[t,i]}var createModal=function(e,t,i,r,a,s){var o=document.createElement("div"),l;l=jQuery(i.gbox).attr("dir")=="rtl"?true:false;o.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";o.id=e.themodal;var n=document.createElement("div");n.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";n.id=e.modalhead;jQuery(n).append("<span class="ui-jqdialog-title">"+i.caption+"</span>");var d=jQuery("<a href="javascript:void(0)" class="ui-jqdialog-titlebar-close ui-corner-all" target="_blank" rel="external"></a>").hover(function(){d.addClass("ui-state-hover")},function(){d.removeClass("ui-state-hover")}).append("<span class="ui-icon ui-icon-closethick"></span>");jQuery(n).append(d);if(l){o.dir="rtl";jQuery(".ui-jqdialog-title",n).css("float","right");jQuery(".ui-jqdialog-titlebar-close",n).css("left","0.3em")}else{o.dir="ltr";jQuery(".ui-jqdialog-title",n).css("float","left");jQuery(".ui-jqdialog-titlebar-close",n).css("right","0.3em")}var u=document.createElement("div");jQuery(u).addClass("ui-jqdialog-content ui-widget-content").attr("id",e.modalcontent);jQuery(u).append(t);o.appendChild(u)
;jQuery(o).prepend(n);s===true?jQuery("body").append(o):jQuery(o).insertBefore(r);if(typeof i.jqModal==="undefined")i.jqModal=true;t={};if(jQuery.fn.jqm&&i.jqModal===true){if(i.left===0&&i.top===0){r=[];r=findPos(a);i.left=r[0]+4;i.top=r[1]+4}t.top=i.top+"px";t.left=i.left}else if(i.left!==0||i.top!==0){t.left=i.left;t.top=i.top+"px"}jQuery("a.ui-jqdialog-titlebar-close",n).click(function(){var t=jQuery("#"+e.themodal).data("onClose")||i.onClose,r=jQuery("#"+e.themodal).data("gbox")||i.gbox;hideModal("#"+e.themodal,{gb:r,jqm:i.jqModal,onClose:t});return false});if(i.width===0||!i.width)i.width=300;if(i.height===0||!i.height)i.height=200;if(!i.zIndex)i.zIndex=950;a=0;if(l&&t.left&&!s){a=jQuery(i.gbox).width()-(!isNaN(i.width)?parseInt(i.width,10):0)-8;t.left=parseInt(t.left,10)+parseInt(a,10)}if(t.left)t.left+="px";jQuery(o).css(jQuery.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex,overflow:"hidden"},t)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"});if(typeof i.drag=="undefined")i.drag=true;if(typeof i.resize=="undefined")i.resize=true;if(i.drag){jQuery(n).css("cursor","move");if(jQuery.fn.jqDrag)jQuery(o).jqDrag(n);else try{jQuery(o).draggable({handle:jQuery("#"+n.id)})}catch(e){}}if(i.resize)if(jQuery.fn.jqResize){jQuery(o).append("<div class="jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se"></div>");jQuery("#"+e.themodal).jqResize(".jqResize",e.scrollelm?"#"+e.scrollelm:false)}else try{jQuery(o).resizable({handles:"se, sw",alsoResize:e.scrollelm?"#"+e.scrollelm:false})}catch(e){}i.closeOnEscape===true&&jQuery(o).keydown(function(t){if(t.which==27){t=jQuery("#"+e.themodal).data("onClose")||i.onClose;hideModal(this,{gb:i.gbox,jqm:i.jqModal,onClose:t})}})},viewModal=function(e,t){t=jQuery.extend({toTop:true,overlay:10,modal:false,onShow:showModal,onHide:closeModal,gbox:"",jqm:true,jqM:true},t||{});if(jQuery.fn.jqm&&t.jqm===true)t.jqM?jQuery(e).attr("aria-hidden","false").jqm(t).jqmShow():jQuery(e).attr("aria-hidden","false").jqmShow();else{if(t.gbox!==""){jQuery(".jqgrid-overlay:first",t.gbox).show();jQuery(e).data("gbox",t.gbox)}jQuery(e).show().attr("aria-hidden","false");try{jQuery(":input:visible",e)[0].focus()}catch(e){}}};function info_dialog(e,t,i,r){var a={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+e+"</b>",left:250,top:170,zIndex:1e3,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};jQuery.extend(a,r||{});var s=a.jqModal;if(jQuery.fn.jqm&&!s)s=false;e="";if(a.buttons.length>0)for(r=0;r<a.buttons.length;r++){if(typeof a.buttons[r].id="="undefined")a.buttons[r].id="info_button_"+r;e+="<a" href="javascript:void(0)" id=""+a.buttons[r].id+"" class="fm-button ui-state-default ui-corner-all">"+a.buttons[r].text+""}r=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px";var o="<div id="info_id">";o+="<div id="infocnt" style="margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+r+";"+("text-align:"+a.align+";")+"">"+t+"</div>";o+=i?"<div class="ui-widget-content ui-helper-clearfix" style="text-align:"+a.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;"><a href="javascript:void(0)" id="closedialog" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+i+"</a>"+e+"</div>":e!==""?"<div class="ui-widget-content ui-helper-clearfix" style="text-align:"+a.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;">"+e+"</div>":"";o+="</div>";try{jQuery("#info_dialog").attr("aria-hidden")=="false"&&hideModal("#info_dialog",{jqm:s});jQuery("#info_dialog").remove()}catch(e){}createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},o,a,"","",true);e&&jQuery.each(a.buttons,function(e){jQuery("#"+this.id,"#info_id").bind("click",function(){a.buttons[e].onClick.call(jQuery("#info_dialog"));return false})});jQuery("#closedialog","#info_id").click(function(e){hideModal("#info_dialog",{jqm:s});return false});jQuery(".fm-button","#info_dialog").hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")});jQuery.isFunction(a.beforeOpen)&&a.beforeOpen();viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove();e.o&&e.o.remove()},modal:a.modal,jqm:s});jQuery.isFunction(a.afterOpen)&&a.afterOpen();try{jQuery("#info_dialog").focus()}catch(e){}}function createEl(e,t,i,r,a){function s(e,t){if(jQuery.isFunction(t.dataInit)){e.id=t.id;t.dataInit(e);delete t.id;delete t.dataInit}if(t.dataEvents){jQuery.each(t.dataEvents,function(){this.data!==undefined?jQuery(e).bind(this.type,this.data,this.fn):jQuery(e).bind(this.type,this.fn)});delete t.dataEvents}return t}var o="";t.defaultValue&&delete t.defaultValue;switch(e){case"textarea":o=document.createElement("textarea");if(r)t.cols||jQuery(o).css({width:"98%"});else if(!t.cols)t.cols=20;if(!t.rows)t.rows=2;if(i=="&nbsp;"||i=="&#160;"||i.length==1&&i.charCodeAt(0)==160)i="";o.value=i;t=s(o,t);jQuery(o).attr(t).attr({role:"textbox",multiline:"true"});break;case"checkbox":o=document.createElement("input");o.type="checkbox";if(t.value){var l=t.value.split(":");if(i===l[0]){o.checked=true;o.defaultChecked=true}o.value=l[0];jQuery(o).attr("offval",l[1]);try{delete t.value}catch(e){}}else{l=i.toLowerCase();if(l.search(/(false|0|no|off|undefined)/i)<0&&l!==""){o.checked=true;o.defaultchecked=true;o.value=i}else o.value="on" ;jquery(o).attr("offval","off")}t="s(o,t);jQuery(o).attr(t).attr("role","checkbox");break;case"select":o=document.createElement("select");o.setAttribute("role","select");var" n,d="[];if(t.multiple===true){n=true;o.multiple="multiple";jQuery(o).attr("aria-multiselectable","true")}else" n="false;if(typeof" t.dataurl!="undefined" )jquery.ajax(jquery.extend({url:t.dataurl,type:"get",datatype:"html",success:function(e,r){try{delete="" t.dataurl;delete="" t.value}catch(e){}if(typeof="" t.buildselect!="undefined" ){e="t.buildSelect(e);e=jQuery(e).html();delete" t.buildselect}else="" e="jQuery(e).html();if(e){jQuery(o).append(e);t=s(o,t);if(typeof" t.size="=="undefined")t.size=n?3:1;if(n){d=i.split(",");d=jQuery.map(d,function(e){return" jquery.trim(e)})}else="" d[0]="jQuery.trim(i);jQuery(o).attr(t);setTimeout(function(){jQuery("option",o).each(function(e){if(e===0)this.selected="";jQuery(this).attr("role","option");if(jQuery.inArray(jQuery.trim(jQuery(this).text()),d)">-1||jQuery.inArray(jQuery.trim(jQuery(this).val()),d)>-1){this.selected="selected";if(!n)return false}})},0)}}},a||{}));else if(t.value){if(n){d=i.split(",");d=jQuery.map(d,function(e){return jQuery.trim(e)});if(typeof t.size==="undefined")t.size=3}else t.size=1;if(typeof t.value==="function")t.value=t.value();if(typeof t.value==="string"){r=t.value.split(";");for(l=0;l<r.length;l++){a=r[l].split(":");if(a.length>2)a[1]=jQuery.map(a,function(e,t){if(t>0)return e}).join(":");e=document.createElement("option");e.setAttribute("role","option");e.value=a[0];e.innerHTML=a[1];if(!n&&(jQuery.trim(a[0])==jQuery.trim(i)||jQuery.trim(a[1])==jQuery.trim(i)))e.selected="selected";if(n&&(jQuery.inArray(jQuery.trim(a[1]),d)>-1||jQuery.inArray(jQuery.trim(a[0]),d)>-1))e.selected="selected";o.appendChild(e)}}else if(typeof t.value==="object"){r=t.value;for(l in r)if(r.hasOwnProperty(l)){e=document.createElement("option");e.setAttribute("role","option");e.value=l;e.innerHTML=r[l];if(!n&&(jQuery.trim(l)==jQuery.trim(i)||jQuery.trim(r[l])==jQuery.trim(i)))e.selected="selected";if(n&&(jQuery.inArray(jQuery.trim(r[l]),d)>-1||jQuery.inArray(jQuery.trim(l),d)>-1))e.selected="selected";o.appendChild(e)}}t=s(o,t);try{delete t.value}catch(e){}jQuery(o).attr(t)}break;case"text":case"password":case"button":l=e=="button"?"button":"textbox";o=document.createElement("input");o.type=e;o.value=i;t=s(o,t);if(e!="button")if(r)t.size||jQuery(o).css({width:"98%"});else if(!t.size)t.size=20;jQuery(o).attr(t).attr("role",l);break;case"image":case"file":o=document.createElement("input");o.type=e;t=s(o,t);jQuery(o).attr(t);break;case"custom":o=document.createElement("span");try{if(jQuery.isFunction(t.custom_element)){var u=t.custom_element.call(this,i,t);if(u){u=jQuery(u).addClass("customelement").attr({id:t.id,name:t.name});jQuery(o).empty().append(u)}else throw"e2"}else throw"e1"}catch(e){e=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);e=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,typeof e==="string"?e:e.message,jQuery.jgrid.edit.bClose)}break}return o}function daysInFebruary(e){return e%4===0&&(e%100!==0||e%400===0)?29:28}function DaysArray(e){for(var t=1;t<=e;t++){this[t]=31;if(t==4||t==6||t==9||t==11)this[t]=30;if(t==2)this[t]=29}return this}function="" checkdate(e,t){var="" i="{},r;e=e.toLowerCase();r=e.indexOf("/")!=-1?"/":e.indexOf("-")!=-1?"-":e.indexOf(".")!=-1?".":"/";e=e.split(r);t=t.split(r);if(t.length!=3)return" false;r="-1;for(var" a,s="-1,o=-1,l=0;l<e.length;l++){a=isNaN(t[l])?0:parseInt(t[l],10);i[e[l]]=a;a=e[l];if(a.indexOf("y")!=-1)r=l;if(a.indexOf("m")!=-1)o=l;if(a.indexOf("d")!=-1)s=l}a=e[r]=="y"||e[r]=="yyyy"?4:e[r]=="yy"?2:-1;l=DaysArray(12);var" n;if(r="==-1)return" false;else{n="i[e[r]].toString();if(a==2&&n.length==1)a=1;if(n.length!=a||i[e[r]]===0&&t[r]!="00")return" false}if(o="==-1)return">12)return false}if(s===-1)return false;else{n=i[e[s]].toString();if(n.length<1||i[e[s]]<1||i[e[s]]>31||i[e[o]]==2&&i[e[s]]>daysInFebruary(i[e[r]])||i[e[s]]>l[i[e[o]]])return false}return true}function isEmpty(e){return e.match(/^\s+$/)||e===""?true:false}function checkTime(e){var t=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!isEmpty(e))if(e=e.match(t)){if(e[3]){if(e[1]<1||e[1]>12)return false}else if(e[1]>23)return false;if(e[2]>59)return false}else return false;return true}function checkValues(e,t,i){var r,a,s,o;if(typeof t=="string"){a=0;for(o=i.p.colModel.length;a<o;a++)if(i.p.colmodel[a].name==t){r=i.p.colmodel[a].editrules;t=a;try{s=i.p.colmodel[a].formoptions.label}catch(e){}break}}else if(t="">=0)r=i.p.colModel[t].editrules;if(r){s||(s=i.p.colNames[t]);if(r.required===true)if(isEmpty(e))return[false,s+": "+jQuery.jgrid.edit.msg.required,""];a=r.required===false?false:true;if(r.number===true)if(!(a===false&&isEmpty(e)))if(isNaN(e))return[false,s+": "+jQuery.jgrid.edit.msg.number,""];if(typeof r.minValue!="undefined"&&!isNaN(r.minValue))if(parseFloat(e)<parsefloat(r.minvalue))return[false,s+": "+jquery.jgrid.edit.msg.minvalue+"="" "+r.minvalue,""];if(typeof="" r.maxvalue!="undefined" &&!isnan(r.maxvalue))if(parsefloat(e)="">parseFloat(r.maxValue))return[false,s+": "+jQuery.jgrid.edit.msg.maxValue+" "+r.maxValue,""];if(r.email===true)if(!(a===false&&isEmpty(e))){o=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!o.test(e))return[false,s+": "+jQuery.jgrid.edit.msg.email,""]}if(r.integer===true)if(!(a===false&&isEmpty(e))){if(isNaN(e))return[false,s+": "+jQuery.jgrid.edit.msg.integer,""];if(e%1!==0||e.indexOf(".")!=-1)return[false,s+": "+jQuery.jgrid.edit.msg.integer,""]}if(r.date===true)if(!(a===false&&isEmpty(e))){t=i.p.colModel[t].formatoptions&&i.p.colModel[t].formatoptions.newformat?i.p.colModel[t].formatoptions.newformat:i.p.colModel[t].datefmt||"Y-m-d";if(!checkDate(t,e))return[false,s+": "+jQuery.jgrid.edit.msg.date+" - "+t,""]}if(r.time===true)if(!(a===false&&isEmpty(e)))if(!checkTime(e))return[false,s+": "+jQuery.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(r.url===true)if(!(a===false&&isEmpty(e))){o=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!o.test(e))return[false,s+": "+jQuery.jgrid.edit.msg.url,""]}if(r.custom===true)if(!(a===false&&isEmpty(e)))if(jQuery.isFunction(r.custom_func)){e=r.custom_func.call(i,e,s);return jQuery.isArray(e)?e:[false,jQuery.jgrid.edit.msg.customarray,""]}else return[false,jQuery.jgrid.edit.msg.customfcheck,""]}return[true,"",""]}(function(e){var t=null;e.jgrid.extend({searchGrid:function(t){t=e.extend({recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,multipleSearch:false,cloneSearchRowOnAdd:true,sopt:null,stringResult:undefined,onClose:null,useDataProxy:false,overlay:true},e.jgrid.search,t||{});return this.each(function(){function i(t,i){i=t.p.postData[i.sFilter];if(typeof i=="string")i=e.jgrid.parse(i);if(i){i.groupOp&&t.SearchFilter.setGroupOp(i.groupOp);if(i.rules){var r,a=0,s=i.rules.length;for(r=false;a<s;a++){r=i.rules[a];if(r.field!==undefined&&r.op!==undefined&&r.data!==undefined)(r=t.searchfilter.setfilter({sfref:t.searchfilter.$.find(".sf:last"),filter:e.extend({},r)}))&&t.searchfilter.add()}}}}function r(i){if(t.onclose){var="" r="t.onClose(i);if(typeof" a(){var="" i="e(".ui-searchFilter").length;if(i">1){var r=e("#"+n).css("zIndex");e("#"+n).css({zIndex:parseInt(r,10)+i})}e("#"+n).show();t.overlay===true&&e(".jqgrid-overlay:first","#gbox_"+l.p.id).show();try{e(":input:visible","#"+n)[0].focus()}catch(e){}}function s(i){var a=i!==undefined,s=e("#"+l.p.id),o={};if(t.multipleSearch===false){o[t.sField]=i.rules[0].field;o[t.sValue]=i.rules[0].data;o[t.sOper]=i.rules[0].op}else o[t.sFilter]=i;s[0].p.search=a;e.extend(s[0].p.postData,o);s.trigger("reloadGrid",[{page:1}]);t.closeAfterSearch&&r(e("#"+n))}function o(i){i=i&&i.hasOwnProperty("reload")?i.reload:true;var a=e("#"+l.p.id),s={};a[0].p.search=false;if(t.multipleSearch===false)s[t.sField]=s[t.sValue]=s[t.sOper]="";else s[t.sFilter]="";e.extend(a[0].p.postData,s);i&&a.trigger("reloadGrid",[{page:1}]);t.closeAfterReset&&r(e("#"+n))}var l=this;if(l.grid){var n="fbox_"+l.p.id;if(e.fn.searchFilter){t.recreateFilter===true&&e("#"+n).remove();if(e("#"+n).html()!=null){e.isFunction(t.beforeShowSearch)&&t.beforeShowSearch(e("#"+n));a();e.isFunction(t.afterShowSearch)&&t.afterShowSearch(e("#"+n))}else{var d=[],u=e("#"+l.p.id).jqGrid("getGridParam","colNames"),c=e("#"+l.p.id).jqGrid("getGridParam","colModel"),p=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],f,h,g,m=[];if(t.sopt!==null)for(f=g=0;f<t.sopt.length;f++){if((h=e.inarray(t.sopt[f],p))!=-1){m[g]={op:t.sopt[f],text:t.odata[h]};g++}}else for(f="0;f<p.length;f++)m[f]={op:p[f],text:t.odata[f]};e.each(c,function(i,r){var" a="typeof" r.search="=="undefined"?true:r.search,s=r.hidden===true;i=e.extend({},{text:u[i],itemval:r.index||r.name},this.searchoptions);r=i.searchhidden===true;if(typeof" i.sopt!="="undefined"){g=0;i.ops=[];if(i.sopt.length">0)for(f=0;f<i.sopt.length;f++)if((h=e.inarray(i.sopt[f],p))!=-1){i.ops[g]={op:i.sopt[f],text:t.odata[h]};g++}}if(typeof this.stype="=="undefined")this.stype="text";if(this.stype=="select")if(i.dataUrl===undefined){var" o;if(i.value)o="i.value;else" if(this.editoptions)o="this.editoptions.value;if(o){i.dataValues=[];if(typeof" o="=="string"){o=o.split(";");var" l;for(f="0;f<o.length;f++){l=o[f].split(":");i.dataValues[f]={value:l[0],text:l[1]}}}else" if(typeof="" in="" o)if(o.hasownproperty(l)){i.datavalues[f]="{value:l,text:o[l]};f++}}}}if(r&&a||a&&!s)d.push(i)});if(d.length">0){e("<div id=""+n+"" role="dialog" tabindex="-1"></div>").insertBefore("#gview_"+l.p.id);if(t.stringResult===undefined)t.stringResult=t.multipleSearch;l.SearchFilter=e("#"+n).searchFilter(d,{groupOps:t.groupOps,operators:m,onClose:r,resetText:t.Reset,searchText:t.Find,windowTitle:t.caption,rulesText:t.rulesText,matchText:t.matchText,onSearch:s,onReset:o,stringResult:t.stringResult,ajaxSelectOptions:e.extend({},e.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{}),clone:t.cloneSearchRowOnAdd});e(".ui-widget-overlay","#"+n).remove();l.p.direction=="rtl"&&e(".ui-closer","#"+n).css("float","left");if(t.drag===true){e("#"+n+" table thead tr:first td:first").css("cursor","move");if(jQuery.fn.jqDrag)e("#"+n).jqDrag(e("#"+n+" table thead tr:first td:first"));else try{e("#"+n).draggable({handle:e("#"+n+" table thead tr:first td:first")})}catch(e){}}if(t.multipleSearch===false){e(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+n).hide();e("select[name='groupOp']","#"+n).hide()}t.multipleSearch===true&&t.loadDefaults===true&&i(l,t);e.isFunction(t.onInitializeSearch)&&t.onInitializeSearch(e("#"+n));e.isFunction(t.beforeShowSearch)&&t.beforeShowSearch(e("#"+n));a();e.isFunction(t.afterShowSearch)&&t.afterShowSearch(e("#"+n));t.closeOnEscape===true&&e("#"+n).keydown(function(t){t.which==27&&r(e("#"+n))})}}}}})},editGridRow:function(i,r){t=r=e.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true},e.jgrid.edit,r||{});return this.each(function(){function a(){e(".FormElement","#"+g).each(function(){var t=e(".customelement",this);if(t.length){var i=e(t[0]).attr("name");e.each(p.p.colModel,function(){if(this.name==i&&this.editoptions&&e.isFunction(this.editoptions.custom_value)){try{_[i]=this.editoptions.custom_value(e("#"+i,"#"+g),"get");if(_[i]===undefined)throw"e1"}catch(t){t=="e1"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,t.message,jQuery.jgrid.edit.bClose)}return true}})}else{switch(e(this).get(0).type){case"checkbox":if(e(this).attr("checked"))_[this.name]=e(this).val();else{t=e(this).attr("offval");_[this.name]=t}break;case"select-one":_[this.name]=e("option:selected",this).val();D[this.name]=e("option:selected",this).text();break;case"select-multiple":_[this.name]=e(this).val();_[this.name]=_[this.name]?_[this.name].join(","):"";var r=[];e("option:selected",this).each(function(t,i){r[t]=e(i).text()});D[this.name]=r.join(",");break;case"password":case"text":case"textarea":case"button":_[this.name]=e(this).val();break}if(p.p.autoencode)_[this.name]=e.jgrid.htmlEncode(_[this.name])}});return true}function s(i,r,a,s){for(var o,l,n,d=0,u,c,f,h=[],g=false,m="",b=1;b<=s;b++)m+="<td class="CaptionTD ui-widget-content">&#160;<td class="DataTD ui-widget-content" style="white-space:pre">&#160;</td>";if(i!="_empty")g=e(r).jqGrid("getInd",i);e(r.p.colModel).each(function(b){o=this.name;c=(l=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";if(o!=="cb"&&o!=="subgrid"&&this.editable===true&&o!=="rn"){if(g===false)u="";else if(o==r.p.ExpandColumn&&r.p.treeGrid===true)u=e("td:eq("+b+")",r.rows[g]).text();else try{u=e.unformat(e("td:eq("+b+")",r.rows[g]),{rowId:i,colModel:this},b)}catch(t){u=e("td:eq("+b+")",r.rows[g]).html()}var v=e.extend({},this.editoptions||{},{id:o,name:o}),w=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),y=parseInt(w.rowpos,10)||d+1,j=parseInt((parseInt(w.colpos,10)||1)*2,10);if(i=="_empty"&&v.defaultValue)u=e.isFunction(v.defaultValue)?v.defaultValue():v.defaultValue;if(!this.edittype)this.edittype="text";if(p.p.autoencode)u=e.jgrid.htmlDecode(u);f=createEl(this.edittype,v,u,false,e.extend({},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));if(u===""&&this.edittype=="checkbox")u=e(f).attr("offval");if(u===""&&this.edittype=="select")u=e("option:eq(0)",f).text();if(t.checkOnSubmit||t.checkOnUpdate)t._savedData[o]=u;e(f).addClass("FormElement");n=e(a).find("tr[rowpos="+y+"]");if(w.rowabove){v=e("<tr><td class="contentinfo" colspan=""+s*2+"">"+w.rowcontent+"</td></tr>");e(a).append(v);v[0].rp=y}if(n.length===0){n=e("<tr "+c+"="" rowpos=""+y+""></tr>").addClass("FormData").attr("id","tr_"+o);e(n).append(m);e(a).append(n);n[0].rp=y}e("td:eq("+(j-2)+")",n[0]).html(typeof w.label==="undefined"?r.p.colNames[b]:w.label);e("td:eq("+(j-1)+")",n[0]).append(w.elmprefix).append(f).append(w.elmsuffix);h[d]=b;d++}});if(d>0){b=e("<tr class="FormData" style="display:none"><td class="CaptionTD"></td><td colspan=""+(s*2-1)+"" class="DataTD"><input class="FormElement" id="id_g" type="text" name=""+r.p.id+"_id" value=""+i+""></td></tr>");b[0].rp=d+999;e(a).append(b);if(t.checkOnSubmit||t.checkOnUpdate)t._savedData[r.p.id+"_id"]=i}return h}function o(i,r,a){var s,o=0,l,n,d,u,c;if(t.checkOnSubmit||t.checkOnUpdate){t._savedData={};t._savedData[r.p.id+"_id"]=i}var f=r.p.colModel;if(i=="_empty"){e(f).each(function(){s=this.name;d=e.extend({},this.editoptions||{});n=e("#"+e.jgrid.jqID(s),"#"+a);if(n[0]!=null){u="";if(d.defaultValue){u=e.isFunction(d.defaultValue)?d.defaultValue():d.defaultValue;if(n[0].type=="checkbox"){c=u.toLowerCase();if(c.search(/(false|0|no|off|undefined)/i)<0&&c!==""){n[0].checked=true;n[0].defaultchecked=true;n[0].value=u}else n.attr({checked:"",defaultchecked:""})}else="" n.val(u)}else="" if(n[0].type="="checkbox"){n[0].checked=false;n[0].defaultChecked=false;u=e(n).attr("offval")}else" if(n[0].type&&n[0].type.substr(0,6)="="select")n[0].selectedIndex=0;else" n.val(u);if(t.checkonsubmit="==true||t.checkOnUpdate)t._savedData[s]=u}});e("#id_g","#"+a).val(i)}else{var" h="e(r).jqGrid("getInd",i,true);if(h){e("td",h).each(function(n){s=f[n].name;if(s!=="cb"&&s!=="subgrid"&&s!=="rn"&&f[n].editable===true){if(s==r.p.ExpandColumn&&r.p.treeGrid===true)l=e(this).text();else" try{l="e.unformat(e(this),{rowId:i,colModel:f[n]},n)}catch(t){l=e(this).html()}if(p.p.autoencode)l=e.jgrid.htmlDecode(l);if(t.checkOnSubmit===true||t.checkOnUpdate)t._savedData[s]=l;s=e.jgrid.jqID(s);switch(f[n].edittype){case"password":case"text":case"button":case"image":e("#"+s,"#"+a).val(l);break;case"textarea":if(l=="&nbsp;"||l=="&#160;"||l.length==1&&l.charCodeAt(0)==160)l="";e("#"+s,"#"+a).val(l);break;case"select":var" d="l.split(",");d=e.map(d,function(t){return" e.trim(t)});e("#"+s+"="" option","#"+a).each(function(){this.selected="!f[n].editoptions.multiple&&(d[0]==e.trim(e(this).text())||d[0]==e.trim(e(this).val()))?true:f[n].editoptions.multiple?e.inArray(e.trim(e(this).text()),d)">-1||e.inArray(e.trim(e(this).val()),d)>-1?true:false:false});break;case"checkbox":l+="";if(f[n].editoptions&&f[n].editoptions.value)if(f[n].editoptions.value.split(":")[0]==l){e("#"+s,"#"+a).attr("checked",true);e("#"+s,"#"+a).attr("defaultChecked",true)}else{e("#"+s,"#"+a).attr("checked",false);e("#"+s,"#"+a).attr("defaultChecked","")}else{l=l.toLowerCase();if(l.search(/(false|0|no|off|undefined)/i)<0&&l!==""){e("#"+s,"#"+a).attr("checked",true);e("#"+s,"#"+a).attr("defaultchecked",true)}else{e("#"+s,"#"+a).attr("checked",false);e("#"+s,"#"+a).attr("defaultchecked","")}}break;case"custom":try{if(f[n].editoptions&&e.isfunction(f[n].editoptions.custom_value))f[n].editoptions.custom_value(e("#"+s,"#"+a),"set",l);else throw"e1"}catch(t){t="="e1"?info_dialog(jQuery.jgrid.errors.errcap,"function" 'custom_value'="" "+e.jgrid.edit.msg.nodefined,jquery.jgrid.edit.bclose):info_dialog(jquery.jgrid.errors.errcap,t.message,jquery.jgrid.edit.bclose)}break}o++}});o="">0&&e("#id_g","#"+g).val(i)}}}function l(){var i=[true,"",""],a={},s=p.p.prmNames,l,n;if(e.isFunction(t.beforeCheckValues)){var d=t.beforeCheckValues(_,e("#"+h),_[p.p.id+"_id"]=="_empty"?s.addoper:s.editoper);if(d&&typeof d==="object")_=d}for(var u in _)if(_.hasOwnProperty(u)){i=checkValues(_[u],u,p);if(i[0]===false)break}if(i[0]){if(e.isFunction(t.onclickSubmit))a=t.onclickSubmit(t,_)||{};if(e.isFunction(t.beforeSubmit))i=t.beforeSubmit(_,e("#"+h))}if(i[0]&&!t.processing){t.processing=true;e("#sData","#"+g+"_2").addClass("ui-state-active");n=s.oper;l=s.id;_[n]=e.trim(_[p.p.id+"_id"])=="_empty"?s.addoper:s.editoper;if(_[n]!=s.addoper)_[l]=_[p.p.id+"_id"];else if(_[l]===undefined)_[l]=_[p.p.id+"_id"];delete _[p.p.id+"_id"];_=e.extend(_,t.editData,a);a=e.extend({url:t.url?t.url:e(p).jqGrid("getGridParam","editurl"),type:t.mtype,data:e.isFunction(t.serializeEditData)?t.serializeEditData(_):_,complete:function(a,d){if(d!="success"){i[0]=false;i[1]=e.isFunction(t.errorTextFormat)?t.errorTextFormat(a):d+" Status: '"+a.statusText+"'. Error code: "+a.status}else if(e.isFunction(t.afterSubmit))i=t.afterSubmit(a,_);if(i[0]===false){e("#FormError>td","#"+g).html(i[1]);e("#FormError","#"+g).show()}else{e.each(p.p.colModel,function(){if(D[this.name]&&this.formatter&&this.formatter=="select")try{delete D[this.name]}catch(e){}});_=e.extend(_,D);p.p.autoencode&&e.each(_,function(t,i){_[t]=e.jgrid.htmlDecode(i)});t.reloadAfterSubmit=t.reloadAfterSubmit&&p.p.datatype!="local";if(_[n]==s.addoper){i[2]||(i[2]=parseInt(p.p.records,10)+1+"");_[l]=i[2];if(t.closeAfterAdd){if(t.reloadAfterSubmit)e(p).trigger("reloadGrid");else{e(p).jqGrid("addRowData",i[2],_,r.addedrow);e(p).jqGrid("setSelection",i[2])}hideModal("#"+m.themodal,{gb:"#gbox_"+f,jqm:r.jqModal,onClose:t.onClose})}else if(t.clearAfterAdd){t.reloadAfterSubmit?e(p).trigger("reloadGrid"):e(p).jqGrid("addRowData",i[2],_,r.addedrow);o("_empty",p,h)}else t.reloadAfterSubmit?e(p).trigger("reloadGrid"):e(p).jqGrid("addRowData",i[2],_,r.addedrow)}else{if(t.reloadAfterSubmit){e(p).trigger("reloadGrid");t.closeAfterEdit||setTimeout(function(){e(p).jqGrid("setSelection",_[l])},1e3)}else p.p.treeGrid===true?e(p).jqGrid("setTreeRow",_[l],_):e(p).jqGrid("setRowData",_[l],_);t.closeAfterEdit&&hideModal("#"+m.themodal,{gb:"#gbox_"+f,jqm:r.jqModal,onClose:t.onClose})}if(e.isFunction(t.afterComplete)){j=a;setTimeout(function(){t.afterComplete(j,_,e("#"+h));j=null},500)}}t.processing=false;if(t.checkOnSubmit||t.checkOnUpdate){e("#"+h).data("disabled",false);if(t._savedData[p.p.id+"_id"]!="_empty")for(var u in t._savedData)if(_[u])t._savedData[u]=_[u]}e("#sData","#"+g+"_2").removeClass("ui-state-active");try{e(":input:visible","#"+h)[0].focus()}catch(e){}},error:function(i,r,a){e("#FormError>td","#"+g).html(r+" : "+a);e("#FormError","#"+g).show();t.processing=false;e("#"+h).data("disabled",false);e("#sData","#"+g+"_2").removeClass("ui-state-active")}},e.jgrid.ajaxOptions,t.ajaxEditOptions);if(!a.url&&!t.useDataProxy)if(e.isFunction(p.p.dataProxy))t.useDataProxy=true;else{i[0]=false;i[1]+=" "+e.jgrid.errors.nourl}if(i[0])t.useDataProxy?p.p.dataProxy.call(p,a,"set_"+p.p.id):e.ajax(a)}if(i[0]===false){e("#FormError>td","#"+g).html(i[1]);e("#FormError","#"+g).show()}}function n(e,t){var i=false,r;for(r in e)if(e[r]!=t[r]){i=true;break}return i}function d(){var i=true;e("#FormError","#"+g).hide();if(t.checkOnUpdate){_={};D={};a();q=e.extend({},_,D);if(k=n(q,t._savedData)){e("#"+h).data("disabled",true);e(".confirm","#"+m.themodal).show();i=false}}return i}function u(t,i){t===0?e("#pData","#"+g+"_2").addClass("ui-state-disabled"):e("#pData","#"+g+"_2").removeClass("ui-state-disabled");t==i?e("#nData","#"+g+"_2").addClass("ui-state-disabled"):e("#nData","#"+g+"_2").removeClass("ui-state-disabled")}function c(){var t=e(p).jqGrid("getDataIDs"),i=e("#id_g","#"+g).val();return[e.inArray(i,t),t]}var p=this;if(p.grid&&i){var f=p.p.id,h="FrmGrid_"+f,g="TblGrid_"+f,m={themodal:"editmod"+f,modalhead:"edithd"+f,modalcontent:"editcnt"+f,scrollelm:h},b=e.isFunction(t.beforeShowForm)?t.beforeShowForm:false,v=e.isFunction(t.afterShowForm)?t.afterShowForm:false,w=e.isFunction(t.beforeInitData)?t.beforeInitData:false,y=e.isFunction(t.onInitializeForm)?t.onInitializeForm:false,j=null,x=1,C=0,_,D,q,k;if(i=="new"){i="_empty";r.caption=r.addCaption}else r.caption=r.editCaption;r.recreateForm===true&&e("#"+m.themodal).html()!=null&&e("#"+m.themodal).remove();var G=true;if(r.checkOnUpdate&&r.jqModal&&!r.modal)G=false;if(e("#"+m.themodal).html()!=null){e(".ui-jqdialog-title","#"+m.modalhead).html(r.caption);e("#FormError","#"+g).hide();if(t.topinfo){e(".topinfo","#"+g+"_2").html(t.topinfo);e(".tinfo","#"+g+"_2").show()}else e(".tinfo","#"+g+"_2").hide();if(t.bottominfo){e(".bottominfo","#"+g+"_2").html(t.bottominfo);e(".binfo","#"+g+"_2").show()}else e(".binfo","#"+g+"_2").hide();w&&w(e("#"+h));o(i,p,h);i=="_empty"||!t.viewPagerButtons?e("#pData, #nData","#"+g+"_2").hide():e("#pData, #nData","#"+g+"_2").show();if(t.processing===true){t.processing=false;e("#sData","#"+g+"_2").removeClass("ui-state-active")}if(e("#"+h).data("disabled")===true){e(".confirm","#"+m.themodal).hide();e("#"+h).data("disabled",false)}b&&b(e("#"+h));e("#"+m.themodal).data("onClose",t.onClose);viewModal("#"+m.themodal,{gbox:"#gbox_"+f,jqm:r.jqModal,jqM:false,closeoverlay:G,modal:r.modal});G||e(".jqmOverlay").click(function(){if(!d())return false;hideModal("#"+m.themodal,{gb:"#gbox_"+f,jqm:r.jqModal,onClose:t.onClose});return false});v&&v(e("#"+h))}else{e(p.p.colModel).each(function(){var e=this.formoptions;x=Math.max(x,e?e.colpos||0:0);C=Math.max(C,e?e.rowpos||0:0)});var F=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px";F=e("<form name="FormPost" id=""+h+"" class="FormGrid" onsubmit="return false;" style="width:100%;overflow:auto;position:relative;height:"+F+";"></form>").data("disabled",false);var M=e("<table id=""+g+"" class="EditTable" cellspacing="0" cellpading="0" border="0"><tbody></tbody></table>");e(F).append(M);var S=e("<tr id="FormError" style="display:none"><td class="ui-state-error" colspan=""+x*2+""></td></tr>");S[0].rp=0;e(M).append(S);S=e("<tr style="display:none" class="tinfo"><td class="topinfo" colspan=""+x*2+"">"+t.topinfo+"</td></tr>");S[0].rp=0;e(M).append(S);w&&w(e("#"+h));S=(w=p.p.direction=="rtl"?true:false)?"nData":"pData";var R=w?"pData":"nData";s(i,p,M,x);S="<a href="javascript:void(0)" id=""+S+"" class="fm-button ui-state-default ui-corner-left" target="_blank" rel="external"><span class="ui-icon ui-icon-triangle-1-w"></span>";R="<a href="javascript:void(0)" id=""+R+"" class="fm-button ui-state-default ui-corner-right" target="_blank" rel="external"><span class="ui-icon ui-icon-triangle-1-e"></span>";var I="<a href="javascript:void(0)" id="sData" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+r.bSubmit+"</a>",T="<a href="javascript:void(0)" id="cData" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+r.bCancel+"</a>";S="<table border="0" class="EditTable" id=""+g+"_2"><tbody><tr id="Act_Buttons"><td class="navButton ui-widget-content">"+(w?R+S:S+R)+"</td><td class="EditButton ui-widget-content">"+I+T+"</td></tr>";S+="<tr style="display:none" class="binfo"><td class="bottominfo" colspan="2">"+t.bottominfo+"</td></tr>";S+="</tbody></table>";if(C>0){var Q=[];e.each(e(M)[0].rows,function(e,t){Q[e]=t});Q.sort(function(e,t){if(e.rp>t.rp)return 1;if(e.rp<t.rp)return-1;return 0})="" ;e.each(q,function(t,i){e("tbody",m).append(i)})}r.gbox="#gbox_" +f;var="" n="false;if(r.closeOnEscape===true){r.closeOnEscape=false;N=true}F=e("<span">").append(F).append(S);createModal(m,F,r,"#gview_"+p.p.id,e("#gbox_"+p.p.id)[0]);if(w){e("#pData, #nData","#"+g+"_2").css("float","right");e(".EditButton","#"+g+"_2").css("text-align","left")}t.topinfo&&e(".tinfo","#"+g+"_2").show();t.bottominfo&&e(".binfo","#"+g+"_2").show();S=F=null;e("#"+m.themodal).keydown(function(i){var a=i.target;if(e("#"+h).data("disabled")===true)return false;if(t.savekey[0]===true&&i.which==t.savekey[1])if(a.tagName!="TEXTAREA"){e("#sData","#"+g+"_2").trigger("click");return false}if(i.which===27){if(!d())return false;N&&hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:t.onClose});return false}if(t.navkeys[0]===true){if(e("#id_g","#"+g).val()=="_empty")return true;if(i.which==t.navkeys[1]){e("#pData","#"+g+"_2").trigger("click");return false}if(i.which==t.navkeys[2]){e("#nData","#"+g+"_2").trigger("click");return false}}});if(r.checkOnUpdate){e("a.ui-jqdialog-titlebar-close span","#"+m.themodal).removeClass("jqmClose");e("a.ui-jqdialog-titlebar-close","#"+m.themodal).unbind("click").click(function(){if(!d())return false;hideModal("#"+m.themodal,{gb:"#gbox_"+f,jqm:r.jqModal,onClose:t.onClose});return false})}r.saveicon=e.extend([true,"left","ui-icon-disk"],r.saveicon);r.closeicon=e.extend([true,"left","ui-icon-close"],r.closeicon);if(r.saveicon[0]===true)e("#sData","#"+g+"_2").addClass(r.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class="ui-icon "+r.saveicon[2]+""></span>");if(r.closeicon[0]===true)e("#cData","#"+g+"_2").addClass(r.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class="ui-icon "+r.closeicon[2]+""></span>");if(t.checkOnSubmit||t.checkOnUpdate){I="<a href="javascript:void(0)" id="sNew" class="fm-button ui-state-default ui-corner-all" style="z-index:1002" target="_blank" rel="external">"+r.bYes+"</a>";R="<a href="javascript:void(0)" id="nNew" class="fm-button ui-state-default ui-corner-all" style="z-index:1002" target="_blank" rel="external">"+r.bNo+"</a>";T="<a href="javascript:void(0)" id="cNew" class="fm-button ui-state-default ui-corner-all" style="z-index:1002" target="_blank" rel="external">"+r.bExit+"</a>";F=r.zIndex||999;F++;e("<div class="ui-widget-overlay jqgrid-overlay confirm" style="z-index:"+F+";display:none;">&#160;"+(e.browser.msie&&e.browser.version==6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"")+"</div><div class="confirm ui-widget-content ui-jqconfirm" style="z-index:"+(F+1)+"">"+r.saveData+"<br><br>"+I+R+T+"</div>").insertAfter("#"+h);e("#sNew","#"+m.themodal).click(function(){l();e("#"+h).data("disabled",false);e(".confirm","#"+m.themodal).hide();return false});e("#nNew","#"+m.themodal).click(function(){e(".confirm","#"+m.themodal).hide();e("#"+h).data("disabled",false);setTimeout(function(){e(":input","#"+h)[0].focus()},0);return false});e("#cNew","#"+m.themodal).click(function(){e(".confirm","#"+m.themodal).hide();e("#"+h).data("disabled",false);hideModal("#"+m.themodal,{gb:"#gbox_"+f,jqm:r.jqModal,onClose:t.onClose});return false})}y&&y(e("#"+h));i=="_empty"||!t.viewPagerButtons?e("#pData,#nData","#"+g+"_2").hide():e("#pData,#nData","#"+g+"_2").show();b&&b(e("#"+h));e("#"+m.themodal).data("onClose",t.onClose);viewModal("#"+m.themodal,{gbox:"#gbox_"+f,jqm:r.jqModal,closeoverlay:G,modal:r.modal});G||e(".jqmOverlay").click(function(){if(!d())return false;hideModal("#"+m.themodal,{gb:"#gbox_"+f,jqm:r.jqModal,onClose:t.onClose});return false});v&&v(e("#"+h));e(".fm-button","#"+m.themodal).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});e("#sData","#"+g+"_2").click(function(){_={};D={};e("#FormError","#"+g).hide();a();if(_[p.p.id+"_id"]=="_empty")l();else if(r.checkOnSubmit===true){q=e.extend({},_,D);if(k=n(q,t._savedData)){e("#"+h).data("disabled",true);e(".confirm","#"+m.themodal).show()}else l()}else l();return false});e("#cData","#"+g+"_2").click(function(){if(!d())return false;hideModal("#"+m.themodal,{gb:"#gbox_"+f,jqm:r.jqModal,onClose:t.onClose});return false});e("#nData","#"+g+"_2").click(function(){if(!d())return false;e("#FormError","#"+g).hide();var t=c();t[0]=parseInt(t[0],10);if(t[0]!=-1&&t[1][t[0]+1]){e.isFunction(r.onclickPgButtons)&&r.onclickPgButtons("next",e("#"+h),t[1][t[0]]);o(t[1][t[0]+1],p,h);e(p).jqGrid("setSelection",t[1][t[0]+1]);e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons("next",e("#"+h),t[1][t[0]+1]);u(t[0]+1,t[1].length-1)}return false});e("#pData","#"+g+"_2").click(function(){if(!d())return false;e("#FormError","#"+g).hide();var t=c();if(t[0]!=-1&&t[1][t[0]-1]){e.isFunction(r.onclickPgButtons)&&r.onclickPgButtons("prev",e("#"+h),t[1][t[0]]);o(t[1][t[0]-1],p,h);e(p).jqGrid("setSelection",t[1][t[0]-1]);e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons("prev",e("#"+h),t[1][t[0]-1]);u(t[0]-1,t[1].length-1)}return false})}b=c();u(b[0],b[1].length-1)}})},viewGridRow:function(t,i){i=e.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,viewPagerButtons:true},e.jgrid.view,i||{});return this.each(function(){function r(){if(i.closeOnEscape===true||i.navkeys[0]===true)setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+p.modalhead).focus()},0)}function a(t,r,a,s){for(var o,l,n,d=0,u,c,p=[],f=false,h="<td class="CaptionTD form-view-label ui-widget-content" width=""+i.labelswidth+"">&#160;</td><td class="DataTD form-view-data ui-helper-reset ui-widget-content">&#160;</td>",g="",m=["integer","number","currency"],b=0,v=0,w,y,j,x=1;x<=s;x++)g+=x==1?h:"<td class="CaptionTD form-view-label ui-widget-content">&#160;<td class="DataTD form-view-data ui-widget-content">&#160;</td>";e(r.p.colModel).each(function(){l=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false;if(!l&&this.align==="right")if(this.formatter&&e.inArray(this.formatter,m)!==-1)b=Math.max(b,parseInt(this.width,10));else v=Math.max(v,parseInt(this.width,10))});w=b!==0?b:v!==0?v:0;f=e(r).jqGrid("getInd",t);e(r.p.colModel).each(function(t){o=this.name;y=false;c=(l=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";j=typeof this.viewable!="boolean"?true:this.viewable;if(o!=="cb"&&o!=="subgrid"&&o!=="rn"&&j){u=f===false?"":o==r.p.ExpandColumn&&r.p.treeGrid===true?e("td:eq("+t+")",r.rows[f]).text():e("td:eq("+t+")",r.rows[f]).html();y=this.align==="right"&&w!==0?true:false;e.extend({},this.editoptions||{},{id:o,name:o});var i=e.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),h=parseInt(i.rowpos,10)||d+1,m=parseInt((parseInt(i.colpos,10)||1)*2,10);if(i.rowabove){var b=e("<tr><td class="contentinfo" colspan=""+s*2+"">"+i.rowcontent+"</td></tr>");e(a).append(b);b[0].rp=h}n=e(a).find("tr[rowpos="+h+"]");if(n.length===0){n=e("<tr "+c+"="" rowpos=""+h+""></tr>").addClass("FormData").attr("id","trv_"+o);e(n).append(g);e(a).append(n);n[0].rp=h}e("td:eq("+(m-2)+")",n[0]).html("<b>"+(typeof i.label==="undefined"?r.p.colNames[t]:i.label)+"</b>");e("td:eq("+(m-1)+")",n[0]).append("<span>"+u+"</span>").attr("id","v_"+o);y&&e("td:eq("+(m-1)+") span",n[0]).css({"text-align":"right",width:w+"px"});p[d]=t;d++}});if(d>0){t=e("<tr class="FormData" style="display:none"><td class="CaptionTD"></td><td colspan=""+(s*2-1)+"" class="DataTD"><input class="FormElement" id="id_g" type="text" name="id" value=""+t+""></td></tr>");t[0].rp=d+99;e(a).append(t)}return p}function s(t,i){var r,a,s=0,o,l;if(l=e(i).jqGrid("getInd",t,true)){e("td",l).each(function(t){r=i.p.colModel[t].name;a=i.p.colModel[t].editrules&&i.p.colModel[t].editrules.edithidden===true?false:i.p.colModel[t].hidden===true?true:false;if(r!=="cb"&&r!=="subgrid"&&r!=="rn"){o=r==i.p.ExpandColumn&&i.p.treeGrid===true?e(this).text():e(this).html();e.extend({},i.p.colModel[t].editoptions||{});r=e.jgrid.jqID("v_"+r);e("#"+r+" span","#"+c).html(o);a&&e("#"+r,"#"+c).parents("tr:first").hide();s++}});s>0&&e("#id_g","#"+c).val(t)}}function o(t,i){t===0?e("#pData","#"+c+"_2").addClass("ui-state-disabled"):e("#pData","#"+c+"_2").removeClass("ui-state-disabled");t==i?e("#nData","#"+c+"_2").addClass("ui-state-disabled"):e("#nData","#"+c+"_2").removeClass("ui-state-disabled")}function l(){var t=e(n).jqGrid("getDataIDs"),i=e("#id_g","#"+c).val();return[e.inArray(i,t),t]}var n=this;if(n.grid&&t){if(!i.imgpath)i.imgpath=n.p.imgpath;var d=n.p.id,u="ViewGrid_"+d,c="ViewTbl_"+d,p={themodal:"viewmod"+d,modalhead:"viewhd"+d,modalcontent:"viewcnt"+d,scrollelm:u},f=1,h=0;if(e("#"+p.themodal).html()!=null){e(".ui-jqdialog-title","#"+p.modalhead).html(i.caption);e("#FormError","#"+c).hide();s(t,n);e.isFunction(i.beforeShowForm)&&i.beforeShowForm(e("#"+u));viewModal("#"+p.themodal,{gbox:"#gbox_"+d,jqm:i.jqModal,jqM:false,modal:i.modal});r()}else{e(n.p.colModel).each(function(){var e=this.formoptions;f=Math.max(f,e?e.colpos||0:0);h=Math.max(h,e?e.rowpos||0:0)});var g=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",m=e("<form name="FormPost" id=""+u+"" class="FormGrid" style="width:100%;overflow:auto;position:relative;height:"+g+";"></form>"),b=e("<table id=""+c+"" class="EditTable" cellspacing="1" cellpading="2" border="0" style="table-layout:fixed"><tbody></tbody></table>");e(m).append(b);a(t,n,b,f);g=n.p.direction=="rtl"?true:false;var v="<a href="javascript:void(0)" id=""+(g?"nData":"pData")+"" class="fm-button ui-state-default ui-corner-left" target="_blank" rel="external"><span class="ui-icon ui-icon-triangle-1-w"></span>",w="<a href="javascript:void(0)" id=""+(g?"pData":"nData")+"" class="fm-button ui-state-default ui-corner-right" target="_blank" rel="external"><span class="ui-icon ui-icon-triangle-1-e"></span>",y="<a href="javascript:void(0)" id="cData" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+i.bClose+"</a>";if(h>0){var j=[];e.each(e(b)[0].rows,function(e,t){j[e]=t});j.sort(function(e,t){if(e.rp>t.rp)return 1;if(e.rp<t.rp)return-1;return 0});e.each(j,function(t,i){e("tbody",b).append(i)})}i.gbox="#gbox_" +d;var="" x="false;if(i.closeOnEscape===true){i.closeOnEscape=false;x=true}m=e("<span">").append(m).append("<table border="0" class="EditTable" id=""+c+"_2"><tbody><tr id="Act_Buttons"><td class="navButton ui-widget-content" width=""+i.labelswidth+"">"+(g?w+v:v+w)+"</td><td class="EditButton ui-widget-content">"+y+"</td></tr></tbody></table>");createModal(p,m,i,"#gview_"+n.p.id,e("#gview_"+n.p.id)[0]);if(g){e("#pData, #nData","#"+c+"_2").css("float","right");e(".EditButton","#"+c+"_2").css("text-align","left")}i.viewPagerButtons||e("#pData, #nData","#"+c+"_2").hide();m=null;e("#"+p.themodal).keydown(function(t){if(t.which===27){x&&hideModal(this,{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose});return false}if(i.navkeys[0]===true){if(t.which===i.navkeys[1]){e("#pData","#"+c+"_2").trigger("click");return false}if(t.which===i.navkeys[2]){e("#nData","#"+c+"_2").trigger("click");return false}}});i.closeicon=e.extend([true,"left","ui-icon-close"],i.closeicon);if(i.closeicon[0]===true)e("#cData","#"+c+"_2").addClass(i.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class="ui-icon "+i.closeicon[2]+""></span>");e.isFunction(i.beforeShowForm)&&i.beforeShowForm(e("#"+u));viewModal("#"+p.themodal,{gbox:"#gbox_"+d,jqm:i.jqModal,modal:i.modal});e(".fm-button:not(.ui-state-disabled)","#"+c+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});r();e("#cData","#"+c+"_2").click(function(){hideModal("#"+p.themodal,{gb:"#gbox_"+d,jqm:i.jqModal,onClose:i.onClose});return false});e("#nData","#"+c+"_2").click(function(){e("#FormError","#"+c).hide();var t=l();t[0]=parseInt(t[0],10);if(t[0]!=-1&&t[1][t[0]+1]){e.isFunction(i.onclickPgButtons)&&i.onclickPgButtons("next",e("#"+u),t[1][t[0]]);s(t[1][t[0]+1],n);e(n).jqGrid("setSelection",t[1][t[0]+1]);e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons("next",e("#"+u),t[1][t[0]+1]);o(t[0]+1,t[1].length-1)}r();return false});e("#pData","#"+c+"_2").click(function(){e("#FormError","#"+c).hide();var t=l();if(t[0]!=-1&&t[1][t[0]-1]){e.isFunction(i.onclickPgButtons)&&i.onclickPgButtons("prev",e("#"+u),t[1][t[0]]);s(t[1][t[0]-1],n);e(n).jqGrid("setSelection",t[1][t[0]-1]);e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons("prev",e("#"+u),t[1][t[0]-1]);o(t[0]-1,t[1].length-1)}r();return false})}g=l();o(g[0],g[1].length-1)}})},delGridRow:function(i,r){t=r=e.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},e.jgrid.del,r||{});return this.each(function(){var a=this;if(a.grid)if(i){var s=typeof r.beforeShowForm==="function"?true:false,o=typeof r.afterShowForm==="function"?true:false,l=a.p.id,n={},d="DelTbl_"+l,u,c,p,f,h={themodal:"delmod"+l,modalhead:"delhd"+l,modalcontent:"delcnt"+l,scrollelm:d};if(jQuery.isArray(i))i=i.join();if(e("#"+h.themodal).html()!=null){e("#DelData>td","#"+d).text(i);e("#DelError","#"+d).hide();if(t.processing===true){t.processing=false;e("#dData","#"+d).removeClass("ui-state-active")}s&&r.beforeShowForm(e("#"+d));viewModal("#"+h.themodal,{gbox:"#gbox_"+l,jqm:r.jqModal,jqM:false,modal:r.modal})}else{var g=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px";g="<div id=""+d+"" class="formdata" style="width:100%;overflow:auto;position:relative;height:"+g+";">";g+="<table class="DelTable"><tbody>";g+="<tr id="DelError" style="display:none"><td class="ui-state-error"></td></tr>";g+="<tr id="DelData" style="display:none"><td>"+i+"</td></tr>";g+='<tr><td class="delmsg" style="white-space:pre;">'+r.msg+"</td></tr><tr><td>&#160;</td></tr>";g+="</tbody></table></div>";g+="<table cellspacing="0" cellpadding="0" border="0" class="EditTable" id=""+d+"_2"><tbody><tr><td class="DataTD ui-widget-content"></td></tr><tr style="display:block;height:3px;"><td></td></tr><tr><td class="DelButton EditButton">"+("<a href="javascript:void(0)" id="dData" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+r.bSubmit+"</a>")+"&#160;"+("<a href="javascript:void(0)" id="eData" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+r.bCancel+"</a>")+"</td></tr></tbody></table>";r.gbox="#gbox_"+l;createModal(h,g,r,"#gview_"+a.p.id,e("#gview_"+a.p.id)[0]);e(".fm-button","#"+d+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});r.delicon=e.extend([true,"left","ui-icon-scissors"],r.delicon);r.cancelicon=e.extend([true,"left","ui-icon-cancel"],r.cancelicon);if(r.delicon[0]===true)e("#dData","#"+d+"_2").addClass(r.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class="ui-icon "+r.delicon[2]+""></span>");if(r.cancelicon[0]===true)e("#eData","#"+d+"_2").addClass(r.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class="ui-icon "+r.cancelicon[2]+""></span>");e("#dData","#"+d+"_2").click(function(){var i=[true,""];n={};var s=e("#DelData>td","#"+d).text();if(typeof r.onclickSubmit==="function")n=r.onclickSubmit(t,s)||{};if(typeof r.beforeSubmit==="function")i=r.beforeSubmit(s);if(i[0]&&!t.processing){t.processing=true;e(this).addClass("ui-state-active");p=a.p.prmNames;u=e.extend({},t.delData,n);f=p.oper;u[f]=p.deloper;c=p.id;u[c]=s;var o=e.extend({url:t.url?t.url:e(a).jqGrid("getGridParam","editurl"),type:r.mtype,data:e.isFunction(r.serializeDelData)?r.serializeDelData(u):u,complete:function(o,n){if(n!="success"){i[0]=false;i[1]=e.isFunction(t.errorTextFormat)?t.errorTextFormat(o):n+" Status: '"+o.statusText+"'. Error code: "+o.status}else if(typeof t.afterSubmit==="function")i=t.afterSubmit(o,u);if(i[0]===false){e("#DelError>td","#"+d).html(i[1]);e("#DelError","#"+d).show()}else{if(t.reloadAfterSubmit&&a.p.datatype!="local")e(a).trigger("reloadGrid");else{n=[];n=s.split(",");if(a.p.treeGrid===true)try{e(a).jqGrid("delTreeNode",n[0])}catch(e){}else for(var c=0;c<n.length;c++)e(a).jqgrid("delrowdata",n[c]);a.p.selrow=null;a.p.selarrrow=[]}e.isfunction(t.aftercomplete)&&settimeout(function(){t.aftercomplete(o,s)},500)}t.processing=false;e("#ddata","#"+d+"_2").removeclass("ui-state-active");i[0]&&hidemodal("#"+h.themodal,{gb:"#gbox_"+l,jqm:r.jqmodal,onclose:t.onclose})},error:function(i,r,a){e("#delerror>td","#"+d).html(r+" : "+a);e("#DelError","#"+d).show();t.processing=false;e("#dData","#"+d+"_2").removeClass("ui-state-active")}},e.jgrid.ajaxOptions,r.ajaxDelOptions);if(!o.url&&!t.useDataProxy)if(e.isFunction(a.p.dataProxy))t.useDataProxy=true;else{i[0]=false;i[1]+=" "+e.jgrid.errors.nourl}if(i[0])t.useDataProxy?a.p.dataProxy.call(a,o,"del_"+a.p.id):e.ajax(o)}if(i[0]===false){e("#DelError>td","#"+d).html(i[1]);e("#DelError","#"+d).show()}return false});e("#eData","#"+d+"_2").click(function(){hideModal("#"+h.themodal,{gb:"#gbox_"+l,jqm:r.jqModal,onClose:t.onClose});return false});s&&r.beforeShowForm(e("#"+d));viewModal("#"+h.themodal,{gbox:"#gbox_"+l,jqm:r.jqModal,modal:r.modal})}o&&r.afterShowForm(e("#"+d));r.closeOnEscape===true&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+h.modalhead).focus()},0)}})},navGrid:function(t,i,r,a,s,o,l){i=e.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false},e.jgrid.nav,i||{});return this.each(function(){var n={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},d=this,u,c,p;if(!(!d.grid||typeof t!="string")){if(e("#"+n.themodal).html()===null){if(typeof window.innerWidth!="undefined"){u=window.innerWidth;c=window.innerHeight}else if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0){u=document.documentElement.clientWidth;c=document.documentElement.clientHeight}else{u=1024;c=768}createModal(n,"<div>"+i.alerttext+"</div><span tabindex="0"><span tabindex="-1" id="jqg_alrt"></span></span>",{gbox:"#gbox_"+d.p.id,jqModal:true,drag:true,resize:true,caption:i.alertcap,top:c/2-25,left:u/2-100,width:200,height:"auto",closeOnEscape:i.closeOnEscape},"","",true)}u=1;if(i.cloneToTop&&d.p.toppager)u=2;for(c=0;c<u;c++){var f="e("<table" cellspacing="0" cellpadding="0" border="0" class="ui-pg-table navtable" style="float:left;table-layout:auto;"><tbody><tr></tr></tbody>"),h,g;if(c===0){h=t;g=d.p.id;if(h==d.p.toppager){g+="_top";u=1}}else{h=d.p.toppager;g=d.p.id+"_top"}d.p.direction=="rtl"&&e(f).attr("dir","rtl").css("float","right");if(i.add){a=a||{};p=e("<td class="ui-pg-button ui-corner-all"></td>");e(p).append("<div class="ui-pg-div"><span class="ui-icon "+i.addicon+""></span>"+i.addtext+"</div>");e("tr",f).append(p);e(p,f).attr({title:i.addtitle||"",id:a.id||"add_"+g}).click(function(){e(this).hasClass("ui-state-disabled")||(typeof i.addfunc=="function"?i.addfunc():e(d).jqGrid("editGridRow","new",a));return false}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});p=null}if(i.edit){p=e("<td class="ui-pg-button ui-corner-all"></td>");r=r||{};e(p).append("<div class="ui-pg-div"><span class="ui-icon "+i.editicon+""></span>"+i.edittext+"</div>");e("tr",f).append(p);e(p,f).attr({title:i.edittitle||"",id:r.id||"edit_"+g}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=d.p.selrow;if(t)typeof i.editfunc=="function"?i.editfunc(t):e(d).jqGrid("editGridRow",t,r);else{viewModal("#"+n.themodal,{gbox:"#gbox_"+d.p.id,jqm:true});e("#jqg_alrt").focus()}}return false}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});p=null}if(i.view){p=e("<td class="ui-pg-button ui-corner-all"></td>");l=l||{};e(p).append("<div class="ui-pg-div"><span class="ui-icon "+i.viewicon+""></span>"+i.viewtext+"</div>");e("tr",f).append(p);e(p,f).attr({title:i.viewtitle||"",id:l.id||"view_"+g}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=d.p.selrow;if(t)e(d).jqGrid("viewGridRow",t,l);else{viewModal("#"+n.themodal,{gbox:"#gbox_"+d.p.id,jqm:true});e("#jqg_alrt").focus()}}return false}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});p=null}if(i.del){p=e("<td class="ui-pg-button ui-corner-all"></td>");s=s||{};e(p).append("<div class="ui-pg-div"><span class="ui-icon "+i.delicon+""></span>"+i.deltext+"</div>");e("tr",f).append(p);e(p,f).attr({title:i.deltitle||"",id:s.id||"del_"+g}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t;if(d.p.multiselect){t=d.p.selarrrow;if(t.length===0)t=null}else t=d.p.selrow;if(t)"function"==typeof i.delfunc?i.delfunc(t):e(d).jqGrid("delGridRow",t,s);else{viewModal("#"+n.themodal,{gbox:"#gbox_"+d.p.id,jqm:true});e("#jqg_alrt").focus()}}return false}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});p=null}if(i.add||i.edit||i.del||i.view)e("tr",f).append("<td class="ui-pg-button ui-state-disabled" style="width:4px;"><span class="ui-separator"></span></td>");if(i.search){p=e("<td class="ui-pg-button ui-corner-all"></td>");o=o||{};e(p).append("<div class="ui-pg-div"><span class="ui-icon "+i.searchicon+""></span>"+i.searchtext+"</div>");e("tr",f).append(p);e(p,f).attr({title:i.searchtitle||"",id:o.id||"search_"+g}).click(function(){e(this).hasClass("ui-state-disabled")||e(d).jqGrid("searchGrid",o);return false}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});p=null}if(i.refresh){p=e("<td class="ui-pg-button ui-corner-all"></td>");e(p).append("<div class="ui-pg-div"><span class="ui-icon "+i.refreshicon+""></span>"+i.refreshtext+"</div>");e("tr",f).append(p);e(p,f).attr({title:i.refreshtitle||"",id:"refresh_"+g}).click(function(){if(!e(this).hasClass("ui-state-disabled")){e.isFunction(i.beforeRefresh)&&i.beforeRefresh();d.p.search=false;try{e("#fbox_"+d.p.id).searchFilter().reset({reload:false});e.isFunction(d.clearToolbar)&&d.clearToolbar(false)}catch(e){}switch(i.refreshstate){case"firstpage":e(d).trigger("reloadGrid",[{page:1}]);break;case"current":e(d).trigger("reloadGrid",[{current:true}]);break}e.isFunction(i.afterRefresh)&&i.afterRefresh()}return false}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});p=null}p=e(".ui-jqgrid").css("font-size")||"11px";e("body").append("<div id="testpg2" class="ui-jqgrid ui-widget ui-widget-content" style="font-size:"+p+";visibility:hidden;"></div>");p=e(f).clone().appendTo("#testpg2").width();e("#testpg2").remove();e(h+"_"+i.position,h).append(f);if(d.p._nvtd){if(p>d.p._nvtd[0]){e(h+"_"+i.position,h).width(p);d.p._nvtd[0]=p}d.p._nvtd[1]=p}f=p=p=null}}})},navButtonAdd:function(t,i){i=e.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{});return this.each(function(){if(this.grid){if(t.indexOf("#")!==0)t="#"+t;var r=e(".navtable",t)[0],a=this;if(r){var s=e("<td></td>");i.buttonicon.toString().toUpperCase()=="NONE"?e(s).addClass("ui-pg-button ui-corner-all").append("<div class="ui-pg-div">"+i.caption+"</div>"):e(s).addClass("ui-pg-button ui-corner-all").append("<div class="ui-pg-div"><span class="ui-icon "+i.buttonicon+""></span>"+i.caption+"</div>");i.id&&e(s).attr("id",i.id);if(i.position=="first")r.rows[0].cells.length===0?e("tr",r).append(s):e("tr td:eq(0)",r).before(s);else e("tr",r).append(s);e(s,r).attr("title",i.title||"").click(function(t){e(this).hasClass("ui-state-disabled")||e.isFunction(i.onClickButton)&&i.onClickButton.call(a,t);return false}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(t,i){i=e.extend({sepclass:"ui-separator",sepcontent:""},i||{});return this.each(function(){if(this.grid){if(t.indexOf("#")!==0)t="#"+t;var r=e(".navtable",t)[0];if(r){var a="<td class="ui-pg-button ui-state-disabled" style="width:4px;"><span class=""+i.sepclass+""></span>"+i.sepcontent+"</td>";e("tr",r).append(a)}}})},GridToForm:function(t,i){return this.each(function(){var r=this;if(r.grid){var a=e(r).jqGrid("getRowData",t);if(a)for(var s in a)e("[name="+s+"]",i).is("input:radio")||e("[name="+s+"]",i).is("input:checkbox")?e("[name="+s+"]",i).each(function(){e(this).val()==a[s]?e(this).attr("checked","checked"):e(this).attr("checked","")}):e("[name="+s+"]",i).val(a[s])}})},FormToGrid:function(t,i,r,a){return this.each(function(){var s=this;if(s.grid){r||(r="set");a||(a="first");var o=e(i).serializeArray(),l={};e.each(o,function(e,t){l[t.name]=t.value});if(r=="add")e(s).jqGrid("addRowData",t,l,a);else r=="set"&&e(s).jqGrid("setRowData",t,l)}})}})})(jQuery);jQuery.fn.searchFilter=function(e,t){function i(e,t,i){this.$=e;this.add=function(t){t==null?e.find(".ui-add-last").click():e.find(".sf:eq("+t+") .ui-add").click();return this};this.del=function(t){t==null?e.find(".sf:last .ui-del").click():e.find(".sf:eq("+t+") .ui-del").click();return this};this.search=function(){e.find(".ui-search").click();return this};this.reset=function(t){if(t===undefined)t=false;e.find(".ui-reset").trigger("click",[t]);return this};this.close=function(){e.find(".ui-closer").click();return this};if(t!=null){function r(){jQuery(this).toggleClass("ui-state-hover");return false}function a(e){jQuery(this).toggleClass("ui-state-active",e.type=="mousedown");return false}function s(e,t){return"<option value=""+e+"">"+t+"</option>"}function o(e,t,i){return"<select class=""+e+"" "+(i?"="" style="display:none;" ":"")+"="">"+t+"</select>"}function l(t,i){t=e.find("tr.sf td.data "+t);t[0]!=null&&i(t)}function n(t,i){var r=e.find("tr.sf td.data "+t);r[0]!=null&&jQuery.each(i,function(){this.data!=null?r.bind(this.type,this.data,this.fn):r.bind(this.type,this.fn)})}var d=jQuery.extend({},jQuery.fn.searchFilter.defaults,i),u=-1,c="";jQuery.each(d.groupOps,function(){c+=s(this.op,this.text)});c="<select name="groupOp">"+c+"</select>";e.html("").addClass("ui-searchFilter").append("<div class="ui-widget-overlay" style="z-index: -1">&#160;</div><table class="ui-widget-content ui-corner-all"><thead><tr><td colspan="5" class="ui-widget-header ui-corner-all" style="line-height: 18px;"><div class="ui-closer ui-state-default ui-corner-all ui-helper-clearfix" style="float: right;"><span class="ui-icon ui-icon-close"></span></div>"+d.windowTitle+"</td></tr></thead><tbody><tr class="sf"><td class="fields"></td><td class="ops"></td><td class="data"></td><td><div class="ui-del ui-state-default ui-corner-all"><span class="ui-icon ui-icon-minus"></span></div></td><td><div class="ui-add ui-state-default ui-corner-all"><span class="ui-icon ui-icon-plus"></span></div></td></tr><tr><td colspan="5" class="divider"><div>&#160;</div></td></tr></tbody><tfoot><tr><td colspan="3"><span class="ui-reset ui-state-default ui-corner-all" style="display: inline-block; float: left;"><span class="ui-icon ui-icon-arrowreturnthick-1-w" style="float: left;"></span><span style="line-height: 18px; padding: 0 7px 0 3px;">"+d.resetText+"</span></span><span class="ui-search ui-state-default ui-corner-all" style="display: inline-block; float: right;"><span class="ui-icon ui-icon-search" style="float: left;"></span><span style="line-height: 18px; padding: 0 7px 0 3px;">"+d.searchText+"</span></span><span class="matchText">"+d.matchText+"</span> "+c+" <span class="rulesText">"+d.rulesText+"</span></td><td>&#160;</td><td><div class="ui-add-last ui-state-default ui-corner-all"><span class="ui-icon ui-icon-plusthick"></span></div></td></tr></tfoot></table>");var p=e.find("tr.sf"),f=p.find("td.fields"),h=p.find("td.ops"),g=p.find("td.data"),m="";jQuery.each(d.operators,function(){m+=s(this.op,this.text)});m=o("default",m,true);h.append(m);g.append("<input type="text" class="default" style="display:none;">");var b="",v=false,w=false;jQuery.each(t,function(t){b+=s(this.itemval,this.text);if(this.ops!=null){v=true;var i="";jQuery.each(this.ops,function(){i+=s(this.op,this.text)});i=o("field"+t,i,true);h.append(i)}if(this.dataUrl!=null){if(t>u)u=t;w=true;var r=this.dataEvents,a=this.dataInit,c=this.buildSelect;jQuery.ajax(jQuery.extend({url:this.dataUrl,complete:function(i){i=c!=null?jQuery("<div>").append(c(i)):jQuery("<div>").append(i.responseText);i.find("select").addClass("field"+t).hide();g.append(i.html());a&&l(".field"+t,a);r&&n(".field"+t,r);t==u&&e.find("tr.sf td.fields select[name='field']").change()}},d.ajaxSelectOptions))}else if(this.dataValues!=null){w=true;var p="";jQuery.each(this.dataValues,function(){p+=s(this.value,this.text)});p=o("field"+t,p,true);g.append(p)}else if(this.dataEvents!=null||this.dataInit!=null){w=true;p="<input type="text" class="field"+t+"">";g.append(p)}this.dataInit!=null&&t!=u&&l(".field"+t,this.dataInit);this.dataEvents!=null&&t!=u&&n(".field"+t,this.dataEvents)});b="<select name="field">"+b+"</select>";f.append(b);t=f.find("select[name='field']");v?t.change(function(e){var t=e.target.selectedIndex;e=jQuery(e.target).parents("tr.sf").find("td.ops");e.find("select").removeAttr("name").hide();t=e.find(".field"+t);if(t[0]==null)t=e.find(".default");t.attr("name","op").show();return false}):h.find(".default").attr("name","op").show();w?t.change(function(e){var t=e.target.selectedIndex;e=jQuery(e.target).parents("tr.sf").find("td.data");e.find("select,input").removeClass("vdata").hide();t=e.find(".field"+t);if(t[0]==null)t=e.find(".default");t.show().addClass("vdata");return false}):g.find(".default").show().addClass("vdata");if(v||w)t.change();e.find(".ui-state-default").hover(r,r).mousedown(a).mouseup(a);e.find(".ui-closer").click(function(){d.onClose(jQuery(e.selector));return false});e.find(".ui-del").click(function(e){e=jQuery(e.target).parents(".sf");if(e.siblings(".sf").length>0){d.datepickerFix===true&&jQuery.fn.datepicker!==undefined&&e.find(".hasDatepicker").datepicker("destroy");e.remove()}else{e.find("select[name='field']")[0].selectedIndex=0;e.find("select[name='op']")[0].selectedIndex=0;e.find(".data input").val("");e.find(".data select").each(function(){this.selectedIndex=0});e.find("select[name='field']").change(function(e){e.stopPropagation()})}return false});e.find(".ui-add").click(function(e){e=jQuery(e.target).parents(".sf");var t=e.clone(true).insertAfter(e);t.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");if(d.clone){t.find("select[name='field']")[0].selectedIndex=e.find("select[name='field']")[0].selectedIndex;if(t.find("select[name='op']")[0]!=null)t.find("select[name='op']").focus()[0].selectedIndex=e.find("select[name='op']")[0].selectedIndex;var i=t.find("select.vdata");if(i[0]!=null)i[0].selectedIndex=e.find("select.vdata")[0].selectedIndex}else{t.find(".data input").val("");t.find("select[name='field']").focus()}d.datepickerFix===true&&jQuery.fn.datepicker!==undefined&&e.find(".hasDatepicker").each(function(){var e=jQuery.data(this,"datepicker").settings;t.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(e)});t.find("select[name='field']").change(function(e){e.stopPropagation()});return false});e.find(".ui-search").click(function(){
var t=jQuery(e.selector),i,r=t.find("select[name='groupOp'] :selected").val();i=d.stringResult?'{"groupOp":"'+r+'","rules":[':{groupOp:r,rules:[]};t.find(".sf").each(function(e){var t=jQuery(this).find("select[name='field'] :selected").val(),r=jQuery(this).find("select[name='op'] :selected").val(),a=jQuery(this).find("input.vdata,select.vdata :selected").val();a+="";a=a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"');if(d.stringResult){if(e>0)i+=",";i+='{"field":"'+t+'",';i+='"op":"'+r+'",';i+='"data":"'+a+'"}'}else i.rules.push({field:t,op:r,data:a})});if(d.stringResult)i+="]}";d.onSearch(i);return false});e.find(".ui-reset").click(function(t,i){t=jQuery(e.selector);t.find(".ui-del").click();t.find("select[name='groupOp']")[0].selectedIndex=0;d.onReset(i);return false});e.find(".ui-add-last").click(function(){var t=jQuery(e.selector+" .sf:last"),i=t.clone(true).insertAfter(t);i.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");i.find(".data input").val("");i.find("select[name='field']").focus();d.datepickerFix===true&&jQuery.fn.datepicker!==undefined&&t.find(".hasDatepicker").each(function(){var e=jQuery.data(this,"datepicker").settings;i.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(e)});i.find("select[name='field']").change(function(e){e.stopPropagation()});return false});this.setGroupOp=function(t){selDOMobj=e.find("select[name='groupOp']")[0];var i={},r=selDOMobj.options.length,a;for(a=0;a<r;a++)i[seldomobj.options[a].value]=a;seldomobj.selectedindex=i[t];jquery(seldomobj).change(function(e){e.stoppropagation()})};this.setfilter=function(e){var t="e.sfref;e=e.filter;var" r="[],a,s,o,l,n={};selDOMobj=t.find("select[name='field']")[0];a=0;for(o=selDOMobj.options.length;a<o;a++){n[selDOMobj.options[a].value]={index:a,ops:{}};r.push(selDOMobj.options[a].value)}a=0;for(o=r.length;a<o;a++){if(selDOMobj=t.find(".ops"> select[class='field"+a+"']")[0]){s=0;for(l=selDOMobj.options.length;s<l;s++)n[r[a]].ops[seldomobj.options[s].value]=s}if(seldomobj=t.find(".data> select[class='field"+a+"']")[0]){n[r[a]].data={};s=0;for(l=selDOMobj.options.length;s<l;s++)n[r[a]].data[seldomobj.options[s].value]=s}}var d,u,c,p;r="e.field;if(n[r])d=n[r].index;if(d!=null){u=n[r].ops[e.op];if(u===undefined){a=0;for(o=i.operators.length;a<o;a++)if(i.operators[a].op==e.op){u=a;break}}c=e.data;p=n[r].data==null?-1:n[r].data[c]}if(d!=null&&u!=null&&p!=null){t.find("select[name='field']")[0].selectedIndex=d;t.find("select[name='field']").change();t.find("select[name='op']")[0].selectedIndex=u;t.find("input.vdata").val(c);if(t=t.find("select.vdata")[0])t.selectedIndex=p;return" true}else="" return="" false}}}return="" new="" i(this,e,t)};jquery.fn.searchfilter.version="1.2.9" ;jquery.fn.searchfilter.defaults="{clone:true,datepickerFix:true,onReset:function(e){alert("Reset" clicked.="" data="" returned:="" "+e)},onsearch:function(e){alert("search="" "+e)},onclose:function(e){e.hide()},groupops:[{op:"and",text:"all"},{op:"or",text:"any"}],operators:[{op:"eq",text:"is="" equal="" to"},{op:"ne",text:"is="" not="" to"},{op:"lt",text:"is="" less="" than"},{op:"le",text:"is="" or="" to"},{op:"gt",text:"is="" greater="" than"},{op:"ge",text:"is="" to"},{op:"in",text:"is="" in"},{op:"ni",text:"is="" in"},{op:"bw",text:"begins="" with"},{op:"bn",text:"does="" begin="" with"},{op:"ew",text:"ends="" with"},{op:"en",text:"does="" end="" with"},{op:"cn",text:"contains"},{op:"nc",text:"does="" contain"}],matchtext:"match",rulestext:"rules",resettext:"reset",searchtext:"search",stringresult:true,windowtitle:"search="" rules",ajaxselectoptions:{}};(function(e){e.jgrid.extend({editrow:function(t,i,r,a,s,o,l,n,d){return="" this.each(function(){var="" u="this,c,p,f=0,h=null,g={},m,b;if(u.grid){m=e(u).jqGrid("getInd",t,true);if(m!==false)if((e(m).attr("editable")||"0")=="0"&&!e(m).hasClass("not-editable-row")){b=u.p.colModel;e("td",m).each(function(i){c=b[i].name;var" r="u.p.treeGrid===true&&c==u.p.ExpandColumn;if(r)p=e("span:first",this).html();else" try{p="e.unformat(this,{rowId:t,colModel:b[i]},i)}catch(t){p=e(this).html()}if(c!="cb"&&c!="subgrid"&&c!="rn"){if(u.p.autoencode)p=e.jgrid.htmlDecode(p);g[c]=p;if(b[i].editable===true){if(h===null)h=i;r?e("span:first",this).html(""):e(this).html("");var" a="e.extend({},b[i].editoptions||{},{id:t+"_"+c,name:c});if(!b[i].edittype)b[i].edittype="text";a=createEl(b[i].edittype,a,p,true,e.extend({},e.jgrid.ajaxOptions,u.p.ajaxSelectOptions||{}));e(a).addClass("editable");r?e("span:first",this).append(a):e(this).append(a);b[i].edittype=="select"&&b[i].editoptions.multiple===true&&e.browser.msie&&e(a).width(e(a).width());f++}}});if(f">0){g.id=t;u.p.savedRow.push(g);e(m).attr("editable","1");e("td:eq("+h+") input",m).focus();i===true&&e(m).bind("keydown",function(i){i.keyCode===27&&e(u).jqGrid("restoreRow",t,d);if(i.keyCode===13){if(i.target.tagName=="TEXTAREA")return true;e(u).jqGrid("saveRow",t,a,s,o,l,n,d);return false}i.stopPropagation()});e.isFunction(r)&&r.call(u,t)}}}})},saveRow:function(t,i,r,a,s,o,l){return this.each(function(){var n=this,d,u={},c={},p,f,h,g;if(n.grid){g=e(n).jqGrid("getInd",t,true);if(g!==false){p=e(g).attr("editable");r=r?r:n.p.editurl;if(p==="1"){var m;e("td",g).each(function(t){m=n.p.colModel[t];d=m.name;if(d!="cb"&&d!="subgrid"&&m.editable===true&&d!="rn"){switch(m.edittype){case"checkbox":var i=["Yes","No"];if(m.editoptions)i=m.editoptions.value.split(":");u[d]=e("input",this).attr("checked")?i[0]:i[1];break;case"text":case"password":case"textarea":case"button":u[d]=e("input, textarea",this).val();break;case"select":if(m.editoptions.multiple){i=e("select",this);var r=[];u[d]=e(i).val();u[d]=u[d]?u[d].join(","):"";e("select > option:selected",this).each(function(t,i){r[t]=e(i).text()});c[d]=r.join(",")}else{u[d]=e("select>option:selected",this).val();c[d]=e("select>option:selected",this).text()}if(m.formatter&&m.formatter=="select")c={};break;case"custom":try{if(m.editoptions&&e.isFunction(m.editoptions.custom_value)){u[d]=m.editoptions.custom_value.call(n,e(".customelement",this),"get");if(u[d]===undefined)throw"e2"}else throw"e1"}catch(t){t=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);t=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,t.message,jQuery.jgrid.edit.bClose)}break}h=checkValues(u[d],t,n);if(h[0]===false){h[1]=u[d]+" "+h[1];return false}if(n.p.autoencode)u[d]=e.jgrid.htmlEncode(u[d])}});if(h[0]===false)try{var b=findPos(e("#"+e.jgrid.jqID(t),n.grid.bDiv)[0]);info_dialog(e.jgrid.errors.errcap,h[1],e.jgrid.edit.bClose,{left:b[0],top:b[1]})}catch(e){alert(h[1])}else{if(u){var v;b=n.p.prmNames;v=b.oper;p=b.id;u[v]=b.editoper;u[p]=t;if(typeof n.p.inlineData=="undefined")n.p.inlineData={};if(typeof a=="undefined")a={};u=e.extend({},u,n.p.inlineData,a)}if(r=="clientArray"){u=e.extend({},u,c);n.p.autoencode&&e.each(u,function(t,i){u[t]=e.jgrid.htmlDecode(i)});p=e(n).jqGrid("setRowData",t,u);e(g).attr("editable","0");for(b=0;b<n.p.savedrow.length;b++)if(n.p.savedrow[b].id==t){f=b;break}f>=0&&n.p.savedRow.splice(f,1);e.isFunction(s)&&s.call(n,t,p)}else{e("#lui_"+n.p.id).show();e.ajax(e.extend({url:r,data:e.isFunction(n.p.serializeRowData)?n.p.serializeRowData.call(n,u):u,type:"POST",complete:function(r,a){e("#lui_"+n.p.id).hide();if(a==="success")if((e.isFunction(i)?i.call(n,r):true)===true){n.p.autoencode&&e.each(u,function(t,i){u[t]=e.jgrid.htmlDecode(i)});u=e.extend({},u,c);e(n).jqGrid("setRowData",t,u);e(g).attr("editable","0");for(a=0;a<n.p.savedrow.length;a++)if(n.p.savedrow[a].id==t){f=a;break}f>=0&&n.p.savedRow.splice(f,1);e.isFunction(s)&&s.call(n,t,r)}else{e.isFunction(o)&&o.call(n,t,r,a);e(n).jqGrid("restoreRow",t,l)}},error:function(i,r){e("#lui_"+n.p.id).hide();e.isFunction(o)?o.call(n,t,i,r):alert("Error Row: "+t+" Result: "+i.status+":"+i.statusText+" Status: "+r);e(n).jqGrid("restoreRow",t,l)}},e.jgrid.ajaxOptions,n.p.ajaxRowOptions||{}))}e(g).unbind("keydown")}}}}})},restoreRow:function(t,i){return this.each(function(){var r=this,a,s,o={};if(r.grid){s=e(r).jqGrid("getInd",t,true);if(s!==false){for(var l=0;l<r.p.savedrow.length;l++)if(r.p.savedrow[l].id==t){a=l;break}if(a>=0){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker","#"+e.jgrid.jqID(s.id)).datepicker("hide")}catch(e){}e.each(r.p.colModel,function(){if(this.editable===true&&this.name in r.p.savedRow[a])o[this.name]=r.p.savedRow[a][this.name]});e(r).jqGrid("setRowData",t,o);e(s).attr("editable","0").unbind("keydown");r.p.savedRow.splice(a,1)}e.isFunction(i)&&i.call(r,t)}}})}})})(jQuery);(function(e){e.jgrid.extend({editCell:function(t,i,r){return this.each(function(){var a=this,s,o,l;if(!(!a.grid||a.p.cellEdit!==true)){i=parseInt(i,10);a.p.selrow=a.rows[t].id;a.p.knv||e(a).jqGrid("GridNav");if(a.p.savedRow.length>0){if(r===true)if(t==a.p.iRow&&i==a.p.iCol)return;e(a).jqGrid("saveCell",a.p.savedRow[0].id,a.p.savedRow[0].ic)}else window.setTimeout(function(){e("#"+a.p.knv).attr("tabindex","-1").focus()},0);s=a.p.colModel[i].name;if(!(s=="subgrid"||s=="cb"||s=="rn")){l=e("td:eq("+i+")",a.rows[t]);if(a.p.colModel[i].editable===true&&r===true&&!l.hasClass("not-editable-cell")){if(parseInt(a.p.iCol,10)>=0&&parseInt(a.p.iRow,10)>=0){e("td:eq("+a.p.iCol+")",a.rows[a.p.iRow]).removeClass("edit-cell ui-state-highlight");e(a.rows[a.p.iRow]).removeClass("selected-row ui-state-hover")}e(l).addClass("edit-cell ui-state-highlight");e(a.rows[t]).addClass("selected-row ui-state-hover");try{o=e.unformat(l,{rowId:a.rows[t].id,colModel:a.p.colModel[i]},i)}catch(t){o=e(l).html()}if(a.p.autoencode)o=e.jgrid.htmlDecode(o);if(!a.p.colModel[i].edittype)a.p.colModel[i].edittype="text";a.p.savedRow.push({id:t,ic:i,name:s,v:o});if(e.isFunction(a.p.formatCell)){var n=a.p.formatCell.call(a,a.rows[t].id,s,o,t,i);if(n!==undefined)o=n}n=e.extend({},a.p.colModel[i].editoptions||{},{id:t+"_"+s,name:s});var d=createEl(a.p.colModel[i].edittype,n,o,true,e.extend({},e.jgrid.ajaxOptions,a.p.ajaxSelectOptions||{}));e.isFunction(a.p.beforeEditCell)&&a.p.beforeEditCell.call(a,a.rows[t].id,s,o,t,i);e(l).html("").append(d).attr("tabindex","0");window.setTimeout(function(){e(d).focus()},0);e("input, select, textarea",l).bind("keydown",function(r){if(r.keyCode===27)if(e("input.hasDatepicker",l).length>0)e(".ui-datepicker").is(":hidden")?e(a).jqGrid("restoreCell",t,i):e("input.hasDatepicker",l).datepicker("hide");else e(a).jqGrid("restoreCell",t,i);r.keyCode===13&&e(a).jqGrid("saveCell",t,i);if(r.keyCode==9)if(a.grid.hDiv.loading)return false;else r.shiftKey?e(a).jqGrid("prevCell",t,i):e(a).jqGrid("nextCell",t,i);r.stopPropagation()});e.isFunction(a.p.afterEditCell)&&a.p.afterEditCell.call(a,a.rows[t].id,s,o,t,i)}else{if(parseInt(a.p.iCol,10)>=0&&parseInt(a.p.iRow,10)>=0){e("td:eq("+a.p.iCol+")",a.rows[a.p.iRow]).removeClass("edit-cell ui-state-highlight");e(a.rows[a.p.iRow]).removeClass("selected-row ui-state-hover")}l.addClass("edit-cell ui-state-highlight");e(a.rows[t]).addClass("selected-row ui-state-hover");if(e.isFunction(a.p.onSelectCell)){o=l.html().replace(/\&#160\;/gi,"");a.p.onSelectCell.call(a,a.rows[t].id,s,o,t,i)}}a.p.iCol=i;a.p.iRow=t}}})},saveCell:function(t,i){return this.each(function(){var r=this,a;if(!(!r.grid||r.p.cellEdit!==true)){a=r.p.savedRow.length>=1?0:null;if(a!==null){var s=e("td:eq("+i+")",r.rows[t]),o,l,n=r.p.colModel[i],d=n.name,u=e.jgrid.jqID(d);switch(n.edittype){case"select":if(n.editoptions.multiple){u=e("#"+t+"_"+u,r.rows[t]);var c=[];if(o=e(u).val())o.join(",");else o="";e("option:selected",u).each(function(t,i){c[t]=e(i).text()});l=c.join(",")}else{o=e("#"+t+"_"+u+">option:selected",r.rows[t]).val();l=e("#"+t+"_"+u+">option:selected",r.rows[t]).text()}if(n.formatter)l=o;break;case"checkbox":var p=["Yes","No"];if(n.editoptions)p=n.editoptions.value.split(":");l=o=e("#"+t+"_"+u,r.rows[t]).attr("checked")?p[0]:p[1];break;case"password":case"text":case"textarea":case"button":l=o=e("#"+t+"_"+u,r.rows[t]).val();break;case"custom":try{if(n.editoptions&&e.isFunction(n.editoptions.custom_value)){o=n.editoptions.custom_value.call(r,e(".customelement",s),"get");if(o===undefined)throw"e2";else l=o}else throw"e1"}catch(t){t=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);t=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,t.message,jQuery.jgrid.edit.bClose)}break}if(l!=r.p.savedRow[a].v){if(e.isFunction(r.p.beforeSaveCell))if(a=r.p.beforeSaveCell.call(r,r.rows[t].id,d,o,t,i))o=a;var f=checkValues(o,i,r);if(f[0]===true){a={};if(e.isFunction(r.p.beforeSubmitCell))(a=r.p.beforeSubmitCell.call(r,r.rows[t].id,d,o,t,i))||(a={});e("input.hasDatepicker",s).length>0&&e("input.hasDatepicker",s).datepicker("hide");if(r.p.cellsubmit=="remote")if(r.p.cellurl){var h={};if(r.p.autoencode)o=e.jgrid.htmlEncode(o);h[d]=o;p=r.p.prmNames;n=p.id;u=p.oper;h[n]=r.rows[t].id;h[u]=p.editoper;h=e.extend(a,h);e("#lui_"+r.p.id).show();r.grid.hDiv.loading=true;e.ajax(e.extend({url:r.p.cellurl,data:e.isFunction(r.p.serializeCellData)?r.p.serializeCellData.call(r,h):h,type:"POST",complete:function(a,n){e("#lui_"+r.p.id).hide();r.grid.hDiv.loading=false;if(n=="success")if(e.isFunction(r.p.afterSubmitCell)){a=r.p.afterSubmitCell.call(r,a,h.id,d,o,t,i);if(a[0]===true){e(s).empty();e(r).jqGrid("setCell",r.rows[t].id,i,l,false,false,true);e(s).addClass("dirty-cell");e(r.rows[t]).addClass("edited");e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,d,o,t,i);r.p.savedRow.splice(0,1)}else{info_dialog(e.jgrid.errors.errcap,a[1],e.jgrid.edit.bClose);e(r).jqGrid("restoreCell",t,i)}}else{e(s).empty();e(r).jqGrid("setCell",r.rows[t].id,i,l,false,false,true);e(s).addClass("dirty-cell");e(r.rows[t]).addClass("edited");e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,d,o,t,i);r.p.savedRow.splice(0,1)}},error:function(a,s){e("#lui_"+r.p.id).hide();r.grid.hDiv.loading=false;e.isFunction(r.p.errorCell)?r.p.errorCell.call(r,a,s):info_dialog(e.jgrid.errors.errcap,a.status+" : "+a.statusText+"<br>"+s,e.jgrid.edit.bClose);e(r).jqGrid("restoreCell",t,i)}},e.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}))}else try{info_dialog(e.jgrid.errors.errcap,e.jgrid.errors.nourl,e.jgrid.edit.bClose);e(r).jqGrid("restoreCell",t,i)}catch(e){}if(r.p.cellsubmit=="clientArray"){e(s).empty();e(r).jqGrid("setCell",r.rows[t].id,i,l,false,false,true);e(s).addClass("dirty-cell");e(r.rows[t]).addClass("edited");e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,d,o,t,i);r.p.savedRow.splice(0,1)}}else try{window.setTimeout(function(){info_dialog(e.jgrid.errors.errcap,o+" "+f[1],e.jgrid.edit.bClose)},100);e(r).jqGrid("restoreCell",t,i)}catch(e){}}else e(r).jqGrid("restoreCell",t,i)}e.browser.opera?e("#"+r.p.knv).attr("tabindex","-1").focus():window.setTimeout(function(){e("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r=this,a;if(!(!r.grid||r.p.cellEdit!==true)){a=r.p.savedRow.length>=1?0:null;if(a!==null){var s=e("td:eq("+i+")",r.rows[t]);if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker",s).datepicker("hide")}catch(e){}e(s).empty().attr("tabindex","-1");e(r).jqGrid("setCell",r.rows[t].id,i,r.p.savedRow[a].v,false,false,true);e.isFunction(r.p.afterRestoreCell)&&r.p.afterRestoreCell.call(r,r.rows[t].id,r.p.savedRow[a].v,t,i);r.p.savedRow.splice(0,1)}window.setTimeout(function(){e("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i){return this.each(function(){var r=this,a=false;if(!(!r.grid||r.p.cellEdit!==true)){for(var s=i+1;s<r.p.colmodel.length;s++)if(r.p.colmodel[s].editable===true){a=s;break}if(a!==false)e(r).jqgrid("editcell",t,a,true);else r.p.savedrow.length="">0&&e(r).jqGrid("saveCell",t,i)}})},prevCell:function(t,i){return this.each(function(){var r=this,a=false;if(!(!r.grid||r.p.cellEdit!==true)){for(var s=i-1;s>=0;s--)if(r.p.colModel[s].editable===true){a=s;break}if(a!==false)e(r).jqGrid("editCell",t,a,true);else r.p.savedRow.length>0&&e(r).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function t(t,i,a){if(a.substr(0,1)=="v"){var s=e(r.grid.bDiv)[0].clientHeight,o=e(r.grid.bDiv)[0].scrollTop,l=r.rows[t].offsetTop+r.rows[t].clientHeight,n=r.rows[t].offsetTop;if(a=="vd")if(l>=s)e(r.grid.bDiv)[0].scrollTop=e(r.grid.bDiv)[0].scrollTop+r.rows[t].clientHeight;if(a=="vu")if(n<o)e(r.grid.bdiv)[0].scrolltop=e(r.grid.bdiv)[0].scrolltop-r.rows[t].clientheight}if(a=="h"){a=e(r.grid.bdiv)[0].clientwidth;s=e(r.grid.bdiv)[0].scrollleft;o=r.rows[t].cells[i].offsetleft;if(r.rows[t].cells[i].offsetleft+r.rows[t].cells[i].clientwidth>=a+parseInt(s,10))e(r.grid.bDiv)[0].scrollLeft=e(r.grid.bDiv)[0].scrollLeft+r.rows[t].cells[i].clientWidth;else if(o<s)e(r.grid.bdiv)[0].scrollleft=e(r.grid.bdiv)[0].scrollleft-r.rows[t].cells[i].clientwidth}}function i(e,t){var="" i,a;if(t="="lft"){i=e+1;for(a=e;a">=0;a--)if(r.p.colModel[a].hidden!==true){i=a;break}}if(t=="rgt"){i=e-1;for(a=e;a<r.p.colmodel.length;a++)if(r.p.colmodel[a].hidden!==true){i=a;break}}return i}var="" r="this;if(!(!r.grid||r.p.cellEdit!==true)){r.p.knv=r.p.id+"_kn";var" a="e("<span" style="width:0px;height:0px;background-color:black;" tabindex="0"><span tabindex="-1" style="width:0px;height:0px;background-color:grey" id=""+r.p.knv+""></span>"),s,o;e(a).insertBefore(r.grid.cDiv);e("#"+r.p.knv).focus().keydown(function(a){o=a.keyCode;if(r.p.direction=="rtl")if(o==37)o=39;else if(o==39)o=37;switch(o){case 38:if(r.p.iRow-1>0){t(r.p.iRow-1,r.p.iCol,"vu");e(r).jqGrid("editCell",r.p.iRow-1,r.p.iCol,false)}break;case 40:if(r.p.iRow+1<=r.rows.length-1){t(r.p.irow+1,r.p.icol,"vd");e(r).jqgrid("editcell",r.p.irow+1,r.p.icol,false)}break;case 37:if(r.p.icol-1="">=0){s=i(r.p.iCol-1,"lft");t(r.p.iRow,s,"h");e(r).jqGrid("editCell",r.p.iRow,s,false)}break;case 39:if(r.p.iCol+1<=r.p.colmodel.length-1){s=i(r.p.icol+1,"rgt");t(r.p.irow,s,"h");e(r).jqgrid("editcell",r.p.irow,s,false)}break;case 13:parseint(r.p.icol,10)="">=0&&parseInt(r.p.iRow,10)>=0&&e(r).jqGrid("editCell",r.p.iRow,r.p.iCol,true);break}return false})}})},getChangedCells:function(t){var i=[];t||(t="all");this.each(function(){var r=this,a;!r.grid||r.p.cellEdit!==true||e(r.rows).each(function(s){var o={};if(e(this).hasClass("edited")){e("td",this).each(function(i){a=r.p.colModel[i].name;if(a!=="cb"&&a!=="subgrid")if(t=="dirty"){if(e(this).hasClass("dirty-cell"))try{o[a]=e.unformat(this,{rowId:r.rows[s].id,colModel:r.p.colModel[i]},i)}catch(t){o[a]=e.jgrid.htmlDecode(e(this).html())}}else try{o[a]=e.unformat(this,{rowId:r.rows[s].id,colModel:r.p.colModel[i]},i)}catch(t){o[a]=e.jgrid.htmlDecode(e(this).html())}});o.id=this.id;i.push(o)}})});return i}})})(jQuery);(function(e){e.fn.jqm=function(r){var a={overlay:50,closeoverlay:true,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:s,ajaxText:"",target:s,modal:s,toTop:s,onShow:s,onHide:s,onLoad:s};return this.each(function(){if(this._jqm)return i[this._jqm].c=e.extend({},i[this._jqm].c,r);t++;this._jqm=t;i[t]={c:e.extend(a,e.jqm.params,r),a:s,w:e(this).addClass("jqmID"+t),s:t};a.trigger&&e(this).jqmAddTrigger(a.trigger)})};e.fn.jqmAddClose=function(e){return u(this,e,"jqmHide")};e.fn.jqmAddTrigger=function(e){return u(this,e,"jqmShow")};e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})};e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})};e.jqm={hash:{},open:function(t,l){var d=i[t],u=d.c,c="."+u.closeClass,p=parseInt(d.w.css("z-index"));p=p>0?p:3e3;var f=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":p-1,opacity:u.overlay/100});if(d.a)return s;d.t=l;d.a=true;d.w.css("z-index",p);if(u.modal){r[0]||setTimeout(function(){n("bind")},1);r.push(t)}else if(u.overlay>0)u.closeoverlay&&d.w.jqmAddClose(f);else f=s;d.o=f?f.addClass(u.overlayClass).prependTo("body"):s;if(a){e("html,body").css({height:"100%",width:"100%"});if(f){f=f.css({position:"absolute"})[0];for(var h in{Top:1,Left:1})f.style.setExpression(h.toLowerCase(),"(_=(document.documentElement.scroll"+h+" || document.body.scroll"+h+"))+'px'")}}if(u.ajax){t=u.target||d.w;p=u.ajax;t=typeof t=="string"?e(t,d.w):e(t);p=p.substr(0,1)=="@"?e(l).attr(p.substring(1)):p;t.html(u.ajaxText).load(p,function(){u.onLoad&&u.onLoad.call(this,d);c&&d.w.jqmAddClose(e(c,d.w));o(d)})}else c&&d.w.jqmAddClose(e(c,d.w));u.toTop&&d.o&&d.w.before('<span id="jqmP'+d.w[0]._jqm+'"></span>').insertAfter(d.o);u.onShow?u.onShow(d):d.w.show();o(d);return s},close:function(t){t=i[t];if(!t.a)return s;t.a=s;if(r[0]){r.pop();r[0]||n("unbind")}t.c.toTop&&t.o&&e("#jqmP"+t.w[0]._jqm).after(t.w).remove();if(t.c.onHide)t.c.onHide(t);else{t.w.hide();t.o&&t.o.remove()}return s},params:{}};var t=0,i=e.jqm.hash,r=[],a=e.browser.msie&&e.browser.version=="6.0",s=false,o=function(t){var i=e('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});if(a)if(t.o)t.o.html('<p style="width:100%;height:100%">').prepend(i);else e("iframe.jqm",t.w)[0]||t.w.prepend(i);l(t)},l=function(t){try{e(":input:visible",t.w)[0].focus()}catch(e){}},n=function(t){e(document)[t]("keypress",d)[t]("keydown",d)[t]("mousedown",d)},d=function(t){var a=i[r[r.length-1]];(t=!e(t.target).parents(".jqmID"+a.s)[0])&&l(a);return!t},u=function(t,r,a){return t.each(function(){var t=this._jqm;e(r).each(function(){if(!this[a]){this[a]=[];e(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])i[this[e][t]]&&i[this[e][t]].w[e](this);return s})}this[a].push(t)})})}})(jQuery);(function(e){e.fn.jqDrag=function(e){return s(this,e,"d")};e.fn.jqResize=function(e,t){return s(this,e,"r",t)};e.jqDnR={dnr:{},e:0,drag:function(e){if(i.k=="d")r.css({left:i.X+e.pageX-i.pX,top:i.Y+e.pageY-i.pY});else{r.css({width:Math.max(e.pageX-i.pX+i.W,0),height:Math.max(e.pageY-i.pY+i.H,0)});M1&&a.css({width:Math.max(e.pageX-M1.pX+M1.W,0),height:Math.max(e.pageY-M1.pY+M1.H,0)})}return false},stop:function(){e(document).unbind("mousemove",t.drag).unbind("mouseup",t.stop)}};var t=e.jqDnR,i=t.dnr,r=t.e,a,s=function(t,s,l,n){return t.each(function(){s=s?e(s,t):t;s.bind("mousedown",{e:t,k:l},function(t){var s=t.data,l={};r=s.e;a=n?e(n):false;if(r.css("position")!="relative")try{r.position(l)}catch(e){}i={X:l.left||o("left")||0,Y:l.top||o("top")||0,W:o("width")||r[0].scrollWidth||0,H:o("height")||r[0].scrollHeight||0,pX:t.pageX,pY:t.pageY,k:s.k};M1=a&&s.k!="d"?{X:l.left||f1("left")||0,Y:l.top||f1("top")||0,W:a[0].offsetWidth||f1("width")||0,H:a[0].offsetHeight||f1("height")||0,pX:t.pageX,pY:t.pageY,k:s.k}:false;try{e("input.hasDatepicker",r[0]).datepicker("hide")}catch(e){}e(document).mousemove(e.jqDnR.drag).mouseup(e.jqDnR.stop);return false})})},o=function(e){return parseInt(r.css(e))||false};f1=function(e){return parseInt(a.css(e))||false}})(jQuery);(function(e){e.jgrid.extend({setSubGrid:function(){return this.each(function(){var t=this;t.p.colNames.unshift("");t.p.colModel.unshift({name:"subgrid",width:e.browser.safari?t.p.subGridWidth+t.p.cellLayout:t.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});t=t.p.subGridModel;if(t[0]){t[0].align=e.extend([],t[0].align||[]);for(var i=0;i<t[0].name.length;i++)t[0].align[i]=t[0].align[i]||"left"}})},addsubgridcell:function(e,t){var i="" ,r,a;this.each(function(){i="this.formatCol(e,t);r=this.p.gridview;a=this.p.id});return" r="==false?'<td" role="grid" aria-describedby="'+a+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+i+"=""><a href="javascript:void(0);" target="_blank" rel="external"><span class="ui-icon ui-icon-plus"></span></a>":'<td role="grid" aria-describedby="'+a+'_subgrid" '+i+"=""></td>"},addSubGrid:function(t,i){return this.each(function(){var r=this;if(r.grid){var a=function(t,i,a){i=e("<td align=""+r.p.subGridModel[0].align[a]+""></td>").html(i);e(t).append(i)},s=function(t,i){var s,o,l,n=e("<table cellspacing="0" cellpadding="0" border="0"><tbody></tbody></table>"),d=e("<tr></tr>");for(o=0;o<r.p.subgridmodel[0].name.length;o++){s=e("<th class="ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"">");e(s).html(r.p.subGridModel[0].name[o]);e(s).width(r.p.subGridModel[0].width[o]);e(d).append(s)}e(n).append(d);if(t){l=r.p.xmlReader.subgrid;e(l.root+" "+l.row,t).each(function(){d=e("<tr class="ui-widget-content ui-subtblcell"></tr>");if(l.repeatitems===true)e(l.cell,this).each(function(t){a(d,e(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(o=0;o<t.length;o++)a(d,e(t[o],this).text()||"&#160;",o)}e(n).append(d)})}t=e("table:first",r.grid.bdiv).attr("id")+"_";e("#"+t+i).append(n);r.grid.hdiv.loading=false;e("#load_"+r.p.id).hide();return false},o="function(t,i){var" s,o,l,n,d="e("<table" cellspacing="0" cellpadding="0" border="0"><tbody></tbody>"),u=e("<tr></tr>");for(o=0;o<r.p.subgridmodel[0].name.length;o++){s=e("<th class="ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"">");e(s).html(r.p.subGridModel[0].name[o]);e(s).width(r.p.subGridModel[0].width[o]);e(u).append(s)}e(d).append(u);if(t){s=r.p.jsonReader.subgrid;t=t[s.root];if(typeof t!=="undefined")for(o=0;o<t.length;o++){l=t[o];u=e("<tr class="ui-widget-content ui-subtblcell">");if(s.repeatitems===true){if(s.cell)l=l[s.cell];for(n=0;n<l.length;n++)a(u,l[n]||"&#160;",n)}else{var c="r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(c.length)for(n=0;n<c.length;n++)a(u,l[c[n]]||"&#160;",n)}e(d).append(u)}}o=e("table:first",r.grid.bDiv).attr("id")+"_";e("#"+o+i).append(d);r.grid.hDiv.loading=false;e("#load_"+r.p.id).hide();return" false},l="function(t){var" i,a,l,n;i="e(t).attr("id");a={nd_:(new" date).gettime()};a[r.p.prmnames.subgridid]="i;if(!r.p.subGridModel[0])return" false;if(r.p.subgridmodel[0].params)for(n="0;n<r.p.subGridModel[0].params.length;n++)for(l=0;l<r.p.colModel.length;l++)if(r.p.colModel[l].name==r.p.subGridModel[0].params[n])a[r.p.colModel[l].name]=e("td:eq("+l+")",t).text().replace(/\&#160\;/gi,"");if(!r.grid.hDiv.loading){r.grid.hDiv.loading=true;e("#load_"+r.p.id).show();if(!r.p.subgridtype)r.p.subgridtype=r.p.datatype;if(e.isFunction(r.p.subgridtype))r.p.subgridtype.call(r,a);else" r.p.subgridtype="r.p.subgridtype.toLowerCase();switch(r.p.subgridtype){case"xml":case"json":e.ajax(e.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:e.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData(r,a):a,complete:function(t){r.p.subgridtype=="xml"?s(t.responseXML,i):o(e.jgrid.parse(t.responseText),i)}},e.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}));break}}return" false},n,d,u,c,p,f,h;e("td:eq("+i+")",t).click(function(){if(e(this).hasclass("sgcollapsed")){u="r.p.id;n=e(this).parent();c=i">=1?"<td colspan=""+i+"">&#160;</td>":"";d=e(n).attr("id");h=true;if(e.isFunction(r.p.subGridBeforeExpand))h=r.p.subGridBeforeExpand.call(r,u+"_"+d,d);if(h===false)return false;p=0;e.each(r.p.colModel,function(){if(this.hidden===true||this.name=="rn"||this.name=="cb")p++});f="<tr role="row" class="ui-subgrid">"+c+"<td class="ui-widget-content subgrid-cell"><span class="ui-icon ui-icon-carat-1-sw"></span></td><td colspan=""+parseInt(r.p.colNames.length-1-p,10)+"" class="ui-widget-content subgrid-data"><div id="+u+" _"+d+"="" class="tablediv">";e(this).parent().after(f+"</div></td></tr>");e.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,u+"_"+d,d):l(n);e(this).html("<a href="javascript:void(0);" target="_blank" rel="external"><span class="ui-icon ui-icon-minus"></span></a>").removeClass("sgcollapsed").addClass("sgexpanded")}else if(e(this).hasClass("sgexpanded")){h=true;if(e.isFunction(r.p.subGridRowColapsed)){n=e(this).parent();d=e(n).attr("id");h=r.p.subGridRowColapsed.call(r,u+"_"+d,d)}if(h===false)return false;e(this).parent().next().remove(".ui-subgrid");e(this).html("<a href="javascript:void(0);" target="_blank" rel="external"><span class="ui-icon ui-icon-plus"></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return false});r.subGridXml=function(e,t){s(e,t)};r.subGridJson=function(e,t){o(e,t)}}})},expandSubGridRow:function(t){return this.each(function(){var i=this;if(i.grid||t)if(i.p.subGrid===true)if(i=e(this).jqGrid("getInd",t,true))(i=e("td.sgcollapsed",i)[0])&&e(i).trigger("click")})},collapseSubGridRow:function(t){return this.each(function(){var i=this;if(i.grid||t)if(i.p.subGrid===true)if(i=e(this).jqGrid("getInd",t,true))(i=e("td.sgexpanded",i)[0])&&e(i).trigger("click")})},toggleSubGridRow:function(t){return this.each(function(){var i=this;if(i.grid||t)if(i.p.subGrid===true)if(i=e(this).jqGrid("getInd",t,true)){var r=e("td.sgcollapsed",i)[0];if(r)e(r).trigger("click");else(r=e("td.sgexpanded",i)[0])&&e(r).trigger("click")}})}})})(jQuery);(function(e){e.jgrid.extend({groupingSetup:function(){return this.each(function(){var t=this,i=t.p.groupingView;if(i!==null&&(typeof i==="object"||e.isFunction(i)))if(i.groupField.length){for(var r=0;r<i.groupfield.length;r++){i.grouporder[r]||(i.grouporder[r]="asc");i.grouptext[r]||(i.grouptext[r]="{0}");if(typeof i.groupcolumnshow[r]!="boolean" )i.groupcolumnshow[r]="true;if(typeof" i.groupsummary[r]!="boolean" )i.groupsummary[r]="false;i.groupColumnShow[r]===true?e(t).jqGrid("showCol",i.groupField[r]):e(t).jqGrid("hideCol",i.groupField[r]);i.sortitems[r]=[];i.sortnames[r]=[];i.summaryval[r]=[];if(i.groupSummary[r]){i.summary[r]=[];for(var" a="t.p.colModel,s=0,o=a.length;s<o;s++)a[s].summaryType&&i.summary[r].push({nm:a[s].name,st:a[s].summaryType,v:""})}}t.p.scroll=false;t.p.rownumbers=false;t.p.subGrid=false;t.p.treeGrid=false;t.p.gridview=true}else" t.p.grouping="false;else" s="i[0]?i[0].split("" ").join(""):"",o="this.p.groupingView,l=this;if(r.hasOwnProperty(s))r[s].push(t);else{r[s]=[];r[s].push(t);o.sortitems[0].push(s);o.sortnames[0].push(e.trim(i[0]));o.summaryval[0][s]=e.extend(true,{},o.summary[0])}o.groupSummary[0]&&e.each(o.summaryval[0][s],function(){this.v=e.isFunction(this.st)?this.st.call(l,this.v,this.nm,a):e(l).jqGrid("groupingCalculations."+this.st,this.v,this.nm,a)})});return" r},groupingtoggle:function(t){this.each(function(){var="" i="this.p.groupingView,r=t.lastIndexOf("_"),a=t.substring(0,r+1);r=parseInt(t.substring(r+1),10)+1;var" span").hasclass(s)){i.showsummaryonhide&&i.groupsummary[0]?e("#"+t).nextuntil(".jqfoot").hide():e("#"+t).nextuntil("#"+a+string(r)).hide();e("#"+t+"="" span").removeclass(s).addclass(o)}else{e("#"+t).nextuntil("#"+a+string(r)).show();e("#"+t+"="" span").removeclass(o).addclass(s)}});return="" false},groupingrender:function(t,i){return="" this.each(function(){var="" r="this,a=r.p.groupingView,s="",o="",l,n="";if(!a.groupDataSorted){a.sortitems[0].sort();a.sortnames[0].sort();a.groupOrder[0].toLowerCase()=="desc"&&a.sortitems[0].reverse()}n=a.groupCollapse?a.plusicon:a.minusicon;n+="" tree-wrap-"+r.p.direction;e.each(a.sortitems[0],function(d,u){l="r.p.id+"ghead_"+d;o="<span" style="cursor:pointer;" class="ui-icon "+n+"" onclick="\"jQuery('#"+r.p.id+"').jqGrid('groupingToggle','"+l+"');return" false;\"="">";s+='<tr id="'+l+'" role="row" class="ui-widget-content jqgroup ui-row-'+r.p.direction+'"><td colspan="'+i+'">'+o+e.jgrid.format(a.groupText[0],a.sortnames[0][d],t[u].length)+"</td></tr>";for(d=0;d<t[u].length;d++)s+=t[u][d].join("");if(a.groupsummary[0]){d="";if(a.groupcollapse&&!a.showsummaryonhide)d=' style="display:none;" ';s+="<tr" +d+'="" role="row" class="ui-widget-content jqfoot ui-row-'+r.p.direction+'">';d=a.summaryval[0][u];for(var c=r.p.colModel,p,f=t[u].length,h=0;h<i;h++){var g="<td " +r.formatcol(h,1,"")+"="">&#160;",m="{0}";e.each(d,function(){if(this.nm==c[h].name){if(c[h].summaryTpl)m=c[h].summaryTpl;if(this.st=="avg")if(this.v&&f>0)this.v/=f;try{p=r.formatter("",this.v,h,this)}catch(e){p=this.v}g="<td "+r.formatcol(h,1,"")+"="">"+e.jgrid.format(m,p)+"</td>";return false}})
;s+=g}s+=""}});e("#"+r.p.id+" tbody:first").append(s);s=null})},groupingGroupBy:function(t,i){return this.each(function(){var r=this;if(typeof t=="string")t=[t];var a=r.p.groupingView;r.p.grouping=true;for(var s=0;s<a.groupfield.length;s++)a.groupcolumnshow[s]||e(r).jqgrid("showcol",a.groupfield[s]);r.p.groupingview=e.extend(r.p.groupingview,i||{});a.groupfield=t;e(r).trigger("reloadgrid")})},groupingremove:function(t){return this.each(function(){var="" i="this;if(typeof" t="="undefined")t=true;i.p.grouping=false;t===true?e("tr.jqgroup," tr.jqfoot","#"+i.p.id+"="" tbody:first").remove():e(i).trigger("reloadgrid")})},groupingcalculations:{sum:function(e,t,i){return="" parsefloat(e||0)+parsefloat(i[t]||0)},min:function(e,t,i){if(e="=="")return" parsefloat(i[t]||0);return="" math.min(parsefloat(e),parsefloat(i[t]||0))},max:function(e,t,i){if(e="=="")return" math.max(parsefloat(e),parsefloat(i[t]||0))},count:function(e,t,i){if(e="=="")e=0;return" i.hasownproperty(t)?e+1:0},avg:function(e,t,i){return="" parsefloat(e||0)+parsefloat(i[t]||0)}}})})(jquery);(function(e){e.jgrid.extend({settreenode:function(t,i){return="" r="this;if(r.grid&&r.p.treeGrid){var" a="r.p.expColInd,s=r.p.treeReader.expanded_field,o=r.p.treeReader.leaf_field,l=r.p.treeReader.level_field;i.level=t[l];if(r.p.treeGridModel=="nested"){var" n="t[r.p.treeReader.left_field],d=t[r.p.treeReader.right_field];t[o]||(t[o]=parseInt(d,10)===parseInt(n,10)+1?"true":"false")}d=parseInt(t[l],10);if(r.p.tree_root_level===0){n=d+1;d=d}else{n=d;d=d-1}n="<div" class="tree-wrap tree-wrap-"+r.p.direction+"" style="width:"+n*18+"px;">";n+="<div style=""+(r.p.direction=="rtl"?"right:":"left:")+d*18+"px;" class="ui-icon ";if(t[o]=="true"||t[o]===true){n+=r.p.treeIcons.leaf+" tree-leaf" ";t[o]="true;t[s]=false}else{if(t[s]=="true"||t[s]===true){n+=r.p.treeIcons.minus+"" tree-minus="" treeclick'";t[s]="true}else{n+=r.p.treeIcons.plus+"" tree-plus=""></div>";if(!r.p.loadonce){t[r.p.localReader.id]=i.id;r.p.data.push(t);r.p._index[i.id]=r.p.data.length-1}if(parseInt(t[l],10)!==parseInt(r.p.tree_root_level,10))e(r).jqGrid("isVisibleNode",t)||e(i).css("display","none");e("td:eq("+a+")",i).wrapInner("<span></span>").prepend(n);e(".treeclick",i).bind("click",function(t){t=e(t.target||t.srcElement,r.rows).closest("tr.jqgrow")[0].id;t=r.p._index[t];var i=r.p.treeReader.expanded_field;if(!r.p.data[t][r.p.treeReader.leaf_field])if(r.p.data[t][i]){e(r).jqGrid("collapseRow",r.p.data[t]);e(r).jqGrid("collapseNode",r.p.data[t])}else{e(r).jqGrid("expandRow",r.p.data[t]);e(r).jqGrid("expandNode",r.p.data[t])}return false});r.p.ExpandColClick===true&&e("span",i).css("cursor","pointer").bind("click",function(t){t=e(t.target||t.srcElement,r.rows).closest("tr.jqgrow")[0].id;var i=r.p._index[t],a=r.p.treeReader.expanded_field;if(!r.p.data[i][r.p.treeReader.leaf_field])if(r.p.data[i][a]){e(r).jqGrid("collapseRow",r.p.data[i]);e(r).jqGrid("collapseNode",r.p.data[i])}else{e(r).jqGrid("expandRow",r.p.data[i]);e(r).jqGrid("expandNode",r.p.data[i])}e(r).jqGrid("setSelection",t);return false})}})},setTreeGrid:function(){return this.each(function(){var t=this,i=0;if(t.p.treeGrid){t.p.treedatatype||e.extend(t.p,{treedatatype:t.p.datatype});t.p.subGrid=false;t.p.altRows=false;t.p.pgbuttons=false;t.p.pginput=false;t.p.multiselect=false;t.p.rowList=[];t.p.treeIcons=e.extend({plus:"ui-icon-triangle-1-"+(t.p.direction=="rtl"?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{});if(t.p.treeGridModel=="nested")t.p.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader);else if(t.p.treeGridModel=="adjacency")t.p.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader);for(var r in t.p.colModel)if(t.p.colModel.hasOwnProperty(r)){if(t.p.colModel[r].name==t.p.ExpandColumn){t.p.expColInd=i;break}i++}if(!t.p.expColInd)t.p.expColInd=0;e.each(t.p.treeReader,function(e,i){if(i){t.p.colNames.push(i);t.p.colModel.push({name:i,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})}})},expandRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=e(i).jqGrid("getNodeChildren",t),a=i.p.treeReader.expanded_field;e(r).each(function(){var t=e.jgrid.getAccessor(this,i.p.localReader.id);e("#"+t,i.grid.bDiv).css("display","");this[a]&&e(i).jqGrid("expandRow",this)})}})},collapseRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=e(i).jqGrid("getNodeChildren",t),a=i.p.treeReader.expanded_field;e(r).each(function(){var t=e.jgrid.getAccessor(this,i.p.localReader.id);e("#"+t,i.grid.bDiv).css("display","none");this[a]&&e(i).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var t=[];this.each(function(){var i=this;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var r=i.p.treeReader.level_field;e(i.p.data).each(function(){parseInt(this[r],10)===parseInt(i.p.tree_root_level,10)&&t.push(this)});break;case"adjacency":var a=i.p.treeReader.parent_id_field;e(i.p.data).each(function(){if(this[a]===null||String(this[a]).toLowerCase()=="null")t.push(this)});break}});return t},getNodeDepth:function(t){var i=null;this.each(function(){if(this.grid&&this.p.treeGrid){var r=this;switch(r.p.treeGridModel){case"nested":i=parseInt(t[r.p.treeReader.level_field],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":i=e(r).jqGrid("getNodeAncestors",t).length;break}}});return i},getNodeParent:function(t){var i=null;this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.left_field,s=r.p.treeReader.right_field,o=r.p.treeReader.level_field,l=parseInt(t[a],10),n=parseInt(t[s],10),d=parseInt(t[o],10);e(this.p.data).each(function(){if(parseInt(this[o],10)===d-1&&parseInt(this[a],10)<l&&parseint(this[s],10)>n){i=this;return false}});break;case"adjacency":var u=r.p.treeReader.parent_id_field,c=r.p.localReader.id;e(this.p.data).each(function(){if(this[c]==t[u]){i=this;return false}});break}});return i},getNodeChildren:function(t){var i=[];this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.left_field,s=r.p.treeReader.right_field,o=r.p.treeReader.level_field,l=parseInt(t[a],10),n=parseInt(t[s],10),d=parseInt(t[o],10);e(this.p.data).each(function(){parseInt(this[o],10)===d+1&&parseInt(this[a],10)>l&&parseInt(this[s],10)<n&&i.push(this)});break;case"adjacency":var u="r.p.treeReader.parent_id_field,c=r.p.localReader.id;e(this.p.data).each(function(){this[u]==t[c]&&i.push(this)});break}});return" i},getfulltreenode:function(t){var="" i="[];this.each(function(){var" r="this,a;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var" s="r.p.treeReader.left_field,o=r.p.treeReader.right_field,l=r.p.treeReader.level_field,n=parseInt(t[s],10),d=parseInt(t[o],10),u=parseInt(t[l],10);e(this.p.data).each(function(){parseInt(this[l],10)">=u&&parseInt(this[s],10)>=n&&parseInt(this[s],10)<=d&&i.push(this)});break;case"adjacency":i.push(t);var c="r.p.treeReader.parent_id_field,p=r.p.localReader.id;e(this.p.data).each(function(e){a=i.length;for(e=0;e<a;e++)if(i[e][p]==this[c]){i.push(this);break}});break}});return" i},getnodeancestors:function(t){var="" i="[];this.each(function(){if(this.grid&&this.p.treeGrid)for(var" r="e(this).jqGrid("getNodeParent",t);r;){i.push(r);r=e(this).jqGrid("getNodeParent",r)}});return" i},isvisiblenode:function(t){var="" a="e(r).jqGrid("getNodeAncestors",t),s=r.p.treeReader.expanded_field;e(a).each(function(){i=i&&this[s];if(!i)return" false})}});return="" i},isnodeloaded:function(t){var="" i;this.each(function(){var="">0?true:false}});return i},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.treeReader.expanded_field;if(!t[i]){var r=e.jgrid.getAccessor(t,this.p.localReader.id),a=e("#"+r,this.grid.bDiv)[0],s=this.p._index[r];if(e(this).jqGrid("isNodeLoaded",this.p.data[s])){t[i]=true;e("div.treeclick",a).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}else{t[i]=true;e("div.treeclick",a).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=a.rowIndex;this.p.datatype=this.p.treedatatype;this.p.treeGridModel=="nested"?e(this).jqGrid("setGridParam",{postData:{nodeid:r,n_left:t.lft,n_right:t.rgt,n_level:t.level}}):e(this).jqGrid("setGridParam",{postData:{nodeid:r,parentid:t.parent_id,n_level:t.level}});e(this).trigger("reloadGrid");this.p.treeGridModel=="nested"?e(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):e(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})}}}})},collapseNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid)if(t.expanded){t.expanded=false;var i=e.jgrid.getAccessor(t,this.p.localReader.id);i=e("#"+i,this.grid.bDiv)[0];e("div.treeclick",i).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}})},SortTree:function(t,i,r,a){return this.each(function(){if(this.grid&&this.p.treeGrid){var s,o,l,n=[],d=this,u;s=e(this).jqGrid("getRootNodes");s=e.jgrid.from(s);s.orderBy(t,i,r,a);u=s.select();s=0;for(o=u.length;s<o;s++){l=u[s];n.push(l);e(this).jqgrid("collectchildrensorttree",n,l,t,i,r,a)}e.each(n,function(t){var i="e.jgrid.getAccessor(this,d.p.localReader.id);if(t===0){t=e("#"+i,d.grid.bDiv);e("td",t).each(function(t){e(this).css("width",d.grid.headers[t].width+"px")});d.grid.cols=t[0].cells}e("tbody",d.grid.bDiv).append(e("#"+i,d.grid.bDiv))});n=u=s=null}})},collectChildrenSortTree:function(t,i,r,a,s,o){return" this.each(function(){if(this.grid&&this.p.treegrid){var="" l,n,d,u;l="e(this).jqGrid("getNodeChildren",i);l=e.jgrid.from(l);l.orderBy(r,a,s,o);u=l.select();l=0;for(n=u.length;l<n;l++){d=u[l];t.push(d);e(this).jqGrid("collectChildrenSortTree",t,d,r,a,s,o)}}})},setTreeRow:function(t,i){var" r="false;this.each(function(){var" a="this;if(a.grid&&a.p.treeGrid)r=e(a).jqGrid("setRowData",t,i)});return" r},deltreenode:function(t){return="" this.each(function(){var="">0)for(var s=0;s<a.length;s++)e(i).jqgrid("delrowdata",a[s].id);e(i).jqgrid("delrowdata",r.id)}}})}})})(jquery);(function(e){e.jgrid.extend({jqgridimport:function(t){t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"get",impdata:{},xmlgrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{});return this.each(function(){var i=this,r=function(t,r){var a=e(r.xmlGrid.config,t)[0];r=e(r.xmlGrid.data,t)[0];var s;if(xmlJsonClass.xml2json&&e.jgrid.parse){a=xmlJsonClass.xml2json(a," ");a=e.jgrid.parse(a);for(var o in a)if(a.hasOwnProperty(o))s=a[o];if(r){o=a.grid.datatype;a.grid.datatype="xmlstring";a.grid.datastr=t;e(i).jqGrid(s).jqGrid("setGridParam",{datatype:o})}else e(i).jqGrid(s)}else alert("xml2json or parse are not present")},a=function(t,r){if(t&&typeof t=="string"){var a=e.jgrid.parse(t);t=a[r.jsonGrid.config];if(r=a[r.jsonGrid.data]){a=t.datatype;t.datatype="jsonstring";t.datastr=r;e(i).jqGrid(t).jqGrid("setGridParam",{datatype:a})}else e(i).jqGrid(t)}};switch(t.imptype){case"xml":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(i,a){if(a=="success"){r(i.responseXML,t);e.isFunction(t.importComplete)&&t.importComplete(i)}}},t.ajaxOptions));break;case"xmlstring":if(t.impstring&&typeof t.impstring=="string"){var s=e.jgrid.stringToDoc(t.impstring);if(s){r(s,t);e.isFunction(t.importComplete)&&t.importComplete(s);t.impstring=null}s=null}break;case"json":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(i,r){if(r=="success"){a(i.responseText,t);e.isFunction(t.importComplete)&&t.importComplete(i)}}},t.ajaxOptions));break;case"jsonstring":if(t.impstring&&typeof t.impstring=="string"){a(t.impstring,t);e.isFunction(t.importComplete)&&t.importComplete(t.impstring);t.impstring=null}break}})},jqGridExport:function(t){t=e.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var i=null;this.each(function(){if(this.grid){var r=e.extend({},e(this).jqGrid("getGridParam"));if(r.rownumbers){r.colNames.splice(0,1);r.colModel.splice(0,1)}if(r.multiselect){r.colNames.splice(0,1);r.colModel.splice(0,1)}if(r.subGrid){r.colNames.splice(0,1);r.colModel.splice(0,1)}r.knv=null;if(r.treeGrid)for(var a in r.treeReader)if(r.treeReader.hasOwnProperty(a)){r.colNames.splice(r.colNames.length-1);r.colModel.splice(r.colModel.length-1)}switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(r,t.ident)+"</"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(r,t.root,t.ident)+"}";if(r.postData.filters!==undefined){i=i.replace(/filters":"/,'filters":');i=i.replace(/}]}"/,"}]}")}break}}});return i},excelExport:function(t){t=e.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{});return this.each(function(){if(this.grid){var i;if(t.exptype=="remote"){i=e.extend({},this.p.postData);i[t.oper]=t.tag;i=jQuery.param(i);i=t.url.indexOf("?")!=-1?t.url+"&"+i:t.url+"?"+i;window.location=i}}})}})})(jQuery);var xmlJsonClass={xml2json:function(e,t){if(e.nodeType===9)e=e.documentElement;e=this.toJson(this.toObj(this.removeWhite(e)),e.nodeName,"\t");return"{\n"+t+(t?e.replace(/\t/g,t):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var i=function(e,t,r){var a="",s,o;if(e instanceof Array)if(e.length===0)a+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else{s=0;for(o=e.length;s<o;s+=1){var l="r+i(e[s],t,r+"\t")+"\n";a+=l}}else" if(typeof="" e="=="object"){s=false;a+=r+"<"+t;for(o" in="" e)if(e.hasownproperty(o))if(o.charat(0)="=="@")a+="" "+o.substr(1)+'="'+e[o].toString()+'" ';else="" s="true;a+=s?"">":"/>";if(s){for(o in e)if(e.hasOwnProperty(o))if(o==="#text")a+=e[o];else if(o==="#cdata")a+="<!--[CDATA["+e[o]+"]]-->";else if(o.charAt(0)!=="@")a+=i(e[o],o,r+"\t");a+=(a.charAt(a.length-1)==="\n"?r:"")+""}}else a+=typeof e==="function"?r+"<"+t+"><!--[CDATA["+e+"]]--></"+t+">":e.toString()==='""'||e.toString().length===0?r+"<"+t+">__EMPTY_STRING_</"+t+">":r+"<"+t+">"+e.toString()+"</"+t+">";return a},r="",a;for(a in e)if(e.hasOwnProperty(a))r+=i(e[a],a,"");return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(e){var t={},i=/function/i;if(e.nodeType===1){if(e.attributes.length){var r;for(r=0;r<e.attributes.length;r+=1)t["@"+e.attributes[r].nodename]=(e.attributes[r].nodevalue||"").tostring()}if(e.firstchild){var a="r=0,s=false,o;for(o=e.firstChild;o;o=o.nextSibling)if(o.nodeType===1)s=true;else" if(o.nodetype="==3&&o.nodeValue.match(/[^" \f\n\r\t\v]="" ))r+="1;else" t["#cdata"]="this.escape(o.nodeValue);else" if(t[o.nodename])if(t[o.nodename]instanceof="" array)t[o.nodename][t[o.nodename].length]="this.toObj(o);else" t[o.nodename]="[t[o.nodeName],this.toObj(o)];else" if(e.attributes.length)t["#text"]="this.escape(this.innerXml(e));else" t="this.escape(this.innerXml(e));else" if(r)if(e.attributes.length)t["#text"]="this.escape(this.innerXml(e));else{t=this.escape(this.innerXml(e));if(t==="__EMPTY_ARRAY_")t="[]";else" if(t="=="__EMPTY_STRING_")t=""}else" if(a)if(a="">1)t=this.escape(this.innerXml(e));else for(o=e.firstChild;o;o=o.nextSibling)if(i.test(e.firstChild.nodeValue)){t=e.firstChild.nodeValue;break}else t["#cdata"]=this.escape(o.nodeValue)}if(!e.attributes.length&&!e.firstChild)t=null}else if(e.nodeType===9)t=this.toObj(e.documentElement);else alert("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,i){var r=t?'"'+t+'"':"";if(e==="[]")r+=t?":[]":"[]";else if(e instanceof Array){var a,s,o=[];s=0;for(a=e.length;s<a;s+=1)o[s]=this.tojson(e[s],"",i+"\t");r+=(t?":[":"[")+(o.length>1?"\n"+i+"\t"+o.join(",\n"+i+"\t")+"\n"+i:o.join(""))+"]"}else if(e===null)r+=(t&&":")+"null";else if(typeof e==="object"){a=[];for(s in e)if(e.hasOwnProperty(s))a[a.length]=this.toJson(e[s],s,i+"\t");r+=(t?":{":"{")+(a.length>1?"\n"+i+"\t"+a.join(",\n"+i+"\t")+"\n"+i:a.join(""))+"}"}else if(typeof e==="string"){i=/function/i;a=e.toString();r+=/(^-?\d+\.?\d*$)/.test(a)||i.test(a)||a==="false"||a==="true"?(t&&":")+a:(t&&":")+'"'+e+'"'}else r+=(t&&":")+e.toString();return r},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else{var i=function(e){var t="",r;if(e.nodeType===1){t+="<"+e.nodename;for(r=0;r<e.attributes.length;r+=1)t+=" "+e.attributes[r].nodename+'="'+(e.attributes[r].nodeValue||" ").tostring()+'"';if(e.firstchild){t+=">" ;for(r="e.firstChild;r;r=r.nextSibling)t+=i(r);t+="</"+e.nodeName+"">"}else t+="/>"}else if(e.nodeType===3)t+=e.nodeValue;else if(e.nodeType===4)t+="<!--[CDATA["+e.nodeValue+"]]-->";return t};for(e=e.firstChild;e;e=e.nextSibling)t+=i(e)}return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();var t;for(t=e.firstChild;t;)if(t.nodeType===3)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{var i=t.nextSibling;e.removeChild(t);t=i}else{t.nodeType===1&&this.removeWhite(t);t=t.nextSibling}return e}};(function(e){e.jgrid.extend({setColumns:function(t){t=e.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:false,drag:true,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:true,ShrinkToFit:false,jqModal:false,saveicon:[true,"left","ui-icon-disk"],closeicon:[true,"left","ui-icon-close"],onClose:null,colnameview:true,closeAfterSubmit:true,updateAfterCheck:false,recreateForm:false},e.jgrid.col,t||{});return this.each(function(){var r=this;if(r.grid){var a=typeof t.beforeShowForm==="function"?true:false,s=typeof t.afterShowForm==="function"?true:false,o=typeof t.afterSubmitForm==="function"?true:false,l=r.p.id,n="ColTbl_"+l,d={themodal:"colmod"+l,modalhead:"colhd"+l,modalcontent:"colcnt"+l,scrollelm:n};t.recreateForm===true&&e("#"+d.themodal).html()!=null&&e("#"+d.themodal).remove();if(e("#"+d.themodal).html()!=null){a&&t.beforeShowForm(e("#"+n));viewModal("#"+d.themodal,{gbox:"#gbox_"+l,jqm:t.jqModal,jqM:false,modal:t.modal})}else{var u=isNaN(t.dataheight)?t.dataheight:t.dataheight+"px";u="<div id=""+n+"" class="formdata" style="width:100%;overflow:auto;position:relative;height:"+u+";">";u+="<table class="ColTable" cellspacing="1" cellpading="2" border="0"><tbody>";for(i=0;i<this.p.colnames.length;i++)r.p.colmodel[i].hidedlg||(u+="<tr><td style="white-space: pre;"><input type="checkbox" style="margin-right:5px;" id="col_"+this.p.colModel[i].name+"" class="cbox" value="T" "+(this.p.colmodel[i].hidden="==false?"checked":"")+"/"><label for="col_"+this.p.colModel[i].name+"">"+this.p.colNames[i]+(t.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td>");u+="</this.p.colnames.length;i++)r.p.colmodel[i].hidedlg||(u+="<tr></tbody></table></div>";u+="<table border="0" class="EditTable" id=""+n+"_2"><tbody><tr style="display:block;height:3px;"><td></td></tr><tr><td class="DataTD ui-widget-content"></td></tr><tr><td class="ColButton EditButton">"+(!t.updateAfterCheck?"<a href="javascript:void(0)" id="dData" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+t.bSubmit+"</a>":"")+"&#160;"+("<a href="javascript:void(0)" id="eData" class="fm-button ui-state-default ui-corner-all" target="_blank" rel="external">"+t.bCancel+"</a>")+"</td></tr></tbody></table>";t.gbox="#gbox_"+l;createModal(d,u,t,"#gview_"+r.p.id,e("#gview_"+r.p.id)[0]);if(t.saveicon[0]==true)e("#dData","#"+n+"_2").addClass(t.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class="ui-icon "+t.saveicon[2]+""></span>");if(t.closeicon[0]==true)e("#eData","#"+n+"_2").addClass(t.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class="ui-icon "+t.closeicon[2]+""></span>");t.updateAfterCheck?e(":input","#"+n).click(function(){var i=this.id.substr(4);if(i){this.checked?e(r).jqGrid("showCol",i):e(r).jqGrid("hideCol",i);t.ShrinkToFit===true&&e(r).jqGrid("setGridWidth",r.grid.width-.001,true)}return this}):e("#dData","#"+n+"_2").click(function(){for(i=0;i<r.p.colmodel.length;i++)if(!r.p.colmodel[i].hidedlg){var a="r.p.colModel[i].name.replace(/\./g,"\\.");if(e("#col_"+a,"#"+n).attr("checked")){e(r).jqGrid("showCol",r.p.colModel[i].name);e("#col_"+a,"#"+n).attr("defaultChecked",true)}else{e(r).jqGrid("hideCol",r.p.colModel[i].name);e("#col_"+a,"#"+n).attr("defaultChecked","")}}t.ShrinkToFit===true&&e(r).jqGrid("setGridWidth",r.grid.width-.001,true);t.closeAfterSubmit&&hideModal("#"+d.themodal,{gb:"#gbox_"+l,jqm:t.jqModal,onClose:t.onClose});o&&t.afterSubmitForm(e("#"+n));return" false});e("#edata","#"+n+"_2").click(function(){hidemodal("#"+d.themodal,{gb:"#gbox_"+l,jqm:t.jqmodal,onclose:t.onclose});return="" false});e("#ddata,="" #edata","#"+n+"_2").hover(function(){e(this).addclass("ui-state-hover")},function(){e(this).removeclass("ui-state-hover")});a&&t.beforeshowform(e("#"+n));viewmodal("#"+d.themodal,{gbox:"#gbox_"+l,jqm:t.jqmodal,jqm:true,modal:t.modal})}s&&t.aftershowform(e("#"+n))}})}})})(jquery);(function(e){e.jgrid.extend({getpostdata:function(){var="" e="this[0];if(e.grid)return" e.p.postdata},setpostdata:function(e){var="" t="this[0];if(t.grid)if(typeof" alert("error:="" cannot="" add="" non-object="" postdata="" value.="" unchanged.")},appendpostdata:function(t){var="" i="this[0];if(i.grid)typeof" append="" unchanged.")},setpostdataitem:function(e,t){var="" t.p.postdata[e]},removepostdataitem:function(e){var="" t.p.postdata[e]},getuserdata:function(){var="" e.p.userdata},getuserdataitem:function(e){var="" t.p.userdata[e]}})})(jquery);function="" tabletogrid(e,t){jquery(e).each(function(){if(!this.grid){jquery(this).width("99%");var="">0;r=!i&&r.length>0;var a=i||r,s=[],o=[];jQuery("th",jQuery(this)).each(function(){if(s.length===0&&a){s.push({name:"__selection__",index:"__selection__",width:0,hidden:true});o.push("__selection__")}else{s.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150});o.push(jQuery(this).html())}});var l=[],n=[],d=[];jQuery("tbody > tr",jQuery(this)).each(function(){var e={},t=0;jQuery("td",jQuery(this)).each(function(){if(t===0&&a){var i=jQuery("input",jQuery(this)),r=i.attr("value");n.push(r||l.length);i.attr("checked")&&d.push(r);e[s[t].name]=i.attr("value")}else e[s[t].name]=jQuery(this).html();t++});t>0&&l.push(e)});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:e,colNames:o,colModel:s,multiselect:i},t||{}));for(e=0;e<l.length;e++){r=null;if(n.length>0)if((r=n[e])&&r.replace)r=encodeURIComponent(r).replace(/[.\-%]/g,"_");if(r===null)r=e+1;jQuery(this).jqGrid("addRowData",r,l[e])}for(e=0;e<d.length;e++)jquery(this).jqgrid("setselection",d[e])}})}(function(a){if(a.browser.msie&&a.browser.version==8)a.expr[":"].hidden=function(e){return e.offsetwidth="==0||e.offsetHeight===0||e.style.display=="none"};a.jgrid._multiselect=false;if(a.ui)if(a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var" q="a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(e,t){e=q.call(this,e,t);if(t&&this.selectedList){var" i="this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(i)})}return" e}}if(a.ui.multiselect.prototype.destroy)a.ui.multiselect.prototype.destroy="function(){this.element.show();this.container.remove();a.Widget===undefined?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)};a.jgrid._multiselect=true}a.jgrid.extend({sortableColumns:function(e){return" this.each(function(){function="" t(){i.p.disableclick="true}var">th:not(:has(#jqgh_cb,#jqgh_rn,#jqgh_subgrid),:hidden)",placeholder:{element:function(e){return a(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,t){e=a(t.item).parent();e=a(">th",e);var r={};a.each(i.p.colModel,function(e){r[this.name]=e});var s=[];e.each(function(){var e=a(">div",this).get(0).id.replace(/^jqgh_/,"");e in r&&s.push(r[e])});a(i).jqGrid("remapColumns",s,true,true);a.isFunction(i.p.sortable.update)&&i.p.sortable.update(s);setTimeout(function(){i.p.disableClick=false},50)}};if(i.p.sortable.options)a.extend(r,i.p.sortable.options);else if(a.isFunction(i.p.sortable))i.p.sortable={update:i.p.sortable};if(r.start){var s=r.start;r.start=function(e,i){t();s.call(this,e,i)}}else r.start=t;if(i.p.sortable.exclude)r.items+=":not("+i.p.sortable.exclude+")";e.sortable(r).data("sortable").floating=true})},columnChooser:function(e){function t(e,t,i){if(t>=0){var r=e.slice(),a=r.splice(t,Math.max(e.length-t,t));if(t>e.length)t=e.length;r[t]=i;return r.concat(a)}}function i(e,t){if(e)if(typeof e=="string")a.fn[e]&&a.fn[e].apply(t,a.makeArray(arguments).slice(2));else a.isFunction(e)&&e.apply(t,a.makeArray(arguments).slice(2))}var r=this;if(!a("#colchooser_"+r[0].p.id).length){var s=a('<div id="colchooser_'+r[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),o=a("select",s);e=a.extend({width:420,height:240,classname:null,done:function(e){e&&r.jqGrid("remapColumns",e,true)},msel:"multiselect",dlog:"dialog",dlog_opts:function(e){var t={};t[e.bSubmit]=function(){e.apply_perm();e.cleanup(false)};t[e.bCancel]=function(){e.cleanup(true)};return{buttons:t,close:function(){e.cleanup(true)},modal:false,resizable:false,width:e.width+20}},apply_perm:function(){a("option",o).each(function(){this.selected?r.jqGrid("showCol",l[this.value].name):r.jqGrid("hideCol",l[this.value].name)});var i=[];a("option[selected]",o).each(function(){i.push(parseInt(this.value,10))});a.each(i,function(){delete d[l[parseInt(this,10)].name]});a.each(d,function(){var e=parseInt(this,10);i=t(i,e,e)});e.done&&e.done.call(r,i)},cleanup:function(t){i(e.dlog,s,"destroy");i(e.msel,o,"destroy");s.remove();t&&e.done&&e.done.call(r)},msel_opts:{}},a.jgrid.col,e||{});if(a.ui)if(a.ui.multiselect)if(e.msel=="multiselect"){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}e.msel_opts=a.extend(a.ui.multiselect.defaults,e.msel_opts)}e.caption&&s.attr("title",e.caption);if(e.classname){s.addClass(e.classname);o.addClass(e.classname)}if(e.width){a(">div",s).css({width:e.width,margin:"0 auto"});o.css("width",e.width)}if(e.height){a(">div",s).css("height",e.height);o.css("height",e.height-10)}var l=r.jqGrid("getGridParam","colModel"),n=r.jqGrid("getGridParam","colNames"),d={},u=[];o.empty();a.each(l,function(e){d[this.name]=e;if(this.hidedlg)this.hidden||u.push(e);else o.append("<option value=""+e+"" "+(this.hidden?"":"selected="selected" ")+"="">"+n[e]+"</option>")});var c=a.isFunction(e.dlog_opts)?e.dlog_opts.call(r,e):e.dlog_opts;i(e.dlog,s,c);c=a.isFunction(e.msel_opts)?e.msel_opts.call(r,e):e.msel_opts;i(e.msel,o,c)}},sortableRows:function(e){return this.each(function(){var t=this;if(t.grid)if(!t.p.treeGrid)if(a.fn.sortable){e=a.extend({cursor:"move",axis:"y",items:".jqgrow"},e||{});if(e.start&&a.isFunction(e.start)){e._start_=e.start;delete e.start}else e._start_=false;if(e.update&&a.isFunction(e.update)){e._update_=e.update;delete e.update}else e._update_=false;e.start=function(i,r){a(r.item).css("border-width","0px");a("td",r.item).each(function(e){this.style.width=t.grid.cols[e].style.width});if(t.p.subGrid){var s=a(r.item).attr("id");try{a(t).jqGrid("collapseSubGridRow",s)}catch(e){}}e._start_&&e._start_.apply(this,[i,r])};e.update=function(i,r){a(r.item).css("border-width","");t.p.rownumbers===true&&a("td.jqgrid-rownum",t.rows).each(function(e){a(this).html(e+1)});e._update_&&e._update_.apply(this,[i,r])};a("tbody:first",t).sortable(e);a("tbody:first",t).disableSelection()}})},gridDnD:function(e){return this.each(function(){function t(){var e=a.data(i,"dnd");a("tr.jqgrow:not(.ui-draggable)",i).draggable(a.isFunction(e.drag)?e.drag.call(a(i),e):e.drag)}var i=this;if(i.grid)if(!i.p.treeGrid)if(a.fn.draggable&&a.fn.droppable){a("#jqgrid_dnd").html()===null&&a("body").append("<table id="jqgrid_dnd" class="ui-jqgrid-dnd"></table>");if(typeof e=="string"&&e=="updateDnD"&&i.p.jqgdnd===true)t();else{e=a.extend({drag:function(e){return a.extend({start:function(t,r){if(i.p.subGrid){var s=a(r.helper).attr("id");try{a(i).jqGrid("collapseSubGridRow",s)}catch(e){}}for(s=0;s</d.length;e++)jquery(this).jqgrid("setselection",d[e])}})}(function(a){if(a.browser.msie&&a.browser.version==8)a.expr[":"].hidden=function(e){return></l.length;e++){r=null;if(n.length></r.p.colmodel.length;i++)if(!r.p.colmodel[i].hidedlg){var></"+e.nodename;for(r=0;r<e.attributes.length;r+=1)t+="></a;s+=1)o[s]=this.tojson(e[s],"",i+"\t");r+=(t?":[":"[")+(o.length></e.attributes.length;r+=1)t["@"+e.attributes[r].nodename]=(e.attributes[r].nodevalue||"").tostring()}if(e.firstchild){var></o;s+=1){var></a.length;s++)e(i).jqgrid("delrowdata",a[s].id);e(i).jqgrid("delrowdata",r.id)}}})}})})(jquery);(function(e){e.jgrid.extend({jqgridimport:function(t){t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"get",impdata:{},xmlgrid:{config:"roots></o;s++){l=u[s];n.push(l);e(this).jqgrid("collectchildrensorttree",n,l,t,i,r,a)}e.each(n,function(t){var></=d&&i.push(this)});break;case"adjacency":i.push(t);var></n&&i.push(this)});break;case"adjacency":var></l&&parseint(this[s],10)></a.groupfield.length;s++)a.groupcolumnshow[s]||e(r).jqgrid("showcol",a.groupfield[s]);r.p.groupingview=e.extend(r.p.groupingview,i||{});a.groupfield=t;e(r).trigger("reloadgrid")})},groupingremove:function(t){return></i;h++){var></t[u].length;d++)s+=t[u][d].join("");if(a.groupsummary[0]){d="";if(a.groupcollapse&&!a.showsummaryonhide)d='></i.groupfield.length;r++){i.grouporder[r]||(i.grouporder[r]="asc");i.grouptext[r]||(i.grouptext[r]="{0}");if(typeof></l.length;n++)a(u,l[n]||"&#160;",n)}else{var></t.length;o++){l=t[o];u=e("<tr></r.p.subgridmodel[0].name.length;o++){s=e("<th></t.length;o++)a(d,e(t[o],this).text()||"&#160;",o)}e(n).append(d)})}t=e("table:first",r.grid.bdiv).attr("id")+"_";e("#"+t+i).append(n);r.grid.hdiv.loading=false;e("#load_"+r.p.id).hide();return></r.p.subgridmodel[0].name.length;o++){s=e("<th></t[0].name.length;i++)t[0].align[i]=t[0].align[i]||"left"}})},addsubgridcell:function(e,t){var></p></=r.p.colmodel.length-1){s=i(r.p.icol+1,"rgt");t(r.p.irow,s,"h");e(r).jqgrid("editcell",r.p.irow,s,false)}break;case></=r.rows.length-1){t(r.p.irow+1,r.p.icol,"vd");e(r).jqgrid("editcell",r.p.irow+1,r.p.icol,false)}break;case></r.p.colmodel.length;a++)if(r.p.colmodel[a].hidden!==true){i=a;break}}return></s)e(r.grid.bdiv)[0].scrollleft=e(r.grid.bdiv)[0].scrollleft-r.rows[t].cells[i].clientwidth}}function></o)e(r.grid.bdiv)[0].scrolltop=e(r.grid.bdiv)[0].scrolltop-r.rows[t].clientheight}if(a=="h"){a=e(r.grid.bdiv)[0].clientwidth;s=e(r.grid.bdiv)[0].scrollleft;o=r.rows[t].cells[i].offsetleft;if(r.rows[t].cells[i].offsetleft+r.rows[t].cells[i].clientwidth></r.p.colmodel.length;s++)if(r.p.colmodel[s].editable===true){a=s;break}if(a!==false)e(r).jqgrid("editcell",t,a,true);else></r.p.savedrow.length;l++)if(r.p.savedrow[l].id==t){a=l;break}if(a></n.p.savedrow.length;a++)if(n.p.savedrow[a].id==t){f=a;break}f></n.p.savedrow.length;b++)if(n.p.savedrow[b].id==t){f=b;break}f></l;s++)n[r[a]].data[seldomobj.options[s].value]=s}}var></l;s++)n[r[a]].ops[seldomobj.options[s].value]=s}if(seldomobj=t.find(".data></r;a++)i[seldomobj.options[a].value]=a;seldomobj.selectedindex=i[t];jquery(seldomobj).change(function(e){e.stoppropagation()})};this.setfilter=function(e){var></div></div></u;c++){var></n.length;c++)e(a).jqgrid("delrowdata",n[c]);a.p.selrow=null;a.p.selarrrow=[]}e.isfunction(t.aftercomplete)&&settimeout(function(){t.aftercomplete(o,s)},500)}t.processing=false;e("#ddata","#"+d+"_2").removeclass("ui-state-active");i[0]&&hidemodal("#"+h.themodal,{gb:"#gbox_"+l,jqm:r.jqmodal,onclose:t.onclose})},error:function(i,r,a){e("#delerror></t.rp)return-1;return></a></a></=s;x++)g+=x==1?h:"<td></t.rp)return-1;return></a></a></0&&l!==""){e("#"+s,"#"+a).attr("checked",true);e("#"+s,"#"+a).attr("defaultchecked",true)}else{e("#"+s,"#"+a).attr("checked",false);e("#"+s,"#"+a).attr("defaultchecked","")}}break;case"custom":try{if(f[n].editoptions&&e.isfunction(f[n].editoptions.custom_value))f[n].editoptions.custom_value(e("#"+s,"#"+a),"set",l);else></0&&c!==""){n[0].checked=true;n[0].defaultchecked=true;n[0].value=u}else></=s;b++)m+="<td></i.sopt.length;f++)if((h=e.inarray(i.sopt[f],p))!=-1){i.ops[g]={op:i.sopt[f],text:t.odata[h]};g++}}if(typeof></t.sopt.length;f++){if((h=e.inarray(t.sopt[f],p))!=-1){m[g]={op:t.sopt[f],text:t.odata[h]};g++}}else></s;a++){r=i.rules[a];if(r.field!==undefined&&r.op!==undefined&&r.data!==undefined)(r=t.searchfilter.setfilter({sfref:t.searchfilter.$.find(".sf:last"),filter:e.extend({},r)}))&&t.searchfilter.add()}}}}function></parsefloat(r.minvalue))return[false,s+":></o;a++)if(i.p.colmodel[a].name==t){r=i.p.colmodel[a].editrules;t=a;try{s=i.p.colmodel[a].formoptions.label}catch(e){}break}}else></1||e[1]></1||i[e[s]]<1||i[e[s]]></=e;t++){this[t]=31;if(t==4||t==6||t==9||t==11)this[t]=30;if(t==2)this[t]=29}return></r.length;l++){a=r[l].split(":");if(a.length></0&&l!==""){o.checked=true;o.defaultchecked=true;o.value=i}else></a.buttons.length;r++){if(typeof></p.length;g++){f=p[g].split(":");h=document.createelement("option");h.value=f[0];h.innerhtml=f[1];c.appendchild(h)}}else></a.length;f++){u=a[f].split(":");p=document.createelement("option");p.value=u[0];p.innerhtml=u[1];if(u[1]==n.defval)p.selected="selected";c.appendchild(p)}}else></a.length;e++)if(this.name==a[e].name){this.index=a[e].index||this.name;break}if(!this.index)this.index=this.name});var></u.length;t++){n=l.formatter(c,u[t],t,u,"edit");o=l.p.colmodel[t].title?{title:e.jgrid.striphtml(n)}:{};l.p.treegrid===true&&a==l.p.expandcolumn?e("td:eq("+t+")></i.length;r++)if(i[r].name==e){t=i[r];break}return></l.length;d++){o=l[d].split(":");if(o.length></n.length;u++){l=n[u].split(":");if(l.length></=69)o.y=2e3+o.y;l=new></=99)o.y=1900+o.y;else></t;)e="0"+e;return></0){a+=s;t=a.length-1}else></n;){if(b(o.rows[d]).hasclass("jqgrow")){try{a=b.unformat(b(o.rows[d].cells[l]),{rowid:o.rows[d].id,colmodel:o.p.colmodel[l]},l)}catch(e){a=b.jgrid.htmldecode(o.rows[d].cells[l].innerhtml)}if(i)s+=parsefloat(a);else></0)){this.width=r;a+=r;i.grid.headers[e].width=r></b(i.grid.bdiv)[0].scrollheight||i.rows.length===1){n=true;u-=d}a=0;var></y.p.colmodel.length;c++){w=y.p.colmodel[c];s=w.name;_[s]=w.formatter&&typeof></j;){v=t[x];o="";if(h){try{e=v[g]}catch(t){e=y.p.records+1+""}c=y.p.altrows===true?(y.rows.length-1)%2===0?m:"":""}if(d){f=y.formatcol(0,1,"");o+='<td></a;){if(r)n=o.rows[s];if(b(n).hasclass("jqgrow")){b("td",n).each(function(e){l=o.p.colmodel[e].name;if(l!=="cb"&&l!=="subgrid"&&l!=="rn")if(o.p.treegrid===true&&l==o.p.expandcolumn)t[l]=b.jgrid.htmldecode(b("span:first",this).html());else></t+i)if(a<i)b(r.grid.bdiv)[0].scrolltop=a}var></i;){if(b(this.rows[t]).hasclass("jqgrow")){e[r]=this.rows[t].id;r++}t++}});return></=0)i=r=0;if(i==1||i===0){b("#first,></0)a=0;a*=parseint(s.p.rownum,10);l=a+s.p.reccount;if(s.p.scroll){i=b("tbody:first></1)e=1;s.p.page=e;s.grid.bdiv.scrolltop=s.grid.prevrowheight?(e-1)*s.grid.prevrowheight*s.p.rownum:0}if(s.grid.prevrowheight&&s.p.scroll){delete></s.p.colmodel.length;i++)if(s.p.colmodel[i].hidden!==true){t=i;break}return></i))if(e===i)n=l=false}else></k;){a=g[u];m=b.jgrid.getaccessor(a,n);if(m===undefined){m=i+u;if(h.length===0)if(t.cell)m=a[t.cell][n]||m}if(a){if(t.repeatitems){if(t.cell)a=b.jgrid.getaccessor(a,t.cell);c||(c=y(_+d+q))}for(p=0;p<c.length;p++){c=b.jgrid.getaccessor(a,c[p]);f[s.p.colmodel[p+_+d+q].name]=c}f[l]=m;s.p.data.push(f);f={}}u++}x()}}}},d=function(){var></c;e++)p.push(f[s.p.groupingview.groupfield[e]]);q=b(s).jqgrid("groupingprepare",f,p,q,f);f=[]}if(d){f[l]=m;s.p.data.push(f)}if(s.p.gridview===false){if(s.p.treegrid===true){c=s.p.treeanode></c.length;p++){c=b.jgrid.getaccessor(a,c[p]);f.push(g(m,c,p+_+d+q,e+i,a));f[s.p.colmodel[p+_+d+q].name]=c}f.push("<></k;){a=g[e];m=b.jgrid.getaccessor(a,n);if(m===undefined){m=i+e;if(h.length===0)if(t.cell)m=a[t.cell][n]||m}c=i===1?0:i;c=(c+e)%2==1?s:"";f.push("<tr"+n+'></i;){f=e[c];m=d(f,c);if(s.p.xmlreader.repeatitems){k||(k=y(h+c+_));var></u;p++)f.push(g[s.p.groupingview.groupfield[p]]);e=b(s).jqgrid("groupingprepare",s,f,e,g);s=[]}if(l){g[n]=m;s.p.data.push(g)}if(s.p.gridview===false){if(s.p.treegrid===true){u=s.p.treeanode></q.length;u++){p=b(q[u],f).text();g[s.p.colmodel[u+h+c+_].name]=p;s.push(g(m,p,u+h+c+_,t+i,f))}s.push("<></i;){f=e[t];m=d(f,n+t);u=i===0?0:i+1;u=(u+t)%2==1?r:"";s.push("<tr"+o+'></e;i++){r=b.jgrid.getaccessor(s.p.data[i],t);s.p._index[r]=i}},c=function(e,t,i,r,a){var></s.p.colmodel.length;a++){t=s.p.colmodel[a];if(t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"){i[r]=e=="local"?t.name:e=="xml"?t.xmlmap||t.name:t.jsonmap||t.name;r++}}return></=6?'<iframe></r.length;o++)r[o]!=i&&b(e).jqgrid("setselection",r[o],false);i&&b(e).jqgrid("setselection",i,false);e.grid.bdiv.scrollleft=a;t.gridcomplete=s;t.gridcomplete&&s()}}};if(this.tagname!="table")alert("element></2||t.scroll===true){d=math.round((n+o)></e&&l<=0&&(t.lastpage===undefined||parseint((n+o+a-1)></=",i)};this.startswith=function(e,t){var></",i)};this.greaterorequals=function(e,t,i){return></e.length;r++){a=c._dosort(e[r].items,t);for(s=0;s<a.length;s++)i.push(a[s])}return></t)return-i;if(e></=69)i.y=2e3+i.y}return></=99)i.y=1900+i.y;else></2&&t[r]==l[s]){t[r]=s;i.h=n(t[r],i.h)}}if(e[r]=="a"){s=b.inarray(t[r],l);if(s!==-1&&s></a;r++){if(e[r]=="m"){s=b.inarray(t[r],o);if(s!==-1&&s<12)t[r]=s+1}if(e[r]=="f"){s=b.inarray(t[r],o);if(s!==-1&&s></").replace(>